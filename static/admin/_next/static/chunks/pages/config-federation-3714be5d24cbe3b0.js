(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{94594:function(e,n,a){"use strict";a.d(n,{Z:function(){return k}});var t=a(87462),i=a(4942),r=a(67294),c=a(97685),l=a(91),s=a(94184),o=a.n(s),d=a(21770),u=a(15105),f=r.forwardRef((function(e,n){var a,t=e.prefixCls,s=void 0===t?"rc-switch":t,f=e.className,h=e.checked,v=e.defaultChecked,m=e.disabled,p=e.loadingIcon,g=e.checkedChildren,b=e.unCheckedChildren,C=e.onClick,w=e.onChange,k=e.onKeyDown,x=(0,l.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),N=(0,d.Z)(!1,{value:h,defaultValue:v}),y=(0,c.Z)(N,2),j=y[0],P=y[1];function Z(e,n){var a=j;return m||(P(a=e),null===w||void 0===w||w(a,n)),a}var E=o()(s,f,(a={},(0,i.Z)(a,"".concat(s,"-checked"),j),(0,i.Z)(a,"".concat(s,"-disabled"),m),a));return r.createElement("button",Object.assign({},x,{type:"button",role:"switch","aria-checked":j,disabled:m,className:E,ref:n,onKeyDown:function(e){e.which===u.Z.LEFT?Z(!1,e):e.which===u.Z.RIGHT&&Z(!0,e),null===k||void 0===k||k(e)},onClick:function(e){var n=Z(!j,e);null===C||void 0===C||C(n,e)}}),p,r.createElement("span",{className:"".concat(s,"-inner")},j?g:b))}));f.displayName="Switch";var h=f,v=a(50888),m=a(97202),p=a(59844),g=a(97647),b=a(21687),C=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)n.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(a[t[i]]=e[t[i]])}return a},w=r.forwardRef((function(e,n){var a,c=e.prefixCls,l=e.size,s=e.loading,d=e.className,u=void 0===d?"":d,f=e.disabled,w=C(e,["prefixCls","size","loading","className","disabled"]);(0,b.Z)("checked"in w||!("value"in w),"Switch","`value` is not a valid prop, do you mean `checked`?");var k=r.useContext(p.E_),x=k.getPrefixCls,N=k.direction,y=r.useContext(g.Z),j=x("switch",c),P=r.createElement("div",{className:"".concat(j,"-handle")},s&&r.createElement(v.Z,{className:"".concat(j,"-loading-icon")})),Z=o()((a={},(0,i.Z)(a,"".concat(j,"-small"),"small"===(l||y)),(0,i.Z)(a,"".concat(j,"-loading"),s),(0,i.Z)(a,"".concat(j,"-rtl"),"rtl"===N),a),u);return r.createElement(m.Z,{insertExtraNode:!0},r.createElement(h,(0,t.Z)({},w,{prefixCls:j,className:Z,disabled:f||s,ref:n,loadingIcon:P})))}));w.__ANT_SWITCH=!0,w.displayName="Switch";var k=w},50291:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/config-federation",function(){return a(6898)}])},15976:function(e,n,a){"use strict";a.d(n,{Z:function(){return h}});var t=a(28520),i=a.n(t),r=a(85893),c=a(67294),l=a(94594),s=a(83200),o=a(78464),d=a(25964),u=a(35159);function f(e,n,a,t,i,r,c){try{var l=e[r](c),s=l.value}catch(o){return void a(o)}l.done?n(s):Promise.resolve(s).then(t,i)}function h(e){var n,a=(0,c.useState)(null),t=a[0],h=a[1],v=null,m=((0,c.useContext)(u.aC)||{}).setFieldInConfigState,p=e.apiPath,g=e.checked,b=e.reversed,C=void 0!==b&&b,w=e.configPath,k=void 0===w?"":w,x=e.disabled,N=void 0!==x&&x,y=e.fieldName,j=e.label,P=e.tip,Z=e.useSubmit,E=e.onChange,O=function(){h(null),clearTimeout(v),v=null},S=(n=i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=6;break}return h((0,s.kg)(s.Jk)),a=C?!n:n,e.next=5,(0,d.Si)({apiPath:p,data:{value:a},onSuccess:function(){m({fieldName:y,value:a,path:k}),h((0,s.kg)(s.zv))},onError:function(e){h((0,s.kg)(s.Un,"There was an error: ".concat(e)))}});case 5:v=setTimeout(O,d.sI);case 6:E&&E(n);case 7:case"end":return e.stop()}}),e)})),function(){var e=this,a=arguments;return new Promise((function(t,i){var r=n.apply(e,a);function c(e){f(r,t,i,c,l,"next",e)}function l(e){f(r,t,i,c,l,"throw",e)}c(void 0)}))}),_=null!==t&&t.type===s.Jk;return(0,r.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[j&&(0,r.jsx)("div",{className:"label-side",children:(0,r.jsx)("span",{className:"formfield-label",children:j})}),(0,r.jsxs)("div",{className:"input-side",children:[(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)(l.Z,{className:"switch field-".concat(y),loading:_,onChange:S,defaultChecked:g,checked:g,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:N}),(0,r.jsx)(o.Z,{status:t})]}),(0,r.jsx)("p",{className:"field-tip",children:P})]})]})}h.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},6898:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return h}});var t=a(85893),i=a(17256),r=a(67294),c=a(19363),l=a(50197),s=a(15976),o=a(25964),d=a(35159);function u(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function f(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{},t=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),t.forEach((function(n){u(e,n,a[n])}))}return e}function h(){var e=i.Z.Title,n=(0,r.useState)(null),a=n[0],h=n[1],v=((0,r.useContext)(d.aC)||{}).serverConfig,m=v.federation,p=v.yp,g=m.enabled,b=m.isPrivate,C=m.username,w=m.goLiveMessage,k=m.showEngagement,x=p.instanceUrl,N=function(e){var n=e.fieldName,t=e.value;h(f({},a,u({},n,t)))};if((0,r.useEffect)((function(){h({enabled:g,isPrivate:b,username:C,goLiveMessage:w,showEngagement:k,instanceUrl:p.instanceUrl})}),[v,p]),!a)return null;var y=""!==x,j=x.startsWith("https://");return(0,t.jsxs)("div",{className:"config-server-details-form",children:[(0,t.jsx)(e,{children:"Federation Settings"}),"Explain what the Fediverse is here and talk about what happens if you were to enable this feature.",(0,t.jsxs)("div",{className:"form-module config-server-details-container",children:[(0,t.jsx)(s.Z,f({fieldName:"enabled"},o.Kl,{checked:a.enabled,disabled:!y||!j})),(0,t.jsx)(l.ZP,f({fieldName:"instanceUrl"},o.yi,{value:a.instanceUrl,initialValue:p.instanceUrl,type:c.xA,onChange:N,onSubmit:function(){var e=""!==a.instanceUrl,n=a.instanceUrl.startsWith("https://");e&&n||((0,o.Si)({apiPath:o.Kl.apiPath,data:{value:!1}}),h({enabled:!1}))}})),(0,t.jsx)(s.Z,f({fieldName:"isPrivate"},o.LC,{checked:a.isPrivate})),(0,t.jsx)(l.ZP,f({required:!0,fieldName:"username"},o.Xc,{value:a.username,initialValue:C,onChange:N})),(0,t.jsx)(l.ZP,f({required:!0,fieldName:"goLiveMessage"},o.BF,{type:c.Sk,value:a.goLiveMessage,initialValue:w,onChange:N})),(0,t.jsx)(s.Z,f({fieldName:"showEngagement"},o.FE,{checked:a.showEngagement})),(0,t.jsx)("br",{}),(0,t.jsx)("br",{})]})]})}}},function(e){e.O(0,[774,888,179],(function(){return n=50291,e(e.s=n);var n}));var n=e.O();_N_E=n}]);