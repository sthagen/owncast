(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1683],{25330:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},28706:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"}},90306:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"}},71961:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(79686))&&n.__esModule?n:{default:n};t.default=a,e.exports=a},79686:function(e,t,r){"use strict";var n=r(64836),a=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(42122)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(67294)),l=n(r(25330)),s=n(r(92074));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var u=function(e,t){return o.createElement(s.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))};u.displayName="CheckOutlined";var f=o.forwardRef(u);t.default=f},91873:function(e,t,r){"use strict";var n=r(64836),a=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(42122)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(67294)),l=n(r(28706)),s=n(r(92074));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var u=function(e,t){return o.createElement(s.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))};u.displayName="PlusSquareOutlined";var f=o.forwardRef(u);t.default=f},35855:function(e,t,r){"use strict";var n=r(64836),a=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(42122)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(67294)),l=n(r(90306)),s=n(r(92074));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var u=function(e,t){return o.createElement(s.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))};u.displayName="UploadOutlined";var f=o.forwardRef(u);t.default=f},89277:function(e,t,r){"use strict";var n=r(75263).default,a=r(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(10434));a(r(18698));var o=n(r(67294));a(r(13594));var l=a(r(28460)),s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r},c=o.forwardRef(function(e,t){var r=e.ellipsis,n=e.rel,a=s(e,["ellipsis","rel"]),c=(0,i.default)((0,i.default)({},a),{rel:void 0===n&&"_blank"===a.target?"noopener noreferrer":n});return delete c.navigate,o.createElement(l.default,(0,i.default)({},c,{ref:t,ellipsis:!!r,component:"a"}))});t.default=c},21987:function(e,t,r){"use strict";var n=r(75263).default,a=r(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(10434)),o=n(r(67294)),l=a(r(28460)),s=o.forwardRef(function(e,t){return o.createElement(l.default,(0,i.default)({ref:t},e,{component:"div"}))});t.default=s},15394:function(e,t,r){"use strict";var n=r(75263).default,a=r(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(10434)),o=a(r(18698)),l=a(r(18475)),s=n(r(67294));a(r(13594));var c=a(r(28460)),u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r},f=s.forwardRef(function(e,t){var r=e.ellipsis,n=u(e,["ellipsis"]),a=s.useMemo(function(){return r&&"object"===(0,o.default)(r)?(0,l.default)(r,["expandable","rows"]):r},[r]);return s.createElement(c.default,(0,i.default)({ref:t},n,{ellipsis:a,component:"span"}))});t.default=f},53740:function(e,t,r){"use strict";var n=r(64836).default;t.default=void 0;var a=n(r(89277)),i=n(r(21987)),o=n(r(15394)),l=n(r(11700)),s=n(r(89652)).default;s.Text=o.default,s.Link=a.default,s.Title=l.default,s.Paragraph=i.default,t.default=s},41398:function(e,t,r){"use strict";r.r(t),r.d(t,{BrowserNotifyModal:function(){return N}});var n=r(85893),a=r(55673),i=r(89552),o=r(53740),l=r(65400),s=r(67294),c=r(35855),u=r(91873),f=r(4480),d=r(4511),p=r(44974);async function v(e,t,r){console.log("saveNotificationRegistration");let n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel:e,destination:t})};await fetch("".concat("/api/notifications/register","?accessToken=").concat(r),n)}async function h(e){let t=await navigator.serviceWorker.ready,r=await t.pushManager.getSubscription();return r||(r=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(r),a=new Uint8Array(n.length);for(let e=0;e<n.length;++e)a[e]=n.charCodeAt(e);return a}(e)})),JSON.stringify(r)}var w=r(67940),y=r.n(w),b=r(69183),j=r(63516),g=r(34148);let{Title:m}=o.default,O=()=>(0,n.jsx)("div",{children:"Browser notifications are not supported in your browser."}),_=()=>(0,n.jsx)("div",{children:"Browser notifications are not supported for local servers."}),x=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{level:3,children:"Get notified on iOS"}),"It takes a couple extra steps to make sure you get notified when your favorite streams go live.",(0,n.jsxs)("ol",{children:[(0,n.jsxs)("li",{children:["Tap the ",(0,n.jsx)("strong",{children:"share"})," button ",(0,n.jsx)(c.default,{})," in Safari."]}),(0,n.jsxs)("li",{children:["Scroll down and tap ",(0,n.jsx)("strong",{children:"“Add to Home Screen”"})," ",(0,n.jsx)(u.default,{}),"."]}),(0,n.jsxs)("li",{children:["Tap ",(0,n.jsx)("strong",{children:"“Add”"}),"."]}),(0,n.jsx)("li",{children:"Give this link a name and tap the new icon on your home screen"}),(0,n.jsx)("li",{children:"Come back to this screen and enable notifications."}),(0,n.jsxs)("li",{children:["Tap ",(0,n.jsx)("strong",{children:"“Allow”"})," when prompted."]})]})]}),M=e=>{let{start:t}=e;return(0,n.jsx)("div",{id:"browser-push-preview-box",className:y().pushPreview,children:(0,n.jsxs)("div",{className:y().inner,children:[(0,n.jsxs)("div",{className:y().title,children:[window.location.toString()," wants to"]}),(0,n.jsxs)("div",{className:y().permissionLine,children:[(0,n.jsx)("svg",{className:y().bell,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M14 12.3333V13H2V12.3333L3.33333 11V7C3.33333 4.93333 4.68667 3.11333 6.66667 2.52667C6.66667 2.46 6.66667 2.4 6.66667 2.33333C6.66667 1.97971 6.80714 1.64057 7.05719 1.39052C7.30724 1.14048 7.64638 1 8 1C8.35362 1 8.69276 1.14048 8.94281 1.39052C9.19286 1.64057 9.33333 1.97971 9.33333 2.33333C9.33333 2.4 9.33333 2.46 9.33333 2.52667C11.3133 3.11333 12.6667 4.93333 12.6667 7V11L14 12.3333ZM9.33333 13.6667C9.33333 14.0203 9.19286 14.3594 8.94281 14.6095C8.69276 14.8595 8.35362 15 8 15C7.64638 15 7.30724 14.8595 7.05719 14.6095C6.80714 14.3594 6.66667 14.0203 6.66667 13.6667",fill:"#676670"})}),(0,n.jsx)("span",{className:y().showNotificationsText,children:"Show notifications"})]}),(0,n.jsxs)("div",{className:y().buttonRow,children:[(0,n.jsx)(l.default,{type:"primary",onClick:()=>{t()},children:"Allow"}),(0,n.jsx)("button",{type:"button",className:y().disabled,children:"Block"})]})]})})},P=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{level:2,children:"Notifications are enabled"}),"To disable push notifications from ",window.location.hostname.toString()," access your browser permissions for this site and turn off notifications.",(0,n.jsx)("a",{href:"https://owncast.online/docs/notifications",children:" Learn more."})]}),N=()=>{let[e,t]=(0,s.useState)(null),r=(0,f.sJ)(p.FI),o=(0,f.sJ)(p.g1),[l,c]=(0,s.useState)(!1),u=(0,g.w)()&&"default"!==Notification.permission,{notifications:w}=o,{browser:m}=w,{publicKey:N}=m,k=m.enabled&&((0,g.w)()||(0,j.rZ)());if(u)return(0,n.jsx)(P,{});if((0,j.C9)()&&!(0,j.rZ)())return(0,n.jsx)(x,{});let C=async()=>{if(!(0,g.w)()||"default"===Notification.permission){c(!0);try{let e=await h(N);v("BROWSER_PUSH_NOTIFICATION",e,r),t(null)}catch(e){t("Error registering for live notifications: ".concat(e.message,". Make sure you're not inside a private browser environment or have previously disabled notifications for this stream."))}c(!1)}};return"localhost"===window.location.hostname?(0,n.jsx)(_,{}):k?(0,n.jsx)(d.SV,{fallbackRender:e=>{let{error:t,resetErrorBoundary:r}=e;return(0,n.jsx)(b.A,{componentName:"BrowserNotifyModal",message:t.message,retryFunction:r})},children:(0,n.jsxs)(i.default,{spinning:l,children:[(0,n.jsxs)(a.Z,{className:y().description,children:["Get notified right in the browser each time this stream goes live.",(0,n.jsx)("a",{href:"https://owncast.online/docs/notifications/#browser-notifications",children:"Learn more"}),"\xa0 about Owncast browser notifications."]}),(0,n.jsx)(a.Z,{children:e}),(0,n.jsx)(M,{start:()=>C()})]})}):(0,n.jsx)(O,{})}},67940:function(e){e.exports={description:"BrowserNotifyModal_description__G5jk5",pushPreview:"BrowserNotifyModal_pushPreview__RuEzl",inner:"BrowserNotifyModal_inner__iC07B",title:"BrowserNotifyModal_title__L6D4G",permissionLine:"BrowserNotifyModal_permissionLine__C7NWu",bell:"BrowserNotifyModal_bell__7LVGs",buttonRow:"BrowserNotifyModal_buttonRow__XcR9z",disabled:"BrowserNotifyModal_disabled__yqYtE"}}}]);