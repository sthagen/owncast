(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3669],{25330:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},28706:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"}},90306:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"}},71961:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=_interopRequireDefault(r(79686));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=i,e.exports=i},79686:function(e,t,r){"use strict";var i=r(64836),n=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r(42122)),o=_interopRequireWildcard(r(67294)),l=i(r(25330)),s=i(r(92074));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}var CheckOutlined=function(e,t){return o.createElement(s.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:l.default}))};CheckOutlined.displayName="CheckOutlined";var c=o.forwardRef(CheckOutlined);t.default=c},91873:function(e,t,r){"use strict";var i=r(64836),n=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r(42122)),o=_interopRequireWildcard(r(67294)),l=i(r(28706)),s=i(r(92074));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}var PlusSquareOutlined=function(e,t){return o.createElement(s.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:l.default}))};PlusSquareOutlined.displayName="PlusSquareOutlined";var c=o.forwardRef(PlusSquareOutlined);t.default=c},35855:function(e,t,r){"use strict";var i=r(64836),n=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r(42122)),o=_interopRequireWildcard(r(67294)),l=i(r(90306)),s=i(r(92074));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}var UploadOutlined=function(e,t){return o.createElement(s.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:l.default}))};UploadOutlined.displayName="UploadOutlined";var c=o.forwardRef(UploadOutlined);t.default=c},89277:function(e,t,r){"use strict";var i=r(75263).default,n=r(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(10434));n(r(18698));var o=i(r(67294));n(r(13594));var l=n(r(28460)),__rest=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r},s=o.forwardRef(function(e,t){var r=e.ellipsis,i=e.rel,n=__rest(e,["ellipsis","rel"]),s=(0,a.default)((0,a.default)({},n),{rel:void 0===i&&"_blank"===n.target?"noopener noreferrer":i});return delete s.navigate,o.createElement(l.default,(0,a.default)({},s,{ref:t,ellipsis:!!r,component:"a"}))});t.default=s},21987:function(e,t,r){"use strict";var i=r(75263).default,n=r(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(10434)),o=i(r(67294)),l=n(r(28460)),s=o.forwardRef(function(e,t){return o.createElement(l.default,(0,a.default)({ref:t},e,{component:"div"}))});t.default=s},15394:function(e,t,r){"use strict";var i=r(75263).default,n=r(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(10434)),o=n(r(18698)),l=n(r(18475)),s=i(r(67294));n(r(13594));var c=n(r(28460)),__rest=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r},u=s.forwardRef(function(e,t){var r=e.ellipsis,i=__rest(e,["ellipsis"]),n=s.useMemo(function(){return r&&"object"===(0,o.default)(r)?(0,l.default)(r,["expandable","rows"]):r},[r]);return s.createElement(c.default,(0,a.default)({ref:t},i,{ellipsis:n,component:"span"}))});t.default=u},53740:function(e,t,r){"use strict";var i=r(64836).default;t.default=void 0;var n=i(r(89277)),a=i(r(21987)),o=i(r(15394)),l=i(r(34528)),s=i(r(89652)).default;s.Text=o.default,s.Link=n.default,s.Title=l.default,s.Paragraph=a.default,t.default=s},49808:function(e,t,r){"use strict";r.r(t),r.d(t,{BrowserNotifyModal:function(){return BrowserNotifyModal}});var i=r(85893),n=r(55673),a=r(89552),o=r(53740),l=r(65400),s=r(67294),c=r(35855),u=r(91873),d=r(4480),f=r(4511),p=r(73580);async function saveNotificationRegistration(e,t,r){console.log("saveNotificationRegistration");let i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel:e,destination:t})};await fetch("".concat("/api/notifications/register","?accessToken=").concat(r),i)}function urlBase64ToUint8Array(e){let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(r),n=new Uint8Array(i.length);for(let e=0;e<i.length;++e)n[e]=i.charCodeAt(e);return n}async function registerWebPushNotifications(e){let t=await navigator.serviceWorker.ready,r=await t.pushManager.getSubscription();return r||(r=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array(e)})),JSON.stringify(r)}var h=r(28198),v=r.n(h),w=r(50057),y=r(53924),b=r(97918);let{Title:_}=o.default,NotificationsNotSupported=()=>(0,i.jsx)("div",{children:"Browser notifications are not supported in your browser."}),NotificationsNotSupportedLocal=()=>(0,i.jsx)("div",{children:"Browser notifications are not supported for local servers."}),MobileSafariInstructions=()=>(0,i.jsxs)("div",{children:[(0,i.jsx)(_,{level:3,children:"Get notified on iOS"}),"It takes a couple extra steps to make sure you get notified when your favorite streams go live.",(0,i.jsxs)("ol",{children:[(0,i.jsxs)("li",{children:["Tap the ",(0,i.jsx)("strong",{children:"share"})," button ",(0,i.jsx)(c.default,{})," in Safari."]}),(0,i.jsxs)("li",{children:["Scroll down and tap ",(0,i.jsx)("strong",{children:"“Add to Home Screen”"})," ",(0,i.jsx)(u.default,{}),"."]}),(0,i.jsxs)("li",{children:["Tap ",(0,i.jsx)("strong",{children:"“Add”"}),"."]}),(0,i.jsx)("li",{children:"Give this link a name and tap the new icon on your home screen"}),(0,i.jsx)("li",{children:"Come back to this screen and enable notifications."}),(0,i.jsxs)("li",{children:["Tap ",(0,i.jsx)("strong",{children:"“Allow”"})," when prompted."]})]})]}),PermissionPopupPreview=e=>{let{start:t}=e;return(0,i.jsx)("div",{id:"browser-push-preview-box",className:v().pushPreview,children:(0,i.jsxs)("div",{className:v().inner,children:[(0,i.jsxs)("div",{className:v().title,children:[window.location.toString()," wants to"]}),(0,i.jsxs)("div",{className:v().permissionLine,children:[(0,i.jsx)("svg",{className:v().bell,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M14 12.3333V13H2V12.3333L3.33333 11V7C3.33333 4.93333 4.68667 3.11333 6.66667 2.52667C6.66667 2.46 6.66667 2.4 6.66667 2.33333C6.66667 1.97971 6.80714 1.64057 7.05719 1.39052C7.30724 1.14048 7.64638 1 8 1C8.35362 1 8.69276 1.14048 8.94281 1.39052C9.19286 1.64057 9.33333 1.97971 9.33333 2.33333C9.33333 2.4 9.33333 2.46 9.33333 2.52667C11.3133 3.11333 12.6667 4.93333 12.6667 7V11L14 12.3333ZM9.33333 13.6667C9.33333 14.0203 9.19286 14.3594 8.94281 14.6095C8.69276 14.8595 8.35362 15 8 15C7.64638 15 7.30724 14.8595 7.05719 14.6095C6.80714 14.3594 6.66667 14.0203 6.66667 13.6667",fill:"#676670"})}),(0,i.jsx)("span",{className:v().showNotificationsText,children:"Show notifications"})]}),(0,i.jsxs)("div",{className:v().buttonRow,children:[(0,i.jsx)(l.default,{type:"primary",onClick:()=>{t()},children:"Allow"}),(0,i.jsx)("button",{type:"button",className:v().disabled,children:"Block"})]})]})})},NotificationsEnabled=()=>(0,i.jsxs)("div",{children:[(0,i.jsx)(_,{level:2,children:"Notifications are enabled"}),"To disable push notifications from ",window.location.hostname.toString()," access your browser permissions for this site and turn off notifications.",(0,i.jsx)("a",{href:"https://owncast.online/docs/notifications",children:" Learn more."})]}),BrowserNotifyModal=()=>{let[e,t]=(0,s.useState)(null),r=(0,d.sJ)(p.FI),o=(0,d.sJ)(p.g1),[l,c]=(0,s.useState)(!1),u=(0,b.w)()&&"default"!==Notification.permission,{notifications:h}=o,{browser:_}=h,{publicKey:g}=_,j=_.enabled&&((0,b.w)()||(0,y.rZ)());if(u)return(0,i.jsx)(NotificationsEnabled,{});if((0,y.C9)()&&!(0,y.rZ)())return(0,i.jsx)(MobileSafariInstructions,{});let startBrowserPushRegistration=async()=>{if(!(0,b.w)()||"default"===Notification.permission){c(!0);try{let e=await registerWebPushNotifications(g);saveNotificationRegistration("BROWSER_PUSH_NOTIFICATION",e,r),t(null)}catch(e){t("Error registering for live notifications: ".concat(e.message,". Make sure you're not inside a private browser environment or have previously disabled notifications for this stream."))}c(!1)}};return"localhost"===window.location.hostname?(0,i.jsx)(NotificationsNotSupportedLocal,{}):j?(0,i.jsx)(f.SV,{fallbackRender:e=>{let{error:t,resetErrorBoundary:r}=e;return(0,i.jsx)(w.A,{componentName:"BrowserNotifyModal",message:t.message,retryFunction:r})},children:(0,i.jsxs)(a.default,{spinning:l,children:[(0,i.jsxs)(n.Z,{className:v().description,children:["Get notified right in the browser each time this stream goes live.",(0,i.jsx)("a",{href:"https://owncast.online/docs/notifications/#browser-notifications",children:"Learn more"}),"\xa0 about Owncast browser notifications."]}),(0,i.jsx)(n.Z,{children:e}),(0,i.jsx)(PermissionPopupPreview,{start:()=>startBrowserPushRegistration()})]})}):(0,i.jsx)(NotificationsNotSupported,{})}},28198:function(e){e.exports={description:"BrowserNotifyModal_description__G5jk5",pushPreview:"BrowserNotifyModal_pushPreview__RuEzl",inner:"BrowserNotifyModal_inner__iC07B",title:"BrowserNotifyModal_title__L6D4G",permissionLine:"BrowserNotifyModal_permissionLine__C7NWu",bell:"BrowserNotifyModal_bell__7LVGs",buttonRow:"BrowserNotifyModal_buttonRow__XcR9z",disabled:"BrowserNotifyModal_disabled__yqYtE"}}}]);