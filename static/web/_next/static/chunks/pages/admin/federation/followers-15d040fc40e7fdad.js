(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2476],{63606:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(1413),a=n(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},o=n(42135),l=function(e,t){return a.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="CheckOutlined";var c=a.forwardRef(l)},81643:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=function(e){return e?"function"==typeof e?e():e:null}},57838:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(97685),a=n(67294);function i(){var e=a.useReducer(function(e){return e+1},0);return(0,r.Z)(e,2)[1]}},24093:function(e,t,n){"use strict";n.d(t,{C:function(){return k}});var r=n(87462),a=n(4942),i=n(71002),o=n(97685),l=n(94184),c=n.n(l),s=n(48555),u=n(42550),d=n(67294),f=n(53124),m=n(25378),p=n(24308),h=d.createContext("default"),g=function(e){var t=e.children,n=e.size;return d.createElement(h.Consumer,null,function(e){return d.createElement(h.Provider,{value:n||e},t)})},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},v=d.forwardRef(function(e,t){var n,l,g,v=d.useContext(h),x=d.useState(1),w=(0,o.Z)(x,2),Z=w[0],k=w[1],b=d.useState(!1),j=(0,o.Z)(b,2),E=j[0],C=j[1],S=d.useState(!0),O=(0,o.Z)(S,2),P=O[0],D=O[1],_=d.useRef(null),N=d.useRef(null),T=(0,u.sQ)(t,_),z=d.useContext(f.E_).getPrefixCls,I=function(){if(N.current&&_.current){var t=N.current.offsetWidth,n=_.current.offsetWidth;if(0!==t&&0!==n){var r=e.gap,a=void 0===r?4:r;2*a<n&&k(n-2*a<t?(n-2*a)/t:1)}}};d.useEffect(function(){C(!0)},[]),d.useEffect(function(){D(!0),k(1)},[e.src]),d.useEffect(function(){I()},[e.gap]);var R=e.prefixCls,F=e.shape,Q=void 0===F?"circle":F,A=e.size,M=void 0===A?"default":A,L=e.src,q=e.srcSet,H=e.icon,G=e.className,K=e.alt,B=e.draggable,W=e.children,X=e.crossOrigin,Y=y(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),V="default"===M?v:M,U=Object.keys("object"===(0,i.Z)(V)&&V||{}).some(function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)}),$=(0,m.Z)(U),J=d.useMemo(function(){if("object"!==(0,i.Z)(V))return{};var e=V[p.c4.find(function(e){return $[e]})];return e?{width:e,height:e,lineHeight:"".concat(e,"px"),fontSize:H?e/2:18}:{}},[$,V]),ee=z("avatar",R),et=c()((n={},(0,a.Z)(n,"".concat(ee,"-lg"),"large"===V),(0,a.Z)(n,"".concat(ee,"-sm"),"small"===V),n)),en=d.isValidElement(L),er=c()(ee,et,(l={},(0,a.Z)(l,"".concat(ee,"-").concat(Q),!!Q),(0,a.Z)(l,"".concat(ee,"-image"),en||L&&P),(0,a.Z)(l,"".concat(ee,"-icon"),!!H),l),G),ea="number"==typeof V?{width:V,height:V,lineHeight:"".concat(V,"px"),fontSize:H?V/2:18}:{};if("string"==typeof L&&P)g=d.createElement("img",{src:L,draggable:B,srcSet:q,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&D(!1)},alt:K,crossOrigin:X});else if(en)g=L;else if(H)g=H;else if(E||1!==Z){var ei="scale(".concat(Z,") translateX(-50%)"),eo="number"==typeof V?{lineHeight:"".concat(V,"px")}:{};g=d.createElement(s.default,{onResize:I},d.createElement("span",{className:"".concat(ee,"-string"),ref:N,style:(0,r.Z)((0,r.Z)({},eo),{msTransform:ei,WebkitTransform:ei,transform:ei})},W))}else g=d.createElement("span",{className:"".concat(ee,"-string"),style:{opacity:0},ref:N},W);return delete Y.onError,delete Y.gap,d.createElement("span",(0,r.Z)({},Y,{style:(0,r.Z)((0,r.Z)((0,r.Z)({},ea),J),Y.style),className:er,ref:T}),g)}),x=n(50344),w=n(55241),Z=n(96159);v.Group=function(e){var t=d.useContext(f.E_),n=t.getPrefixCls,r=t.direction,i=e.prefixCls,o=e.className,l=e.maxCount,s=e.maxStyle,u=e.size,m=n("avatar-group",i),p=c()(m,(0,a.Z)({},"".concat(m,"-rtl"),"rtl"===r),void 0===o?"":o),h=e.children,y=e.maxPopoverPlacement,k=e.maxPopoverTrigger,b=(0,x.Z)(h).map(function(e,t){return(0,Z.Tm)(e,{key:"avatar-key-".concat(t)})}),j=b.length;if(l&&l<j){var E=b.slice(0,l),C=b.slice(l,j);return E.push(d.createElement(w.Z,{key:"avatar-popover-key",content:C,trigger:void 0===k?"hover":k,placement:void 0===y?"top":y,overlayClassName:"".concat(m,"-popover")},d.createElement(v,{style:s},"+".concat(j-l)))),d.createElement(g,{size:u},d.createElement("div",{className:p,style:e.style},E))}return d.createElement(g,{size:u},d.createElement("div",{className:p,style:e.style},b))};var k=v},25378:function(e,t,n){"use strict";var r=n(67294),a=n(57838),i=n(24308);t.Z=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,r.useRef)({}),n=(0,a.Z)();return(0,r.useEffect)(function(){var r=i.ZP.subscribe(function(r){t.current=r,e&&n()});return function(){return i.ZP.unsubscribe(r)}},[]),t.current}},97183:function(e,t,n){"use strict";var r=n(2897),a=n(7293),i=r.ZP;i.Header=r.h4,i.Footer=r.$_,i.Content=r.VY,i.Sider=a.Z,t.default=i},55241:function(e,t,n){"use strict";var r=n(87462),a=n(67294),i=n(53124),o=n(94199),l=n(81643),c=n(33603),s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},u=function(e){var t=e.title,n=e.content,r=e.prefixCls;return t||n?a.createElement(a.Fragment,null,t&&a.createElement("div",{className:"".concat(r,"-title")},(0,l.Z)(t)),a.createElement("div",{className:"".concat(r,"-inner-content")},(0,l.Z)(n))):null},d=a.forwardRef(function(e,t){var n=e.prefixCls,l=e.title,d=e.content,f=e._overlay,m=e.placement,p=e.trigger,h=e.mouseEnterDelay,g=e.mouseLeaveDelay,y=e.overlayStyle,v=s(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),x=a.useContext(i.E_).getPrefixCls,w=x("popover",n),Z=x();return a.createElement(o.Z,(0,r.Z)({placement:void 0===m?"top":m,trigger:void 0===p?"hover":p,mouseEnterDelay:void 0===h?.1:h,mouseLeaveDelay:void 0===g?.1:g,overlayStyle:void 0===y?{}:y},v,{prefixCls:w,ref:t,overlay:f||a.createElement(u,{prefixCls:w,title:l,content:d}),transitionName:(0,c.mL)(Z,"zoom-big",v.transitionName)}))});t.Z=d},93645:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});var r={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function a(e){return e?r[e]:r.trunc}},59910:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(19013),a=n(13882);function i(e,t){return(0,a.Z)(2,arguments),(0,r.Z)(e).getTime()-(0,r.Z)(t).getTime()}},11699:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(59910),a=n(13882),i=n(93645);function o(e,t,n){(0,a.Z)(2,arguments);var o=(0,r.Z)(e,t)/1e3;return(0,i.u)(null==n?void 0:n.roundingMethod)(o)}},89675:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/federation/followers",function(){return n(70448)}])},70448:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(85893),a=n(67294),i=n(54398),o=n(24093),l=n(71577),c=n(44526),s=n(58091),u=n(5152),d=n.n(u),f=n(38631),m=n(81453),p=n(37135),h=n(34261);let g=d()(()=>Promise.all([n.e(2074),n.e(6910)]).then(n.t.bind(n,66910,23)),{loadableGenerated:{webpack:()=>[66910]},ssr:!1}),y=d()(()=>Promise.all([n.e(2074),n.e(6139)]).then(n.t.bind(n,26139,23)),{loadableGenerated:{webpack:()=>[26139]},ssr:!1}),v=e=>{let{data:t,tableColumns:n,totalCount:a,setCurrentPage:o}=e;return(0,r.jsx)(i.Z,{dataSource:t,columns:n,size:"small",rowKey:e=>e.link,pagination:{pageSize:25,hideOnSinglePage:!0,showSizeChanger:!1,total:a},onChange:e=>{let t=e.current;o(t)}})};function x(){let[e,t]=(0,a.useState)([]),[n,u]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[x,w]=(0,a.useState)(0),[Z,k]=(0,a.useState)(0),b=(0,a.useContext)(f.a),{serverConfig:j}=b||{},{federation:E}=j,{isPrivate:C}=E,S=async()=>{try{let e="".concat(m.HP,"?offset=").concat(25*Z,"&limit=").concat(25),r=await (0,m.rQ)(e,{auth:!0}),{results:a,total:i}=r;(0,p.Qr)(a)?h([]):(w(i),h(a));let o=await (0,m.rQ)(m.E8,{auth:!0});(0,p.Qr)(o)?t([]):t(o);let l=await (0,m.rQ)(m.Y9,{auth:!0});(0,p.Qr)(n)?u([]):u(l)}catch(e){console.log("==== error",e)}};(0,a.useEffect)(()=>{S()},[]);let O=[{title:"",dataIndex:"image",key:"image",width:90,render:e=>(0,r.jsx)(o.C,{size:40,src:e||"/img/logo.svg"})},{title:"Name",dataIndex:"name",key:"name",render:(e,t)=>(0,r.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.name||t.username})},{title:"URL",dataIndex:"link",key:"link",render:(e,t)=>(0,r.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.link})}];async function P(e){try{await (0,m.rQ)(m.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!0}}),S()}catch(e){console.error(e)}}async function D(e){try{await (0,m.rQ)(m.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!1}}),S()}catch(e){console.error(e)}}let _=[...O];_.unshift({title:"Approve",dataIndex:null,key:null,render:e=>(0,r.jsx)(l.Z,{type:"primary",icon:(0,r.jsx)(g,{}),onClick:()=>{P(e)}}),width:50},{title:"Reject",dataIndex:null,key:null,render:e=>(0,r.jsx)(l.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(y,{}),onClick:()=>{D(e)}}),width:50}),_.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,s.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"});let N=[...O];N.unshift({title:"Approve",dataIndex:null,key:null,render:e=>(0,r.jsx)(l.Z,{type:"primary",icon:(0,r.jsx)(g,{}),size:"large",onClick:()=>{P(e)}}),width:50}),N.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,s.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Rejected/Blocked",dataIndex:"timestamp",key:"disabled_at",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,s.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"});let T=[...O];T.push({title:"Added",dataIndex:"timestamp",key:"timestamp",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,s.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Remove",dataIndex:null,key:null,render:e=>(0,r.jsx)(l.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(y,{}),onClick:()=>{D(e)}}),width:50});let z=(0,r.jsxs)("span",{children:["Followers ",x>0&&"(".concat(x,")")]}),I=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"The following accounts get notified when you go live or send a post."}),(0,r.jsx)(v,{data:d,tableColumns:T,totalCount:x,setCurrentPage:k})]}),R=(0,r.jsxs)("span",{children:["Requests ",e.length>0&&"(".concat(e.length,")")]}),F=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:["The following people are requesting to follow your Owncast server on the"," ",(0,r.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",target:"_blank",rel:"noopener noreferrer",children:"Fediverse"})," ","and be alerted to when you go live. Each must be approved."]}),(0,r.jsx)(i.Z,{dataSource:e,columns:_,size:"small",rowKey:e=>e.link})]}),Q=(0,r.jsxs)("span",{children:["Blocked ",n.length>0&&"(".concat(n.length,")")]}),A=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"The following people were either rejected or blocked by you. You can approve them as a follower."}),(0,r.jsx)("p",{children:(0,r.jsx)(i.Z,{dataSource:n,columns:N,size:"small",rowKey:e=>e.link})})]});return(0,r.jsx)("div",{className:"followers-section",children:(0,r.jsx)(c.Z,{defaultActiveKey:"1",items:[{label:z,key:"1",children:I},C&&{label:R,key:"2",children:F},{label:Q,key:"3",children:A}]})})}x.getLayout=function(e){return(0,r.jsx)(h.l,{page:e})}},11163:function(e,t,n){e.exports=n(96885)},79370:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(98924),a=function(e){if((0,r.Z)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some(function(e){return e in n.style})}return!1},i=function(e,t){if(!a(e))return!1;var n=document.createElement("div"),r=n.style[e];return n.style[e]=t,n.style[e]!==r};function o(e,t){return Array.isArray(e)||void 0===t?a(e):i(e,t)}}},function(e){e.O(0,[173,5874,7311,2414,4931,5402,6524,1664,9915,1382,4041,3698,3013,4398,4526,8091,4261,9774,2888,179],function(){return e(e.s=89675)}),_N_E=e.O()}]);