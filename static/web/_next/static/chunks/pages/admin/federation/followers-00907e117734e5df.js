(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2476],{63606:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(1413),a=n(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},o=n(42135),l=function(e,t){return a.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="CheckOutlined";var s=a.forwardRef(l)},97183:function(e,t,n){"use strict";var r=n(2897),a=n(7293),i=r.ZP;i.Header=r.h4,i.Footer=r.$_,i.Content=r.VY,i.Sider=a.Z,t.Z=i},93645:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});var r={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function a(e){return e?r[e]:r.trunc}},59910:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(19013),a=n(13882);function i(e,t){return(0,a.Z)(2,arguments),(0,r.Z)(e).getTime()-(0,r.Z)(t).getTime()}},11699:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(59910),a=n(13882),i=n(93645);function o(e,t,n){(0,a.Z)(2,arguments);var o=(0,r.Z)(e,t)/1e3;return(0,i.u)(null==n?void 0:n.roundingMethod)(o)}},89675:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/federation/followers",function(){return n(70448)}])},70448:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(85893),a=n(67294),i=n(54398),o=n(24093),l=n(71577),s=n(44526),d=n(58091),c=n(5152),u=n.n(c),m=n(38631),h=n(81453),f=n(37135),p=n(34261);let w=u()(()=>Promise.all([n.e(2074),n.e(6910)]).then(n.t.bind(n,66910,23)),{loadableGenerated:{webpack:()=>[66910]},ssr:!1}),g=u()(()=>Promise.all([n.e(2074),n.e(6139)]).then(n.t.bind(n,26139,23)),{loadableGenerated:{webpack:()=>[26139]},ssr:!1}),x=e=>{let{data:t,tableColumns:n,totalCount:a,setCurrentPage:o}=e;return(0,r.jsx)(i.Z,{dataSource:t,columns:n,size:"small",rowKey:e=>e.link,pagination:{pageSize:25,hideOnSinglePage:!0,showSizeChanger:!1,total:a},onChange:e=>{let t=e.current;o(t)}})};function y(){let[e,t]=(0,a.useState)([]),[n,c]=(0,a.useState)([]),[u,p]=(0,a.useState)([]),[y,k]=(0,a.useState)(0),[j,v]=(0,a.useState)(0),Z=(0,a.useContext)(m.aC),{serverConfig:b}=Z||{},{federation:S}=b,{isPrivate:T}=S,_=async()=>{try{let e="".concat(h.HP,"?offset=").concat(25*j,"&limit=").concat(25),r=await (0,h.rQ)(e,{auth:!0}),{results:a,total:i}=r;(0,f.Qr)(a)?p([]):(k(i),p(a));let o=await (0,h.rQ)(h.E8,{auth:!0});(0,f.Qr)(o)?t([]):t(o);let l=await (0,h.rQ)(h.Y9,{auth:!0});(0,f.Qr)(n)?c([]):c(l)}catch(e){console.log("==== error",e)}};(0,a.useEffect)(()=>{_()},[]);let C=[{title:"",dataIndex:"image",key:"image",width:90,render:e=>(0,r.jsx)(o.C,{size:40,src:e||"/img/logo.svg"})},{title:"Name",dataIndex:"name",key:"name",render:(e,t)=>(0,r.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.name||t.username})},{title:"URL",dataIndex:"link",key:"link",render:(e,t)=>(0,r.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.link})}];async function D(e){try{await (0,h.rQ)(h.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!0}}),_()}catch(e){console.error(e)}}async function I(e){try{await (0,h.rQ)(h.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!1}}),_()}catch(e){console.error(e)}}let P=[...C];P.unshift({title:"Approve",dataIndex:null,key:null,render:e=>(0,r.jsx)(l.Z,{type:"primary",icon:(0,r.jsx)(w,{}),onClick:()=>{D(e)}}),width:50},{title:"Reject",dataIndex:null,key:null,render:e=>(0,r.jsx)(l.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(g,{}),onClick:()=>{I(e)}}),width:50}),P.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,d.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"});let E=[...C];E.unshift({title:"Approve",dataIndex:null,key:null,render:e=>(0,r.jsx)(l.Z,{type:"primary",icon:(0,r.jsx)(w,{}),size:"large",onClick:()=>{D(e)}}),width:50}),E.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,d.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Rejected/Blocked",dataIndex:"timestamp",key:"disabled_at",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,d.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"});let F=[...C];F.push({title:"Added",dataIndex:"timestamp",key:"timestamp",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,d.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Remove",dataIndex:null,key:null,render:e=>(0,r.jsx)(l.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(g,{}),onClick:()=>{I(e)}}),width:50});let O=(0,r.jsxs)("span",{children:["Followers ",y>0&&"(".concat(y,")")]}),R=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"The following accounts get notified when you go live or send a post."}),(0,r.jsx)(x,{data:u,tableColumns:F,totalCount:y,setCurrentPage:v})]}),z=(0,r.jsxs)("span",{children:["Requests ",e.length>0&&"(".concat(e.length,")")]}),A=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:["The following people are requesting to follow your Owncast server on the"," ",(0,r.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",target:"_blank",rel:"noopener noreferrer",children:"Fediverse"})," ","and be alerted to when you go live. Each must be approved."]}),(0,r.jsx)(i.Z,{dataSource:e,columns:P,size:"small",rowKey:e=>e.link})]}),N=(0,r.jsxs)("span",{children:["Blocked ",n.length>0&&"(".concat(n.length,")")]}),Q=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"The following people were either rejected or blocked by you. You can approve them as a follower."}),(0,r.jsx)("p",{children:(0,r.jsx)(i.Z,{dataSource:n,columns:E,size:"small",rowKey:e=>e.link})})]});return(0,r.jsx)("div",{className:"followers-section",children:(0,r.jsx)(s.Z,{defaultActiveKey:"1",items:[{label:O,key:"1",children:R},T&&{label:z,key:"2",children:A},{label:N,key:"3",children:Q}]})})}y.getLayout=function(e){return(0,r.jsx)(p.l,{page:e})}},9008:function(e,t,n){e.exports=n(42636)},11163:function(e,t,n){e.exports=n(96885)},79370:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(98924),a=function(e){if((0,r.Z)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some(function(e){return e in n.style})}return!1},i=function(e,t){if(!a(e))return!1;var n=document.createElement("div"),r=n.style[e];return n.style[e]=t,n.style[e]!==r};function o(e,t){return Array.isArray(e)||void 0===t?a(e):i(e,t)}}},function(e){e.O(0,[173,5874,2184,2301,4931,5402,5257,1664,8014,9915,4041,3698,3013,4398,7940,8019,8131,4261,9774,2888,179],function(){return e(e.s=89675)}),_N_E=e.O()}]);