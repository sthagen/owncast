(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{57838:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(97685),s=n(67294);function l(){var e=s.useReducer(function(e){return e+1},0);return(0,a.Z)(e,2)[1]}},25378:function(e,t,n){"use strict";var a=n(67294),s=n(57838),l=n(24308);t.Z=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,a.useRef)({}),n=(0,s.Z)();return(0,a.useEffect)(function(){var a=l.ZP.subscribe(function(a){t.current=a,e&&n()});return function(){return l.ZP.unsubscribe(a)}},[]),t.current}},97183:function(e,t,n){"use strict";var a=n(2897),s=n(7293),l=a.ZP;l.Header=a.h4,l.Footer=a.$_,l.Content=a.VY,l.Sider=s.Z,t.default=l},13882:function(e,t,n){"use strict";function a(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return a}})},93645:function(e,t,n){"use strict";n.d(t,{u:function(){return s}});var a={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function s(e){return e?a[e]:a.trunc}},59910:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(19013),s=n(13882);function l(e,t){return(0,s.Z)(2,arguments),(0,a.Z)(e).getTime()-(0,a.Z)(t).getTime()}},11699:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(59910),s=n(13882),l=n(93645);function r(e,t,n){(0,s.Z)(2,arguments);var r=(0,a.Z)(e,t)/1e3;return(0,l.u)(null==n?void 0:n.roundingMethod)(r)}},19013:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(71002),s=n(13882);function l(e){(0,s.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,a.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},81009:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-social-items",function(){return n(25190)}])},97469:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var a=n(85893),s=n(67294),l=n(85818),r=n(71577),i=n(79531),o=n(54398),c=n(85402),u=n(5152),d=n.n(u),f=n(34041),m=n(24044);let p=e=>{let{iconList:t,selectedOption:n,onSelected:s}=e,l=""===n?null:n;return(0,a.jsxs)("div",{className:"social-dropdown-container",children:[(0,a.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,a.jsxs)("div",{className:"formfield-container",children:[(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,a.jsx)("div",{className:"input-side",children:(0,a.jsxs)(f.default,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:l,value:l,onSelect:e=>{s&&s(e)},children:[t.map(e=>{let{platform:t,icon:n,key:s}=e;return(0,a.jsxs)(f.default.Option,{className:"social-option",value:s,children:[(0,a.jsx)("span",{className:"option-icon",children:(0,a.jsx)("img",{src:n,alt:"",className:"option-icon"})}),(0,a.jsx)("span",{className:"option-label",children:t})]},"platform-".concat(s))}),(0,a.jsx)(f.default.Option,{className:"social-option",value:m.z_,children:"Other..."},"platform-".concat(m.z_))]})})]})]})};var h=n(81453),x=n(38631),j=n(53899),v=n(67032),b=n(91332),g=n(57520);let{Title:N}=l.default,w=d()(()=>Promise.all([n.e(2074),n.e(8244)]).then(n.t.bind(n,18244,23)),{loadableGenerated:{webpack:()=>[18244]},ssr:!1}),k=d()(()=>Promise.all([n.e(2074),n.e(2802)]).then(n.t.bind(n,22802,23)),{loadableGenerated:{webpack:()=>[22802]},ssr:!1}),Z=d()(()=>Promise.all([n.e(2074),n.e(7949)]).then(n.t.bind(n,77949,23)),{loadableGenerated:{webpack:()=>[77949]},ssr:!1});function y(){var e,t;let[n,l]=(0,s.useState)([]),[u,d]=(0,s.useState)([]),[f,y]=(0,s.useState)(!1),[S,_]=(0,s.useState)(!1),[E,C]=(0,s.useState)(!1),[O,P]=(0,s.useState)(-1),[T,z]=(0,s.useState)(m.wC),[I,D]=(0,s.useState)(null),H=(0,s.useContext)(x.a),{serverConfig:M,setFieldInConfigState:L}=H||{},{instanceDetails:G}=M,{socialHandles:A}=G,R=async()=>{try{let e=await (0,h.rQ)(h.$i,{auth:!1}),t=Object.keys(e).map(t=>({key:t,...e[t]}));l(t)}catch(e){console.log(e)}},U=e=>n.find(t=>t.key===e)||!1,V=""!==T.platform&&!n.find(e=>e.key===T.platform);(0,s.useEffect)(()=>{R()},[]),(0,s.useEffect)(()=>{G.socialHandles&&d(A)},[G]);let K=()=>{D(null),clearTimeout(null)},X=()=>{y(!1),P(-1),_(!1),C(!1),z({...m.wC})},Y=()=>{X()},$=(e,t)=>{z({...T,[e]:t})},q=async e=>{await (0,m.Si)({apiPath:m.c9,data:{value:e},onSuccess:()=>{L({fieldName:"socialHandles",value:e,path:"instanceDetails"}),C(!1),Y(),D((0,b.kg)(b.zv)),setTimeout(K,m.sI)},onError:e=>{D((0,b.kg)(b.Un,"There was an error: ".concat(e))),C(!1),setTimeout(K,m.sI)}})},B=e=>{let t=[...u];t.splice(e,1),q(t)},F=e=>{if(e<=0||e>=u.length)return;let t=[...u],n=t[e-1];t[e-1]=t[e],t[e]=n,q(t)},Q=e=>{if(e<0||e>=u.length-1)return;let t=[...u],n=t[e+1];t[e+1]=t[e],t[e]=n,q(t)},J=[{title:"Social Link",dataIndex:"",key:"combo",render:(e,t)=>{let{platform:n,url:s}=t,l=U(n);if(!l)return(0,a.jsx)("div",{className:"social-handle-cell",children:(0,a.jsxs)("p",{className:"option-label",children:[(0,a.jsx)("strong",{children:n}),(0,a.jsx)("span",{className:"handle-url",title:s,children:s})]})});let{icon:r,platform:i}=l;return(0,a.jsxs)("div",{className:"social-handle-cell",children:[(0,a.jsx)("span",{className:"option-icon",children:(0,a.jsx)("img",{src:r,alt:"",className:"option-icon"})}),(0,a.jsxs)("p",{className:"option-label",children:[(0,a.jsx)("strong",{children:i}),(0,a.jsx)("span",{className:"handle-url",title:s,children:s})]})]})}},{title:"",dataIndex:"",key:"edit",render:(e,t,n)=>(0,a.jsxs)("div",{className:"actions",children:[(0,a.jsx)(r.Z,{size:"small",onClick:()=>{let e=u[n];P(n),z({...e}),y(!0),U(e.platform)||_(!0)},children:"Edit"}),(0,a.jsx)(r.Z,{icon:(0,a.jsx)(k,{}),size:"small",hidden:0===n,onClick:()=>F(n)}),(0,a.jsx)(r.Z,{icon:(0,a.jsx)(w,{}),size:"small",hidden:n===u.length-1,onClick:()=>Q(n)}),(0,a.jsx)(r.Z,{className:"delete-button",icon:(0,a.jsx)(Z,{}),size:"small",onClick:()=>B(n)})]})}],W={disabled:(e=T.url,"xmpp"===(t=T.platform)?!(0,j.Kf)(e,"xmpp"):"matrix"===t?!(0,j.bu)(e):!(0,j.jv)(e))},ee=(0,a.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,a.jsx)("div",{className:"label-side"}),(0,a.jsx)("div",{className:"input-side",children:(0,a.jsx)(i.default,{placeholder:"Other platform name",defaultValue:T.platform,onChange:e=>{let{value:t}=e.target;$("platform",t)}})})]});return(0,a.jsxs)("div",{className:"social-links-edit-container",children:[(0,a.jsx)(N,{level:3,className:"section-title",children:"Your Social Handles"}),(0,a.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,a.jsx)(g.E,{status:I}),(0,a.jsx)(o.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:e=>"".concat(e.platform,"-").concat(e.url),columns:J,dataSource:u}),(0,a.jsx)(c.default,{title:"Edit Social Handle",open:f,onOk:()=>{C(!0);let e=u.length?[...u]:[];-1===O?e.push(T):e.splice(O,1,T),q(e)},onCancel:Y,confirmLoading:E,okButtonProps:W,children:(0,a.jsxs)("div",{className:"social-handle-modal-content",children:[(0,a.jsx)(p,{iconList:n,selectedOption:V?m.z_:T.platform,onSelected:e=>{e===m.z_?(_(!0),$("platform","")):(_(!1),$("platform",e))}}),S&&ee,(0,a.jsx)("br",{}),(0,a.jsx)(v.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[T.platform]||"Url to page",value:T.url,onChange:e=>{let{value:t}=e;$("url",t)},useTrim:!0,type:"url",pattern:j.ax}),(0,a.jsx)(g.E,{status:I})]})}),(0,a.jsx)("br",{}),(0,a.jsx)(r.Z,{type:"primary",onClick:()=>{X(),y(!0)},children:"Add a new social link"})]})}},25190:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(85893);n(67294);var s=n(85818),l=n(97469),r=n(34261);let{Title:i}=s.default;function o(){return(0,a.jsxs)("div",{className:"config-social-items",children:[(0,a.jsx)(i,{children:"Social Items"}),(0,a.jsx)(l.Z,{})]})}o.getLayout=function(e){return(0,a.jsx)(r.l,{page:e})}},11163:function(e,t,n){e.exports=n(96885)}},function(e){e.O(0,[173,5874,7311,2414,4931,5402,6524,1664,5348,9915,1382,4041,3698,3013,4398,4261,9774,2888,179],function(){return e(e.s=81009)}),_N_E=e.O()}]);