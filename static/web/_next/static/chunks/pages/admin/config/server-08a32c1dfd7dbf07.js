(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7722],{57096:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"}},20054:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=_interopRequireDefault(n(32615));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=a,e.exports=a},32615:function(e,t,n){"use strict";var a=n(64836),r=n(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(42122)),o=_interopRequireWildcard(n(67294)),i=a(n(57096)),s=a(n(92074));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_getRequireWildcardCache=function(e){return e?n:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=l?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}var PlusOutlined=function(e,t){return o.createElement(s.default,(0,l.default)((0,l.default)({},e),{},{ref:t,icon:i.default}))};PlusOutlined.displayName="PlusOutlined";var d=o.forwardRef(PlusOutlined);t.default=d},70502:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderPropValue=void 0,t.getRenderPropValue=function(e){return e?"function"==typeof e?e():e:null}},39715:function(e,t,n){"use strict";var a=n(75263).default,r=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Overlay=void 0;var l=r(n(10434)),o=a(n(67294)),i=r(n(65400)),s=n(41954),d=r(n(6459)),c=r(n(73625)),u=r(n(56350)),f=n(70502),h=n(31929);t.Overlay=function(e){var t=e.prefixCls,n=e.okButtonProps,a=e.cancelButtonProps,r=e.title,p=e.cancelText,m=e.okText,v=e.okType,y=e.icon,g=e.showCancel,x=void 0===g||g,b=e.close,j=e.onConfirm,C=e.onCancel,w=o.useContext(h.ConfigContext).getPrefixCls;return o.createElement(c.default,{componentName:"Popconfirm",defaultLocale:u.default.Popconfirm},function(e){return o.createElement("div",{className:"".concat(t,"-inner-content")},o.createElement("div",{className:"".concat(t,"-message")},y&&o.createElement("span",{className:"".concat(t,"-message-icon")},y),o.createElement("div",{className:"".concat(t,"-message-title")},(0,f.getRenderPropValue)(r))),o.createElement("div",{className:"".concat(t,"-buttons")},x&&o.createElement(i.default,(0,l.default)({onClick:C,size:"small"},a),null!=p?p:e.cancelText),o.createElement(d.default,{buttonProps:(0,l.default)((0,l.default)({size:"small"},(0,s.convertLegacyProps)(v)),n),actionFn:j,close:b,prefixCls:w("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!=m?m:e.okText)))})}},35297:function(e,t,n){"use strict";var a=n(64836).default,r=n(75263).default;t.Z=void 0;var l=a(n(10434)),o=a(n(27424)),i=a(n(42461)),s=a(n(93967)),d=a(n(60869)),c=a(n(27712)),u=r(n(67294)),f=n(31929),h=a(n(62443)),p=n(47419),m=n(39715),v=void 0,__rest=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},y=u.forwardRef(function(e,t){var n=e.prefixCls,a=e.placement,r=e.trigger,y=e.okType,g=e.icon,x=void 0===g?u.createElement(i.default,null):g,b=e.children,j=e.overlayClassName,C=e.onOpenChange,w=e.onVisibleChange,k=__rest(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),O=u.useContext(f.ConfigContext).getPrefixCls,P=(0,d.default)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),S=(0,o.default)(P,2),N=S[0],_=S[1],settingOpen=function(e,t){_(e,!0),null==w||w(e,t),null==C||C(e,t)},_onKeyDown=function(e){e.keyCode===c.default.ESC&&N&&settingOpen(!1,e)},E=O("popover",n),T=O("popconfirm",n),F=(0,s.default)(T,j);return u.createElement(h.default,(0,l.default)({},k,{trigger:void 0===r?"click":r,prefixCls:E,placement:void 0===a?"top":a,onOpenChange:function(t){var n=e.disabled;void 0!==n&&n||settingOpen(t)},open:N,ref:t,overlayClassName:F,_overlay:u.createElement(m.Overlay,(0,l.default)({okType:void 0===y?"primary":y,icon:x},e,{prefixCls:E,close:function(e){settingOpen(!1,e)},onConfirm:function(t){var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(v,t)},onCancel:function(t){var n;settingOpen(!1,t),null===(n=e.onCancel)||void 0===n||n.call(v,t)}}))}),(0,p.cloneElement)(b,{onKeyDown:function(e){var t,n;u.isValidElement(b)&&(null===(n=null==b?void 0:(t=b.props).onKeyDown)||void 0===n||n.call(t,e)),_onKeyDown(e)}}))});t.Z=y},62443:function(e,t,n){"use strict";var a=n(75263).default,r=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(10434)),o=a(n(67294)),i=n(70502),s=n(53683),d=n(31929),c=r(n(94055)),__rest=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},Overlay=function(e){var t=e.title,n=e.content,a=e.prefixCls;return o.createElement(o.Fragment,null,t&&o.createElement("div",{className:"".concat(a,"-title")},(0,i.getRenderPropValue)(t)),o.createElement("div",{className:"".concat(a,"-inner-content")},(0,i.getRenderPropValue)(n)))},u=o.forwardRef(function(e,t){var n=e.prefixCls,a=e.title,r=e.content,i=e._overlay,u=e.placement,f=e.trigger,h=e.mouseEnterDelay,p=e.mouseLeaveDelay,m=e.overlayStyle,v=__rest(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),y=o.useContext(d.ConfigContext).getPrefixCls,g=y("popover",n),x=y(),b=o.useMemo(function(){return i||(a||r?o.createElement(Overlay,{prefixCls:g,title:a,content:r}):null)},[i,a,r,g]);return o.createElement(c.default,(0,l.default)({placement:void 0===u?"top":u,trigger:void 0===f?"hover":f,mouseEnterDelay:void 0===h?.1:h,mouseLeaveDelay:void 0===p?.1:p,overlayStyle:void 0===m?{}:m},v,{prefixCls:g,ref:t,overlay:b,transitionName:(0,s.getTransitionName)(x,"zoom-big",v.transitionName)}))});t.default=u},42698:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(){return null}},1286:function(e,t,n){"use strict";var a=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=useAnimateConfig;var r=a(n(18698)),l=a(n(10434)),o=n(53683),i={motionAppear:!1,motionEnter:!0,motionLeave:!0};function useAnimateConfig(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{inkBar:!0,tabPane:!1};return(t=!1===n?{inkBar:!1,tabPane:!1}:!0===n?{inkBar:!0,tabPane:!0}:(0,l.default)({inkBar:!0},"object"===(0,r.default)(n)?n:{})).tabPane&&(t.tabPaneMotion=(0,l.default)((0,l.default)({},i),{motionName:(0,o.getTransitionName)(e,"switch")})),t}},47397:function(e,t,n){"use strict";var a=n(75263).default,r=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=useLegacyItems;var l=r(n(10434)),o=a(n(67294)),i=r(n(45598));r(n(13594));var __rest=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};function filter(e){return e.filter(function(e){return e})}function useLegacyItems(e,t){return e||filter((0,i.default)(t).map(function(e){if(o.isValidElement(e)){var t=e.key,n=e.props||{},a=n.tab,r=__rest(n,["tab"]);return(0,l.default)((0,l.default)({key:String(t)},r),{label:a})}return null}))}},20838:function(e,t,n){"use strict";var a=n(75263).default,r=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(38416)),o=r(n(10434)),i=r(n(40753)),s=r(n(26937)),d=r(n(20054)),c=r(n(93967)),u=r(n(93068)),f=a(n(67294)),h=n(31929),p=r(n(3236));r(n(13594));var m=r(n(1286)),v=r(n(47397)),y=r(n(42698)),__rest=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};function Tabs(e){var t,n=e.type,a=e.className,r=e.size,y=e.onEdit,g=e.hideAdd,x=e.centered,b=e.addIcon,j=e.children,C=e.items,w=e.animated,k=__rest(e,["type","className","size","onEdit","hideAdd","centered","addIcon","children","items","animated"]),O=k.prefixCls,P=k.moreIcon,S=void 0===P?f.createElement(s.default,null):P,N=f.useContext(h.ConfigContext),_=N.getPrefixCls,E=N.direction,T=N.getPopupContainer,F=_("tabs",O);"editable-card"===n&&(t={onEdit:function(e,t){var n=t.key,a=t.event;null==y||y("add"===e?a:n,e)},removeIcon:f.createElement(i.default,null),addIcon:b||f.createElement(d.default,null),showAdd:!0!==g});var K=_(),D=(0,v.default)(C,j),R=(0,m.default)(F,w);return f.createElement(p.default.Consumer,null,function(e){var i=void 0!==r?r:e;return f.createElement(u.default,(0,o.default)({direction:E,getPopupContainer:T,moreTransitionName:"".concat(K,"-slide-up")},k,{items:D,className:(0,c.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)({},"".concat(F,"-").concat(i),i),"".concat(F,"-card"),["card","editable-card"].includes(n)),"".concat(F,"-editable-card"),"editable-card"===n),"".concat(F,"-centered"),x),a),editable:t,moreIcon:S,prefixCls:F,animated:R}))})}Tabs.TabPane=y.default,t.default=Tabs},2976:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config/server",function(){return n(7789)}])},82654:function(e,t,n){"use strict";n.d(t,{Z:function(){return ToggleSwitch}});var a=n(85893),r=n(67294),l=n(40987),o=n(75554),i=n(37383),s=n(25588),d=n(18454);let ToggleSwitch=e=>{let{apiPath:t,checked:n,reversed:c=!1,configPath:u="",disabled:f=!1,fieldName:h,label:p,tip:m,useSubmit:v,onChange:y}=e,[g,x]=(0,r.useState)(null),b=null,j=(0,r.useContext)(d.a),{setFieldInConfigState:C}=j||{},resetStates=()=>{x(null),clearTimeout(b),b=null},handleChange=async e=>{if(v){x((0,o.kg)(o.Jk));let n=c?!e:e;await (0,s.Si)({apiPath:t,data:{value:n},onSuccess:()=>{C({fieldName:h,value:n,path:u}),x((0,o.kg)(o.zv))},onError:e=>{x((0,o.kg)(o.Un,"There was an error: ".concat(e)))}}),b=setTimeout(resetStates,s.sI)}y&&y(e)},w=null!==g&&g.type===o.Jk;return(0,a.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[p&&(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:p})}),(0,a.jsxs)("div",{className:"input-side",children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)(l.Z,{className:"switch field-".concat(h),loading:w,onChange:handleChange,defaultChecked:n,checked:n,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:f}),(0,a.jsx)(i.E,{status:g})]}),(0,a.jsx)("p",{className:"field-tip",children:m})]})]})};ToggleSwitch.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},7789:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return PublicFacingDetails}});var a=n(85893),r=n(67294),l=n(20838),o=n(2307),i=n(74048),s=n(65400),d=n(53740),c=n(4863),u=n(51024),f=n(97538),h=n(11187),p=n(5152),m=n.n(p),v=n(18454),y=n(92863),g=n(25588);let{Paragraph:x}=d.default,b=m()(()=>n.e(7949).then(n.t.bind(n,77949,23)),{loadableGenerated:{webpack:()=>[77949]},ssr:!1}),j=m()(()=>Promise.resolve().then(n.t.bind(n,29918,23)),{loadableGenerated:{webpack:()=>[29918]},ssr:!1}),C=m()(()=>Promise.resolve().then(n.t.bind(n,20054,23)),{loadableGenerated:{webpack:()=>[20054]},ssr:!1}),saveKeys=async(e,t)=>{try{await (0,y.rQ)(y.um,{method:"POST",auth:!0,data:{value:e}})}catch(e){console.error(e),t(e.message)}},generateRndKey=()=>{let e="",t=!1,n=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[!@#$^&*]).{8,192}$/,a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$^&*";for(;!t;){let r=Array.apply(20,Array(30)).map(()=>a.charAt(Math.floor(Math.random()*a.length))).join("");n.test(r)&&(t=!0,e=r)}return e},AddKeyForm=e=>{let{setShowAddKeyForm:t,setFieldInConfigState:n,streamKeys:l,setError:o}=e,[i,d]=(0,r.useState)(!0),[c]=f.default.useForm(),{Item:h}=f.default,p=[];(0,r.useEffect)(()=>{g.RQ.forEach(e=>{p.push(e)})},[]);let m=generateRndKey();return(0,a.jsxs)(f.default,{layout:"horizontal",autoComplete:"off",onFinish:e=>{let a=[...l,e];n({fieldName:"streamKeys",value:a}),saveKeys(a,o),t(!1)},form:c,style:{display:"flex",flexDirection:"row"},initialValues:{key:m,comment:"My new key"},children:[(0,a.jsx)(h,{style:{width:"60%",marginRight:"5px"},label:"Key",name:"key",tooltip:(0,a.jsx)("p",{children:"The key you provide your broadcasting software. Please note that the key must be a minimum of eight characters and must include at least one uppercase letter, at least one lowercase letter, at least one special character, and at least one number."}),rules:g.RQ,children:(0,a.jsx)(u.default,{placeholder:"your key",onChange:e=>{let t=e.target.value;g.Uq.test(t)?d(!0):d(!1)}})}),(0,a.jsx)(h,{style:{width:"60%",marginRight:"5px"},label:"Comment",name:"comment",tooltip:"For remembering why you added this key",children:(0,a.jsx)(u.default,{placeholder:"My OBS Key"})}),(0,a.jsx)(s.default,{type:"primary",htmlType:"submit",disabled:!i,children:"Add"})]})},AddKeyButton=e=>{let{setShowAddKeyForm:t}=e;return(0,a.jsx)(s.default,{type:"default",onClick:()=>t(!0),children:(0,a.jsx)(C,{})})},copyText=e=>{navigator.clipboard.writeText(e).then(()=>h.default.success("Copied to clipboard")).catch(()=>h.default.error("Failed to copy to clipboard"))};var server_StreamKeys=()=>{let e=(0,r.useContext)(v.a),{serverConfig:t,setFieldInConfigState:n}=e||{},{streamKeys:l}=t,[d,u]=(0,r.useState)(!1),[f,h]=(0,r.useState)({}),[p,m]=(0,r.useState)(null),handleDeleteKey=e=>{let t=l.filter(t=>t!==e);n({fieldName:"streamKeys",value:t}),saveKeys(t,m)},handleToggleShowKey=e=>{h({...f,[e]:!f[e]})},y=[{title:"Key",dataIndex:"key",key:"key",render:e=>(0,a.jsxs)(i.default,{direction:"horizontal",children:[(0,a.jsx)(x,{copyable:{text:f[e]?e:"**********",onCopy:()=>copyText(e)},children:f[e]?e:"**********"}),(0,a.jsx)(s.default,{type:"link",style:{top:"-7px"},icon:(0,a.jsx)(j,{}),onClick:()=>handleToggleShowKey(e)})]})},{title:"Comment",dataIndex:"comment",key:"comment"},{title:"",key:"delete",render:e=>(0,a.jsx)(s.default,{disabled:1===l.length,onClick:()=>handleDeleteKey(e),icon:(0,a.jsx)(b,{})})}];return(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{children:"A streaming key is used with your broadcasting software to authenticate itself to Owncast. Most people will only need one. However, if you share a server with others or you want different keys for different broadcasting sources you can add more here."}),(0,a.jsx)(x,{children:"These keys are unrelated to the admin password and will not grant you access to make changes to Owncast's configuration."}),(0,a.jsxs)(x,{children:["Read more about broadcasting at"," ",(0,a.jsx)("a",{href:"https://owncast.online/docs/broadcasting/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"the documentation"}),"."]}),(0,a.jsxs)(i.default,{direction:"vertical",style:{width:"70%"},children:[p&&(0,a.jsx)(c.default,{type:"error",message:"Saving Keys Error",description:p}),0===l.length&&(0,a.jsx)(c.default,{message:"No stream keys!",description:"You will not be able to stream until you create at least one stream key and add it to your broadcasting software.",type:"error"}),(0,a.jsx)(o.Z,{rowKey:"key",columns:y,dataSource:l,pagination:!1,footer:()=>d?(0,a.jsx)(AddKeyForm,{setShowAddKeyForm:u,streamKeys:l,setFieldInConfigState:n,setError:m}):(0,a.jsx)(AddKeyButton,{setShowAddKeyForm:u})}),(0,a.jsx)("br",{})]})]})},w=n(68469),k=n(5751),O=n(50650),P=n(88880),S=n(35297),N=n(75554),_=n(37383);let ResetYP=()=>{let{setMessage:e}=(0,r.useContext)(P.k),[t,n]=(0,r.useState)(null),resetStates=()=>{n(null),clearTimeout(null)},resetDirectoryRegistration=async()=>{n((0,N.kg)(N.Jk));try{await (0,y.rQ)(y.UJ),e(""),n((0,N.kg)(N.zv)),setTimeout(resetStates,g.sI)}catch(e){n((0,N.kg)(N.Un,"There was an error: ".concat(e))),setTimeout(resetStates,g.sI)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default.Title,{level:3,className:"section-title",children:"Reset Directory"}),(0,a.jsx)("p",{className:"description",children:'If you are experiencing issues with your listing on the Owncast Directory and were asked to "reset" your connection to the service, you can do that here. The next time you go live it will try and re-register your server with the directory from scratch.'}),(0,a.jsx)(S.Z,{placement:"topLeft",title:"Are you sure you want to reset your connection to the Owncast directory?",onConfirm:resetDirectoryRegistration,okText:"Yes",cancelText:"No",children:(0,a.jsx)(s.default,{type:"primary",children:"Reset Directory Connection"})}),(0,a.jsx)("p",{children:(0,a.jsx)(_.E,{status:t})})]})},{Panel:E}=w.default;function EditInstanceDetails(){let[e,t]=(0,r.useState)(null),n=(0,r.useContext)(v.a),{setMessage:l}=(0,r.useContext)(P.k),{serverConfig:o}=n||{},{adminPassword:i,ffmpegPath:s,rtmpServerPort:c,webServerPort:u,yp:f,socketHostOverride:h,videoServingEndpoint:p}=o;if((0,r.useEffect)(()=>{t({adminPassword:i,ffmpegPath:s,rtmpServerPort:c,webServerPort:u,socketHostOverride:h,videoServingEndpoint:p})},[o]),!e)return null;let handleFieldChange=n=>{let{fieldName:a,value:r}=n;t({...e,[a]:r})},showConfigurationRestartMessage=()=>{l("Updating server settings requires a restart of your Owncast server.")};return(0,a.jsxs)("div",{className:"edit-server-details-container",children:[(0,a.jsx)("div",{className:"field-container field-streamkey-container",children:(0,a.jsx)("div",{className:"left-side",children:(0,a.jsx)(O.$7,{fieldName:"adminPassword",...g.tQ,value:e.adminPassword,initialValue:i,type:k.A8,onChange:handleFieldChange,onSubmit:()=>{l("Changing your password will log you out of the admin. You may want to refresh the page to force yourself to log back in if not prompted.")}})})}),(0,a.jsx)(O.$7,{fieldName:"ffmpegPath",...g.KB,value:e.ffmpegPath,initialValue:s,onChange:handleFieldChange,onSubmit:()=>{n.online&&l("The updated ffmpeg path will be used when starting your next live stream.")}}),(0,a.jsx)(O.$7,{fieldName:"webServerPort",...g.rE,value:e.webServerPort,initialValue:u,type:k.mG,onChange:handleFieldChange,onSubmit:showConfigurationRestartMessage}),(0,a.jsx)(O.$7,{fieldName:"rtmpServerPort",...g.lT,value:e.rtmpServerPort,initialValue:c,type:k.mG,onChange:handleFieldChange,onSubmit:showConfigurationRestartMessage}),(0,a.jsx)(w.default,{className:"advanced-settings",children:(0,a.jsxs)(E,{header:"Advanced Settings",children:[(0,a.jsx)(d.default.Paragraph,{children:"If you have a CDN in front of your entire Owncast instance, specify your origin server here for the websocket to connect to. Most people will never need to set this."}),(0,a.jsx)(O.$7,{fieldName:"socketHostOverride",...g.ME,value:e.socketHostOverride,initialValue:h||"",type:k.xA,onChange:handleFieldChange}),(0,a.jsx)(O.$7,{fieldName:"videoServingEndpoint",...g.jU,value:e.videoServingEndpoint,initialValue:p||"",type:k.xA,onChange:handleFieldChange}),f.enabled&&(0,a.jsx)(ResetYP,{})]},"1")})]})}function ConfigServerDetails(){return(0,a.jsxs)("div",{className:"config-server-details-form",children:[(0,a.jsx)("p",{className:"description",children:"You should change your admin password from the default and keep it safe. For most people it's likely the other settings will not need to be changed."}),(0,a.jsx)("div",{className:"form-module config-server-details-container",children:(0,a.jsx)(EditInstanceDetails,{})})]})}var T=n(93967),F=n.n(T),K=n(89105),D=n(82654);let{Panel:R}=w.default;function checkSaveable(e,t){let{endpoint:n,accessKey:a,secret:r,bucket:l,region:o,enabled:i,acl:s,forcePathStyle:d,pathPrefix:c}=e;if(i){if(n&&(0,K.jv)(n)&&a&&r&&l&&o&&(i!==t.enabled||n!==t.endpoint||a!==t.accessKey||r!==t.secret||l!==t.bucket||o!==t.region||c!==t.pathPrefix||!t.acl&&""!==s||t.acl&&s!==t.acl||d!==t.forcePathStyle))return!0}else if(i!==t.enabled)return!0;return!1}function EditStorage(){let[e,t]=(0,r.useState)(null),[n,l]=(0,r.useState)(null),[o,i]=(0,r.useState)(!1),d=(0,r.useContext)(v.a),{serverConfig:c,setFieldInConfigState:u}=d||{},{setMessage:f}=(0,r.useContext)(P.k),{s3:h}=c,{accessKey:p="",acl:m="",bucket:y="",enabled:x=!1,endpoint:b="",region:j="",secret:C="",pathPrefix:O="",forcePathStyle:S=!1}=h;if((0,r.useEffect)(()=>{t({accessKey:p,acl:m,bucket:y,enabled:x,endpoint:b,region:j,secret:C,pathPrefix:O,forcePathStyle:S}),i(x)},[h]),!e)return null;let resetStates=()=>{l(null),clearTimeout(null)},handleFieldChange=n=>{let{fieldName:a,value:r}=n;t({...e,[a]:r})},handleSave=async()=>{if(l((0,N.kg)(N.Jk)),null==e?void 0:e.servingEndpoint){var t;e.servingEndpoint=null==e?void 0:null===(t=e.servingEndpoint)||void 0===t?void 0:t.replace(/\/+$/g,"")}await (0,g.Si)({apiPath:g.$w,data:{value:e},onSuccess:()=>{u({fieldName:"s3",value:e,path:""}),l((0,N.kg)(N.zv,"Updated.")),setTimeout(resetStates,g.sI),f("Changing your storage configuration will take place the next time you start a new stream.")},onError:e=>{l((0,N.kg)(N.Un,e)),setTimeout(resetStates,g.sI)}})},E=F()({"edit-storage-container":!0,"form-module":!0,enabled:o}),T=checkSaveable(e,h);return(0,a.jsxs)("div",{className:E,children:[(0,a.jsx)("div",{className:"enable-switch",children:(0,a.jsx)(D.Z,{apiPath:"",fieldName:"enabled",label:"Use S3 Storage Provider",checked:e.enabled,onChange:e=>{i(e),handleFieldChange({fieldName:"enabled",value:e})}})}),(0,a.jsxs)("div",{className:"form-fields",children:[(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(k.nv,{...g.zm.endpoint,value:e.endpoint,onChange:handleFieldChange})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(k.nv,{...g.zm.accessKey,value:e.accessKey,onChange:handleFieldChange})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(k.nv,{...g.zm.secret,value:e.secret,onChange:handleFieldChange})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(k.nv,{...g.zm.bucket,value:e.bucket,onChange:handleFieldChange})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(k.nv,{...g.zm.region,value:e.region,onChange:handleFieldChange})}),(0,a.jsx)(w.default,{className:"advanced-section",children:(0,a.jsxs)(R,{header:"Optional Settings",children:[(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(k.nv,{...g.zm.acl,value:e.acl,onChange:handleFieldChange})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(k.nv,{...g.zm.pathPrefix,value:e.pathPrefix,onChange:handleFieldChange})}),(0,a.jsx)("div",{className:"enable-switch",children:(0,a.jsx)(D.Z,{...g.zm.forcePathStyle,fieldName:"forcePathStyle",checked:e.forcePathStyle,onChange:e=>{handleFieldChange({fieldName:"forcePathStyle",value:e})}})})]},"1")})]}),(0,a.jsxs)("div",{className:"button-container",children:[(0,a.jsx)(s.default,{type:"primary",onClick:handleSave,disabled:!T,children:"Save"}),(0,a.jsx)(_.E,{status:n})]})]})}function ConfigStorageInfo(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"description",children:["Owncast supports optionally using external storage providers to stream your video. Learn more about this by visiting our"," ",(0,a.jsx)("a",{href:"https://owncast.online/docs/storage/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Storage Documentation"}),"."]}),(0,a.jsx)("p",{className:"description",children:"Configuring this incorrectly will likely cause your video to be unplayable. Double check the documentation for your storage provider on how to configure the bucket you created for Owncast."}),(0,a.jsx)("p",{className:"description",children:"Keep in mind this is for live streaming, not for archival, recording or VOD purposes."}),(0,a.jsx)(EditStorage,{})]})}var M=n(15578);function PublicFacingDetails(){let e=(0,r.useContext)(v.a),{serverConfig:t}=e||{},{streamKeyOverridden:n}=t;return(0,a.jsx)("div",{className:"config-public-details-page",children:(0,a.jsx)(l.default,{defaultActiveKey:"1",centered:!0,items:[{label:"Server Config",key:"1",children:(0,a.jsx)(ConfigServerDetails,{})},!n&&{label:"Stream Keys",key:"2",children:(0,a.jsx)(server_StreamKeys,{})},{label:"S3 Object Storage",key:"3",children:(0,a.jsx)(ConfigStorageInfo,{})}]})})}PublicFacingDetails.getLayout=function(e){return(0,a.jsx)(M.l,{page:e})}}},function(e){e.O(0,[5596,1130,4104,9403,1024,3942,971,6697,1664,1749,1700,2122,7752,5891,2891,4749,6627,8966,3068,4938,8469,5578,9774,2888,179],function(){return e(e.s=2976)}),_N_E=e.O()}]);