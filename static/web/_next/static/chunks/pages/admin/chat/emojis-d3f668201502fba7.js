(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6559],{70502:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderPropValue=void 0,t.getRenderPropValue=function(e){return e?"function"==typeof e?e():e:null}},27847:function(e,t,n){"use strict";var r=n(75263).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SizeContextProvider=void 0;var o=r(n(67294)),a=o.createContext("default");t.SizeContextProvider=function(e){var t=e.children,n=e.size;return o.createElement(a.Consumer,null,function(e){return o.createElement(a.Provider,{value:n||e},t)})},t.default=a},71511:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434)),l=o(n(38416)),i=o(n(18698)),s=o(n(27424)),u=o(n(94184)),c=o(n(48555)),f=n(75531),d=r(n(67294)),p=n(31929),m=o(n(60872)),v=n(67046);o(n(13594));var g=o(n(27847)),__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},y=d.forwardRef(function(e,t){var n,r,o,y=d.useContext(g.default),h=d.useState(1),b=(0,s.default)(h,2),j=b[0],w=b[1],x=d.useState(!1),E=(0,s.default)(x,2),O=E[0],P=E[1],C=d.useState(!0),S=(0,s.default)(C,2),_=S[0],N=S[1],k=d.useRef(null),R=d.useRef(null),M=(0,f.composeRef)(t,k),D=d.useContext(p.ConfigContext).getPrefixCls,setScaleParam=function(){if(R.current&&k.current){var t=R.current.offsetWidth,n=k.current.offsetWidth;if(0!==t&&0!==n){var r=e.gap,o=void 0===r?4:r;2*o<n&&w(n-2*o<t?(n-2*o)/t:1)}}};d.useEffect(function(){P(!0)},[]),d.useEffect(function(){N(!0),w(1)},[e.src]),d.useEffect(function(){setScaleParam()},[e.gap]);var T=e.prefixCls,Z=e.shape,A=void 0===Z?"circle":Z,z=e.size,B=void 0===z?"default":z,F=e.src,L=e.srcSet,V=e.icon,I=e.className,U=e.alt,W=e.draggable,q=e.children,H=e.crossOrigin,G=__rest(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),K="default"===B?y:B,Q=Object.keys("object"===(0,i.default)(K)&&K||{}).some(function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)}),X=(0,m.default)(Q),J=d.useMemo(function(){if("object"!==(0,i.default)(K))return{};var e=K[v.responsiveArray.find(function(e){return X[e]})];return e?{width:e,height:e,lineHeight:"".concat(e,"px"),fontSize:V?e/2:18}:{}},[X,K]),Y=D("avatar",T),$=(0,u.default)((n={},(0,l.default)(n,"".concat(Y,"-lg"),"large"===K),(0,l.default)(n,"".concat(Y,"-sm"),"small"===K),n)),ee=d.isValidElement(F),et=(0,u.default)(Y,$,(r={},(0,l.default)(r,"".concat(Y,"-").concat(A),!!A),(0,l.default)(r,"".concat(Y,"-image"),ee||F&&_),(0,l.default)(r,"".concat(Y,"-icon"),!!V),r),I),en="number"==typeof K?{width:K,height:K,lineHeight:"".concat(K,"px"),fontSize:V?K/2:18}:{};if("string"==typeof F&&_)o=d.createElement("img",{src:F,draggable:W,srcSet:L,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&N(!1)},alt:U,crossOrigin:H});else if(ee)o=F;else if(V)o=V;else if(O||1!==j){var er="scale(".concat(j,") translateX(-50%)"),eo="number"==typeof K?{lineHeight:"".concat(K,"px")}:{};o=d.createElement(c.default,{onResize:setScaleParam},d.createElement("span",{className:"".concat(Y,"-string"),ref:R,style:(0,a.default)((0,a.default)({},eo),{msTransform:er,WebkitTransform:er,transform:er})},q))}else o=d.createElement("span",{className:"".concat(Y,"-string"),style:{opacity:0},ref:R},q);return delete G.onError,delete G.gap,d.createElement("span",(0,a.default)({},G,{style:(0,a.default)((0,a.default)((0,a.default)({},en),J),G.style),className:et,ref:M}),o)});t.default=y},51289:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(38416)),l=o(n(94184)),i=o(n(45598)),s=r(n(67294)),u=n(31929),c=o(n(62443)),f=n(47419),d=o(n(71511)),p=n(27847);t.default=function(e){var t=s.useContext(u.ConfigContext),n=t.getPrefixCls,r=t.direction,o=e.prefixCls,m=e.className,v=e.maxCount,g=e.maxStyle,y=e.size,h=n("avatar-group",o),b=(0,l.default)(h,(0,a.default)({},"".concat(h,"-rtl"),"rtl"===r),void 0===m?"":m),j=e.children,w=e.maxPopoverPlacement,x=e.maxPopoverTrigger,E=(0,i.default)(j).map(function(e,t){return(0,f.cloneElement)(e,{key:"avatar-key-".concat(t)})}),O=E.length;if(v&&v<O){var P=E.slice(0,v),C=E.slice(v,O);return P.push(s.createElement(c.default,{key:"avatar-popover-key",content:C,trigger:void 0===x?"hover":x,placement:void 0===w?"top":w,overlayClassName:"".concat(h,"-popover")},s.createElement(d.default,{style:g},"+".concat(O-v)))),s.createElement(p.SizeContextProvider,{size:y},s.createElement("div",{className:b,style:e.style},P))}return s.createElement(p.SizeContextProvider,{size:y},s.createElement("div",{className:b,style:e.style},E))}},84960:function(e,t,n){"use strict";var r=n(64836).default;t.ZP=void 0;var o=r(n(71511)),a=r(n(51289)),l=o.default;l.Group=a.default,t.ZP=l},62443:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434)),l=r(n(67294)),i=n(70502),s=n(53683),u=n(31929),c=o(n(94055)),__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Overlay=function(e){var t=e.title,n=e.content,r=e.prefixCls;return l.createElement(l.Fragment,null,t&&l.createElement("div",{className:"".concat(r,"-title")},(0,i.getRenderPropValue)(t)),l.createElement("div",{className:"".concat(r,"-inner-content")},(0,i.getRenderPropValue)(n)))},f=l.forwardRef(function(e,t){var n=e.prefixCls,r=e.title,o=e.content,i=e._overlay,f=e.placement,d=e.trigger,p=e.mouseEnterDelay,m=e.mouseLeaveDelay,v=e.overlayStyle,g=__rest(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),y=l.useContext(u.ConfigContext).getPrefixCls,h=y("popover",n),b=y(),j=l.useMemo(function(){return i||(r||o?l.createElement(Overlay,{prefixCls:h,title:r,content:o}):null)},[i,r,o,h]);return l.createElement(c.default,(0,a.default)({placement:void 0===f?"top":f,trigger:void 0===d?"hover":d,mouseEnterDelay:void 0===p?.1:p,mouseLeaveDelay:void 0===m?.1:m,overlayStyle:void 0===v?{}:v},g,{prefixCls:h,ref:t,overlay:j,transitionName:(0,s.getTransitionName)(b,"zoom-big",g.transitionName)}))});t.default=f},89277:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434));o(n(18698));var l=r(n(67294));o(n(13594));var i=o(n(28460)),__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},s=l.forwardRef(function(e,t){var n=e.ellipsis,r=e.rel,o=__rest(e,["ellipsis","rel"]),s=(0,a.default)((0,a.default)({},o),{rel:void 0===r&&"_blank"===o.target?"noopener noreferrer":r});return delete s.navigate,l.createElement(i.default,(0,a.default)({},s,{ref:t,ellipsis:!!n,component:"a"}))});t.default=s},21987:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434)),l=r(n(67294)),i=o(n(28460)),s=l.forwardRef(function(e,t){return l.createElement(i.default,(0,a.default)({ref:t},e,{component:"div"}))});t.default=s},15394:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434)),l=o(n(18698)),i=o(n(18475)),s=r(n(67294));o(n(13594));var u=o(n(28460)),__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},c=s.forwardRef(function(e,t){var n=e.ellipsis,r=__rest(e,["ellipsis"]),o=s.useMemo(function(){return n&&"object"===(0,l.default)(n)?(0,i.default)(n,["expandable","rows"]):n},[n]);return s.createElement(u.default,(0,a.default)({ref:t},r,{ellipsis:o,component:"span"}))});t.default=c},53740:function(e,t,n){"use strict";var r=n(64836).default;t.default=void 0;var o=r(n(89277)),a=r(n(21987)),l=r(n(15394)),i=r(n(34528)),s=r(n(89652)).default;s.Text=l.default,s.Link=o.default,s.Title=i.default,s.Paragraph=a.default,t.default=s},13882:function(e,t,n){"use strict";function requiredArgs(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return requiredArgs}})},19013:function(e,t,n){"use strict";n.d(t,{Z:function(){return toDate}});var r=n(71002),o=n(13882);function toDate(e){(0,o.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,r.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},10887:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/chat/emojis",function(){return n(12188)}])},12188:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(84960),a=n(65400),l=n(70302),i=n(5789),s=n(55673),u=n(94055),c=n(53740),f=n(28465),d=n(67294),p=n(5152),m=n.n(p),v=n(37383),g=n(92863),y=n(56546),h=n(75554),b=n(25588),j=n(15578);let{Meta:w}=l.default,x=m()(()=>Promise.resolve().then(n.t.bind(n,40753,23)),{loadableGenerated:{webpack:()=>[40753]},ssr:!1}),{Title:E,Paragraph:O}=c.default,Emoji=()=>{let[e,t]=(0,d.useState)([]),[n,c]=(0,d.useState)(!1),[p,m]=(0,d.useState)(null),[j,P]=(0,d.useState)(null),C=null,resetStates=()=>{m(null),clearTimeout(C),C=null};async function getEmojis(){c(!0);try{let e=await (0,g.rQ)("/api/emoji");t(e)}catch(e){console.error("error fetching emojis",e)}c(!1)}async function handleDelete(e){let t="/".concat(e.split("/").slice(3).join("/"));console.log(t),c(!0),m((0,h.kg)(h.Jk,"Deleting emoji..."));try{let e=await (0,g.rQ)(g.Ff,{method:"POST",data:{name:t}});if(e instanceof Error)throw e;m((0,h.kg)(h.zv,"Emoji deleted")),C=setTimeout(resetStates,b.sI)}catch(e){m((0,h.kg)(h.Un,"".concat(e))),c(!1),C=setTimeout(resetStates,b.sI)}getEmojis()}async function handleEmojiUpload(){c(!0);try{m((0,h.kg)(h.Jk,"Converting emoji..."));let e=await new Promise((e,t)=>{if(!y.dr.includes(j.type)){let e="File type is not supported: ".concat(j.type);return t(e)}(0,y.y3)(j,t=>e({name:j.name,url:t}))});m((0,h.kg)(h.Jk,"Uploading emoji..."));let t=await (0,g.rQ)(g.Qc,{method:"POST",data:{name:e.name,data:e.url}});if(t instanceof Error)throw t;m((0,h.kg)(h.zv,"Emoji uploaded successfully!")),getEmojis()}catch(e){m((0,h.kg)(h.Un,"".concat(e)))}C=setTimeout(resetStates,b.sI),c(!1)}return(0,d.useEffect)(()=>{getEmojis()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(E,{children:"Emojis"}),(0,r.jsx)(O,{children:"Here you can upload new custom emojis for usage in the chat. When uploading a new emoji, the filename without extension will be used as emoji name. Additionally, emoji names are case-insensitive. For best results, ensure all emoji have unique names."}),(0,r.jsx)("br",{}),(0,r.jsx)(f.Z,{name:"emoji",listType:"picture",className:"emoji-uploader",showUploadList:!1,accept:y.dr.join(","),beforeUpload:P,customRequest:handleEmojiUpload,disabled:n,children:(0,r.jsx)(a.default,{type:"primary",disabled:n,children:"Upload new emoji"})}),(0,r.jsx)(v.Z,{status:p}),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{children:e.map(e=>(0,r.jsx)(i.Z,{style:{padding:"10px"},children:(0,r.jsx)(l.default,{style:{width:120,marginTop:16},actions:[],children:(0,r.jsx)(w,{description:[(0,r.jsxs)("div",{style:{display:"flex",justifyItems:"center",alignItems:"center",flexDirection:"column",gap:"20px"},children:[(0,r.jsx)(u.default,{title:e.name,children:(0,r.jsx)(o.ZP,{style:{height:50,width:50},src:e.url})}),(0,r.jsx)(a.default,{size:"small",type:"ghost",title:"Delete emoji",style:{position:"absolute",right:0,top:0,height:24,width:24,border:"none",color:"gray"},onClick:()=>handleDelete(e.url),icon:(0,r.jsx)(x,{})})]})]})})},e.name))}),(0,r.jsx)("br",{})]})};Emoji.getLayout=function(e){return(0,r.jsx)(j.l,{page:e})},t.default=Emoji},56546:function(e,t,n){"use strict";n.d(t,{Z7:function(){return r},dr:function(){return o},kR:function(){return readableBytes},y3:function(){return getBase64}});let r=2097152,o=["image/png","image/jpeg","image/gif"];function getBase64(e,t){let n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.readAsDataURL(e)}function readableBytes(e){let t=Math.floor(Math.log(e)/Math.log(1024)),n=1*Number((e/Math.pow(1024,t)).toFixed(2));return"".concat(n," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}},60057:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(4942),o=n(1413),a=n(97685),l=n(45987),i=n(67294),s=n(81263),u=n(94184),c=n.n(u),f={adjustX:1,adjustY:1},d=[0,0],p={topLeft:{points:["bl","tl"],overflow:f,offset:[0,-4],targetOffset:d},topCenter:{points:["bc","tc"],overflow:f,offset:[0,-4],targetOffset:d},topRight:{points:["br","tr"],overflow:f,offset:[0,-4],targetOffset:d},bottomLeft:{points:["tl","bl"],overflow:f,offset:[0,4],targetOffset:d},bottomCenter:{points:["tc","bc"],overflow:f,offset:[0,4],targetOffset:d},bottomRight:{points:["tr","br"],overflow:f,offset:[0,4],targetOffset:d}},m=n(15105),v=n(75164),g=n(88603),y=m.Z.ESC,h=m.Z.TAB;function useAccessibility(e){var t=e.visible,n=e.setTriggerVisible,r=e.triggerRef,o=e.onVisibleChange,a=e.autoFocus,l=i.useRef(!1),handleCloseMenuAndReturnFocus=function(){if(t&&r.current){var e,a,l,i;null===(e=r.current)||void 0===e||null===(a=e.triggerRef)||void 0===a||null===(l=a.current)||void 0===l||null===(i=l.focus)||void 0===i||i.call(l),n(!1),"function"==typeof o&&o(!1)}},focusMenu=function(){var e,t,n,o,a=(0,g.tS)(null===(e=r.current)||void 0===e?void 0:null===(t=e.popupRef)||void 0===t?void 0:null===(n=t.current)||void 0===n?void 0:null===(o=n.getElement)||void 0===o?void 0:o.call(n))[0];return null!=a&&!!a.focus&&(a.focus(),l.current=!0,!0)},handleKeyDown=function(e){switch(e.keyCode){case y:handleCloseMenuAndReturnFocus();break;case h:var t=!1;l.current||(t=focusMenu()),t?e.preventDefault():handleCloseMenuAndReturnFocus()}};i.useEffect(function(){return t?(window.addEventListener("keydown",handleKeyDown),a&&(0,v.Z)(focusMenu,3),function(){window.removeEventListener("keydown",handleKeyDown),l.current=!1}):function(){l.current=!1}},[t])}var b=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function Dropdown(e,t){var n,u,f,d,m,v,g=e.arrow,y=void 0!==g&&g,h=e.prefixCls,j=void 0===h?"rc-dropdown":h,w=e.transitionName,x=e.animation,E=e.align,O=e.placement,P=e.placements,C=void 0===P?p:P,S=e.getPopupContainer,_=e.showAction,N=e.hideAction,k=e.overlayClassName,R=e.overlayStyle,M=e.visible,D=e.trigger,T=void 0===D?["hover"]:D,Z=e.autoFocus,A=(0,l.Z)(e,b),z=i.useState(),B=(0,a.Z)(z,2),F=B[0],L=B[1],V="visible"in e?M:F,I=i.useRef(null);i.useImperativeHandle(t,function(){return I.current}),useAccessibility({visible:V,setTriggerVisible:L,triggerRef:I,onVisibleChange:e.onVisibleChange,autoFocus:Z});var getOverlayElement=function(){var t=e.overlay;return"function"==typeof t?t():t},getMenuElement=function(){var e=getOverlayElement();return i.createElement(i.Fragment,null,y&&i.createElement("div",{className:"".concat(j,"-arrow")}),e)},U=N;return U||-1===T.indexOf("contextMenu")||(U=["click"]),i.createElement(s.Z,(0,o.Z)((0,o.Z)({builtinPlacements:C},A),{},{prefixCls:j,ref:I,popupClassName:c()(k,(0,r.Z)({},"".concat(j,"-show-arrow"),y)),popupStyle:R,action:T,showAction:_,hideAction:U||[],popupPlacement:void 0===O?"bottomLeft":O,popupAlign:E,popupTransitionName:w,popupAnimation:x,popupVisible:V,stretch:(u=e.minOverlayWidthMatchTrigger,f=e.alignPoint,"minOverlayWidthMatchTrigger"in e?u:!f)?"minWidth":"",popup:"function"==typeof e.overlay?getMenuElement:getMenuElement(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;L(t),"function"==typeof n&&n(t)},onPopupClick:function(t){var n=e.onOverlayClick;L(!1),n&&n(t)},getPopupContainer:S}),(m=(d=e.children).props?d.props:{},v=c()(m.className,void 0!==(n=e.openClassName)?n:"".concat(j,"-open")),V&&d?i.cloneElement(d,{className:v}):d))}var j=i.forwardRef(Dropdown)}},function(e){e.O(0,[5596,1130,4104,9403,1024,3942,971,6697,1664,1749,1700,2122,3068,6300,8531,7423,8465,5578,9774,2888,179],function(){return e(e.s=10887)}),_N_E=e.O()}]);