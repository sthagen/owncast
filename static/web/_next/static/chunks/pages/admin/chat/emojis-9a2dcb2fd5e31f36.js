(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6559],{70502:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderPropValue=void 0,t.getRenderPropValue=function(e){return e?"function"==typeof e?e():e:null}},27847:function(e,t,n){"use strict";var r=n(75263).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SizeContextProvider=void 0;var o=r(n(67294)),a=o.createContext("default");t.SizeContextProvider=function(e){var t=e.children,n=e.size;return o.createElement(a.Consumer,null,function(e){return o.createElement(a.Provider,{value:n||e},t)})},t.default=a},71511:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434)),i=o(n(38416)),l=o(n(18698)),u=o(n(27424)),s=o(n(94184)),c=o(n(48555)),f=n(75531),d=r(n(67294)),p=n(31929),m=o(n(60872)),v=n(67046);o(n(13594));var g=o(n(27847)),y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},h=d.forwardRef(function(e,t){var n,r,o,h=d.useContext(g.default),b=d.useState(1),j=(0,u.default)(b,2),w=j[0],x=j[1],O=d.useState(!1),E=(0,u.default)(O,2),P=E[0],C=E[1],S=d.useState(!0),N=(0,u.default)(S,2),k=N[0],_=N[1],R=d.useRef(null),T=d.useRef(null),Z=(0,f.composeRef)(t,R),M=d.useContext(p.ConfigContext).getPrefixCls,z=function(){if(T.current&&R.current){var t=T.current.offsetWidth,n=R.current.offsetWidth;if(0!==t&&0!==n){var r=e.gap,o=void 0===r?4:r;2*o<n&&x(n-2*o<t?(n-2*o)/t:1)}}};d.useEffect(function(){C(!0)},[]),d.useEffect(function(){_(!0),x(1)},[e.src]),d.useEffect(function(){z()},[e.gap]);var D=e.prefixCls,L=e.shape,V=void 0===L?"circle":L,A=e.size,F=void 0===A?"default":A,I=e.src,B=e.srcSet,U=e.icon,W=e.className,H=e.alt,G=e.draggable,Q=e.children,X=e.crossOrigin,q=y(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),J="default"===F?h:F,Y=Object.keys("object"===(0,l.default)(J)&&J||{}).some(function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)}),K=(0,m.default)(Y),$=d.useMemo(function(){if("object"!==(0,l.default)(J))return{};var e=J[v.responsiveArray.find(function(e){return K[e]})];return e?{width:e,height:e,lineHeight:"".concat(e,"px"),fontSize:U?e/2:18}:{}},[K,J]),ee=M("avatar",D),et=(0,s.default)((n={},(0,i.default)(n,"".concat(ee,"-lg"),"large"===J),(0,i.default)(n,"".concat(ee,"-sm"),"small"===J),n)),en=d.isValidElement(I),er=(0,s.default)(ee,et,(r={},(0,i.default)(r,"".concat(ee,"-").concat(V),!!V),(0,i.default)(r,"".concat(ee,"-image"),en||I&&k),(0,i.default)(r,"".concat(ee,"-icon"),!!U),r),W),eo="number"==typeof J?{width:J,height:J,lineHeight:"".concat(J,"px"),fontSize:U?J/2:18}:{};if("string"==typeof I&&k)o=d.createElement("img",{src:I,draggable:G,srcSet:B,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&_(!1)},alt:H,crossOrigin:X});else if(en)o=I;else if(U)o=U;else if(P||1!==w){var ea="scale(".concat(w,") translateX(-50%)"),ei="number"==typeof J?{lineHeight:"".concat(J,"px")}:{};o=d.createElement(c.default,{onResize:z},d.createElement("span",{className:"".concat(ee,"-string"),ref:T,style:(0,a.default)((0,a.default)({},ei),{msTransform:ea,WebkitTransform:ea,transform:ea})},Q))}else o=d.createElement("span",{className:"".concat(ee,"-string"),style:{opacity:0},ref:T},Q);return delete q.onError,delete q.gap,d.createElement("span",(0,a.default)({},q,{style:(0,a.default)((0,a.default)((0,a.default)({},eo),$),q.style),className:er,ref:Z}),o)});t.default=h},51289:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(38416)),i=o(n(94184)),l=o(n(45598)),u=r(n(67294)),s=n(31929),c=o(n(62443)),f=n(47419),d=o(n(71511)),p=n(27847);t.default=function(e){var t=u.useContext(s.ConfigContext),n=t.getPrefixCls,r=t.direction,o=e.prefixCls,m=e.className,v=e.maxCount,g=e.maxStyle,y=e.size,h=n("avatar-group",o),b=(0,i.default)(h,(0,a.default)({},"".concat(h,"-rtl"),"rtl"===r),void 0===m?"":m),j=e.children,w=e.maxPopoverPlacement,x=e.maxPopoverTrigger,O=(0,l.default)(j).map(function(e,t){return(0,f.cloneElement)(e,{key:"avatar-key-".concat(t)})}),E=O.length;if(v&&v<E){var P=O.slice(0,v),C=O.slice(v,E);return P.push(u.createElement(c.default,{key:"avatar-popover-key",content:C,trigger:void 0===x?"hover":x,placement:void 0===w?"top":w,overlayClassName:"".concat(h,"-popover")},u.createElement(d.default,{style:g},"+".concat(E-v)))),u.createElement(p.SizeContextProvider,{size:y},u.createElement("div",{className:b,style:e.style},P))}return u.createElement(p.SizeContextProvider,{size:y},u.createElement("div",{className:b,style:e.style},O))}},84960:function(e,t,n){"use strict";var r=n(64836).default;t.ZP=void 0;var o=r(n(71511)),a=r(n(51289)),i=o.default;i.Group=a.default,t.ZP=i},62443:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434)),i=r(n(67294)),l=n(70502),u=n(53683),s=n(31929),c=o(n(94055)),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},d=function(e){var t=e.title,n=e.content,r=e.prefixCls;return i.createElement(i.Fragment,null,t&&i.createElement("div",{className:"".concat(r,"-title")},(0,l.getRenderPropValue)(t)),i.createElement("div",{className:"".concat(r,"-inner-content")},(0,l.getRenderPropValue)(n)))},p=i.forwardRef(function(e,t){var n=e.prefixCls,r=e.title,o=e.content,l=e._overlay,p=e.placement,m=e.trigger,v=e.mouseEnterDelay,g=e.mouseLeaveDelay,y=e.overlayStyle,h=f(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),b=i.useContext(s.ConfigContext).getPrefixCls,j=b("popover",n),w=b(),x=i.useMemo(function(){return l||(r||o?i.createElement(d,{prefixCls:j,title:r,content:o}):null)},[l,r,o,j]);return i.createElement(c.default,(0,a.default)({placement:void 0===p?"top":p,trigger:void 0===m?"hover":m,mouseEnterDelay:void 0===v?.1:v,mouseLeaveDelay:void 0===g?.1:g,overlayStyle:void 0===y?{}:y},h,{prefixCls:j,ref:t,overlay:x,transitionName:(0,u.getTransitionName)(w,"zoom-big",h.transitionName)}))});t.default=p},89277:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434));o(n(18698));var i=r(n(67294));o(n(13594));var l=o(n(28460)),u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},s=i.forwardRef(function(e,t){var n=e.ellipsis,r=e.rel,o=u(e,["ellipsis","rel"]),s=(0,a.default)((0,a.default)({},o),{rel:void 0===r&&"_blank"===o.target?"noopener noreferrer":r});return delete s.navigate,i.createElement(l.default,(0,a.default)({},s,{ref:t,ellipsis:!!n,component:"a"}))});t.default=s},21987:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434)),i=r(n(67294)),l=o(n(28460)),u=i.forwardRef(function(e,t){return i.createElement(l.default,(0,a.default)({ref:t},e,{component:"div"}))});t.default=u},15394:function(e,t,n){"use strict";var r=n(75263).default,o=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(10434)),i=o(n(18698)),l=o(n(18475)),u=r(n(67294));o(n(13594));var s=o(n(28460)),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},f=u.forwardRef(function(e,t){var n=e.ellipsis,r=c(e,["ellipsis"]),o=u.useMemo(function(){return n&&"object"===(0,i.default)(n)?(0,l.default)(n,["expandable","rows"]):n},[n]);return u.createElement(s.default,(0,a.default)({ref:t},r,{ellipsis:o,component:"span"}))});t.default=f},53740:function(e,t,n){"use strict";var r=n(64836).default;t.default=void 0;var o=r(n(89277)),a=r(n(21987)),i=r(n(15394)),l=r(n(34528)),u=r(n(89652)).default;u.Text=i.default,u.Link=o.default,u.Title=l.default,u.Paragraph=a.default,t.default=u},13882:function(e,t,n){"use strict";function r(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return r}})},19013:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(71002),o=n(13882);function a(e){(0,o.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,r.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},10887:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/chat/emojis",function(){return n(16490)}])},16490:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(84960),a=n(65400),i=n(70302),l=n(5789),u=n(55673),s=n(94055),c=n(53740),f=n(28465),d=n(67294),p=n(5152),m=n.n(p),v=n(57520),g=n(81453),y=n(80693),h=n(91332),b=n(24044),j=n(34261);let{Meta:w}=i.default,x=m()(()=>Promise.resolve().then(n.t.bind(n,40753,23)),{loadableGenerated:{webpack:()=>[40753]},ssr:!1}),{Title:O,Paragraph:E}=c.default,P=()=>{let[e,t]=(0,d.useState)([]),[n,c]=(0,d.useState)(!1),[p,m]=(0,d.useState)(null),[j,P]=(0,d.useState)(null),C=null,S=()=>{m(null),clearTimeout(C),C=null};async function N(){c(!0);try{let e=await (0,g.rQ)("/api/emoji");t(e)}catch(e){console.error("error fetching emojis",e)}c(!1)}async function k(e){let t="/".concat(e.split("/").slice(3).join("/"));console.log(t),c(!0),m((0,h.kg)(h.Jk,"Deleting emoji..."));try{let e=await (0,g.rQ)(g.Ff,{method:"POST",data:{name:t}});if(e instanceof Error)throw e;m((0,h.kg)(h.zv,"Emoji deleted")),C=setTimeout(S,b.sI)}catch(e){m((0,h.kg)(h.Un,"".concat(e))),c(!1),C=setTimeout(S,b.sI)}N()}async function _(){c(!0);try{m((0,h.kg)(h.Jk,"Converting emoji..."));let e=await new Promise((e,t)=>{if(!y.dr.includes(j.type)){let e="File type is not supported: ".concat(j.type);return t(e)}(0,y.y3)(j,t=>e({name:j.name,url:t}))});m((0,h.kg)(h.Jk,"Uploading emoji..."));let t=await (0,g.rQ)(g.Qc,{method:"POST",data:{name:e.name,data:e.url}});if(t instanceof Error)throw t;m((0,h.kg)(h.zv,"Emoji uploaded successfully!")),N()}catch(e){m((0,h.kg)(h.Un,"".concat(e)))}C=setTimeout(S,b.sI),c(!1)}return(0,d.useEffect)(()=>{N()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(O,{children:"Emojis"}),(0,r.jsx)(E,{children:"Here you can upload new custom emojis for usage in the chat. When uploading a new emoji, the filename without extension will be used as emoji name. Additionally, emoji names are case-insensitive. For best results, ensure all emoji have unique names."}),(0,r.jsx)("br",{}),(0,r.jsx)(f.Z,{name:"emoji",listType:"picture",className:"emoji-uploader",showUploadList:!1,accept:y.dr.join(","),beforeUpload:P,customRequest:_,disabled:n,children:(0,r.jsx)(a.default,{type:"primary",disabled:n,children:"Upload new emoji"})}),(0,r.jsx)(v.Z,{status:p}),(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{children:e.map(e=>(0,r.jsx)(l.Z,{style:{padding:"10px"},children:(0,r.jsx)(i.default,{style:{width:120,marginTop:16},actions:[],children:(0,r.jsx)(w,{description:[(0,r.jsxs)("div",{style:{display:"flex",justifyItems:"center",alignItems:"center",flexDirection:"column",gap:"20px"},children:[(0,r.jsx)(s.default,{title:e.name,children:(0,r.jsx)(o.ZP,{style:{height:50,width:50},src:e.url})}),(0,r.jsx)(a.default,{size:"small",type:"ghost",title:"Delete emoji",style:{position:"absolute",right:0,top:0,height:24,width:24,border:"none",color:"gray"},onClick:()=>k(e.url),icon:(0,r.jsx)(x,{})})]})]})})},e.name))}),(0,r.jsx)("br",{})]})};P.getLayout=function(e){return(0,r.jsx)(j.l,{page:e})},t.default=P},80693:function(e,t,n){"use strict";n.d(t,{Z7:function(){return r},dr:function(){return o},kR:function(){return i},y3:function(){return a}});let r=2097152,o=["image/png","image/jpeg","image/gif"];function a(e,t){let n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.readAsDataURL(e)}function i(e){let t=Math.floor(Math.log(e)/Math.log(1024)),n=1*Number((e/Math.pow(1024,t)).toFixed(2));return"".concat(n," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}},60057:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(4942),o=n(1413),a=n(97685),i=n(45987),l=n(67294),u=n(81263),s=n(94184),c=n.n(s),f={adjustX:1,adjustY:1},d=[0,0],p={topLeft:{points:["bl","tl"],overflow:f,offset:[0,-4],targetOffset:d},topCenter:{points:["bc","tc"],overflow:f,offset:[0,-4],targetOffset:d},topRight:{points:["br","tr"],overflow:f,offset:[0,-4],targetOffset:d},bottomLeft:{points:["tl","bl"],overflow:f,offset:[0,4],targetOffset:d},bottomCenter:{points:["tc","bc"],overflow:f,offset:[0,4],targetOffset:d},bottomRight:{points:["tr","br"],overflow:f,offset:[0,4],targetOffset:d}},m=n(15105),v=n(75164),g=n(88603),y=m.Z.ESC,h=m.Z.TAB,b=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"],j=l.forwardRef(function(e,t){var n,s,f,d,m,j,w,x,O,E,P,C,S,N,k,_,R=e.arrow,T=void 0!==R&&R,Z=e.prefixCls,M=void 0===Z?"rc-dropdown":Z,z=e.transitionName,D=e.animation,L=e.align,V=e.placement,A=e.placements,F=e.getPopupContainer,I=e.showAction,B=e.hideAction,U=e.overlayClassName,W=e.overlayStyle,H=e.visible,G=e.trigger,Q=void 0===G?["hover"]:G,X=e.autoFocus,q=(0,i.Z)(e,b),J=l.useState(),Y=(0,a.Z)(J,2),K=Y[0],$=Y[1],ee="visible"in e?H:K,et=l.useRef(null);l.useImperativeHandle(t,function(){return et.current}),f=(s={visible:ee,setTriggerVisible:$,triggerRef:et,onVisibleChange:e.onVisibleChange,autoFocus:X}).visible,d=s.setTriggerVisible,m=s.triggerRef,j=s.onVisibleChange,w=s.autoFocus,x=l.useRef(!1),O=function(){if(f&&m.current){var e,t,n,r;null===(e=m.current)||void 0===e||null===(t=e.triggerRef)||void 0===t||null===(n=t.current)||void 0===n||null===(r=n.focus)||void 0===r||r.call(n),d(!1),"function"==typeof j&&j(!1)}},E=function(){var e,t,n,r,o=(0,g.tS)(null===(e=m.current)||void 0===e?void 0:null===(t=e.popupRef)||void 0===t?void 0:null===(n=t.current)||void 0===n?void 0:null===(r=n.getElement)||void 0===r?void 0:r.call(n))[0];return null!=o&&!!o.focus&&(o.focus(),x.current=!0,!0)},P=function(e){switch(e.keyCode){case y:O();break;case h:var t=!1;x.current||(t=E()),t?e.preventDefault():O()}},l.useEffect(function(){return f?(window.addEventListener("keydown",P),w&&(0,v.Z)(E,3),function(){window.removeEventListener("keydown",P),x.current=!1}):function(){x.current=!1}},[f]);var en=function(){var t=e.overlay;return"function"==typeof t?t():t},er=function(){var e=en();return l.createElement(l.Fragment,null,T&&l.createElement("div",{className:"".concat(M,"-arrow")}),e)},eo=B;return eo||-1===Q.indexOf("contextMenu")||(eo=["click"]),l.createElement(u.Z,(0,o.Z)((0,o.Z)({builtinPlacements:void 0===A?p:A},q),{},{prefixCls:M,ref:et,popupClassName:c()(U,(0,r.Z)({},"".concat(M,"-show-arrow"),T)),popupStyle:W,action:Q,showAction:I,hideAction:eo||[],popupPlacement:void 0===V?"bottomLeft":V,popupAlign:L,popupTransitionName:z,popupAnimation:D,popupVisible:ee,stretch:(C=e.minOverlayWidthMatchTrigger,S=e.alignPoint,"minOverlayWidthMatchTrigger"in e?C:!S)?"minWidth":"",popup:"function"==typeof e.overlay?er:er(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;$(t),"function"==typeof n&&n(t)},onPopupClick:function(t){var n=e.onOverlayClick;$(!1),n&&n(t)},getPopupContainer:F}),(k=(N=e.children).props?N.props:{},_=c()(k.className,void 0!==(n=e.openClassName)?n:"".concat(M,"-open")),ee&&N?l.cloneElement(N,{className:_}):N))})}},function(e){e.O(0,[5596,1130,4104,9403,1024,3942,971,6697,1664,1749,1700,2122,3068,6300,8531,7423,8465,4261,9774,2888,179],function(){return e(e.s=10887)}),_N_E=e.O()}]);