(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{26803:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"}},56338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l=(a=n(5661))&&a.__esModule?a:{default:a};t.default=l,e.exports=l},5661:function(e,t,n){"use strict";var a=n(64836),l=n(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(42122)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=r?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n(67294)),u=a(n(26803)),c=a(n(92074));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_getRequireWildcardCache=function(e){return e?n:t})(e)}var UpOutlined=function(e,t){return o.createElement(c.default,(0,r.default)((0,r.default)({},e),{},{ref:t,icon:u.default}))};UpOutlined.displayName="UpOutlined";var d=o.forwardRef(UpOutlined);t.default=d},8799:function(e,t,n){"use strict";var a=n(75263).default,l=n(64836).default;t.Z=void 0;var r=l(n(10434)),o=l(n(38416)),u=l(n(18698)),c=l(n(27424)),d=l(n(5085)),i=l(n(56338)),s=l(n(94184)),f=l(n(82122)),p=a(n(67294)),m=n(31929),h=l(n(93319)),v=l(n(3236)),x=n(51130),y=n(46549),b=n(47419),g=n(71434),__rest=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)0>t.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]]);return n},j=p.forwardRef(function(e,t){var n=p.useContext(m.ConfigContext),a=n.getPrefixCls,l=n.direction,j=p.useContext(v.default),w=p.useState(!1),O=(0,c.default)(w,2),C=O[0],_=O[1],E=p.useRef(null);p.useImperativeHandle(t,function(){return E.current});var S=e.className,I=e.size,k=e.disabled,N=e.prefixCls,M=e.addonBefore,P=e.addonAfter,T=e.prefix,R=e.bordered,A=void 0===R||R,L=e.readOnly,U=e.status,Z=e.controls,F=__rest(e,["className","size","disabled","prefixCls","addonBefore","addonAfter","prefix","bordered","readOnly","status","controls"]),H=a("input-number",N),q=(0,y.useCompactItemContext)(H,l),B=q.compactSize,z=q.compactItemClassnames,W=p.createElement(i.default,{className:"".concat(H,"-handler-up-inner")}),D=p.createElement(d.default,{className:"".concat(H,"-handler-down-inner")}),G="boolean"==typeof Z?Z:void 0;"object"===(0,u.default)(Z)&&(W=void 0===Z.upIcon?W:p.createElement("span",{className:"".concat(H,"-handler-up-inner")},Z.upIcon),D=void 0===Z.downIcon?D:p.createElement("span",{className:"".concat(H,"-handler-down-inner")},Z.downIcon));var X=(0,p.useContext)(x.FormItemInputContext),K=X.hasFeedback,V=X.status,Y=X.isFormItemInput,J=X.feedbackIcon,Q=(0,g.getMergedStatus)(V,U),$=B||I||j,ee=p.useContext(h.default),et=null!=k?k:ee,en=(0,s.default)((el={},(0,o.default)(el,"".concat(H,"-lg"),"large"===$),(0,o.default)(el,"".concat(H,"-sm"),"small"===$),(0,o.default)(el,"".concat(H,"-rtl"),"rtl"===l),(0,o.default)(el,"".concat(H,"-borderless"),!A),(0,o.default)(el,"".concat(H,"-in-form-item"),Y),el),(0,g.getStatusClassNames)(H,Q),z,S),ea=p.createElement(f.default,(0,r.default)({ref:E,disabled:et,className:en,upHandler:W,downHandler:D,prefixCls:H,readOnly:L,controls:G},F));if(null!=T||K){var el,er,eo=(0,s.default)("".concat(H,"-affix-wrapper"),(0,g.getStatusClassNames)("".concat(H,"-affix-wrapper"),Q,K),(er={},(0,o.default)(er,"".concat(H,"-affix-wrapper-focused"),C),(0,o.default)(er,"".concat(H,"-affix-wrapper-disabled"),e.disabled),(0,o.default)(er,"".concat(H,"-affix-wrapper-sm"),"small"===j),(0,o.default)(er,"".concat(H,"-affix-wrapper-lg"),"large"===j),(0,o.default)(er,"".concat(H,"-affix-wrapper-rtl"),"rtl"===l),(0,o.default)(er,"".concat(H,"-affix-wrapper-readonly"),L),(0,o.default)(er,"".concat(H,"-affix-wrapper-borderless"),!A),(0,o.default)(er,"".concat(S),!(M||P)&&S),er));ea=p.createElement("div",{className:eo,style:e.style,onMouseUp:function(){return E.current.focus()}},T&&p.createElement("span",{className:"".concat(H,"-prefix")},T),(0,b.cloneElement)(ea,{style:null,value:e.value,onFocus:function(t){var n;_(!0),null===(n=e.onFocus)||void 0===n||n.call(e,t)},onBlur:function(t){var n;_(!1),null===(n=e.onBlur)||void 0===n||n.call(e,t)}}),K&&p.createElement("span",{className:"".concat(H,"-suffix")},J))}if(null!=M||null!=P){var eu,ec="".concat(H,"-group"),ed="".concat(ec,"-addon"),ei=M?p.createElement("div",{className:ed},M):null,es=P?p.createElement("div",{className:ed},P):null,ef=(0,s.default)("".concat(H,"-wrapper"),ec,(0,o.default)({},"".concat(ec,"-rtl"),"rtl"===l)),ep=(0,s.default)("".concat(H,"-group-wrapper"),(eu={},(0,o.default)(eu,"".concat(H,"-group-wrapper-sm"),"small"===j),(0,o.default)(eu,"".concat(H,"-group-wrapper-lg"),"large"===j),(0,o.default)(eu,"".concat(H,"-group-wrapper-rtl"),"rtl"===l),eu),(0,g.getStatusClassNames)("".concat(H,"-group-wrapper"),Q,K),S);ea=p.createElement("div",{className:ep,style:e.style},p.createElement("div",{className:ef},ei&&p.createElement(y.NoCompactStyle,null,p.createElement(x.NoFormStyle,{status:!0,override:!0},ei)),(0,b.cloneElement)(ea,{style:null,disabled:et}),es&&p.createElement(y.NoCompactStyle,null,p.createElement(x.NoFormStyle,{status:!0,override:!0},es))))}return ea});t.Z=j},16373:function(e,t,n){"use strict";var a=n(64836).default,l=n(75263).default;t.default=void 0;var r=l(n(62704)),o=a(n(87412)),u=r.default;u.Header=r.Header,u.Footer=r.Footer,u.Content=r.Content,u.Sider=o.default,t.default=u},89277:function(e,t,n){"use strict";var a=n(75263).default,l=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(10434));l(n(18698));var o=a(n(67294));l(n(13594));var u=l(n(28460)),__rest=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)0>t.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]]);return n},c=o.forwardRef(function(e,t){var n=e.ellipsis,a=e.rel,l=__rest(e,["ellipsis","rel"]),c=(0,r.default)((0,r.default)({},l),{rel:void 0===a&&"_blank"===l.target?"noopener noreferrer":a});return delete c.navigate,o.createElement(u.default,(0,r.default)({},c,{ref:t,ellipsis:!!n,component:"a"}))});t.default=c},21987:function(e,t,n){"use strict";var a=n(75263).default,l=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(10434)),o=a(n(67294)),u=l(n(28460)),c=o.forwardRef(function(e,t){return o.createElement(u.default,(0,r.default)({ref:t},e,{component:"div"}))});t.default=c},15394:function(e,t,n){"use strict";var a=n(75263).default,l=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(10434)),o=l(n(18698)),u=l(n(18475)),c=a(n(67294));l(n(13594));var d=l(n(28460)),__rest=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)0>t.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]]);return n},i=c.forwardRef(function(e,t){var n=e.ellipsis,a=__rest(e,["ellipsis"]),l=c.useMemo(function(){return n&&"object"===(0,o.default)(n)?(0,u.default)(n,["expandable","rows"]):n},[n]);return c.createElement(d.default,(0,r.default)({ref:t},a,{ellipsis:l,component:"span"}))});t.default=i},53740:function(e,t,n){"use strict";var a=n(64836).default;t.default=void 0;var l=a(n(89277)),r=a(n(21987)),o=a(n(15394)),u=a(n(34528)),c=a(n(89652)).default;c.Text=o.default,c.Link=l.default,c.Title=u.default,c.Paragraph=r.default,t.default=c},93645:function(e,t,n){"use strict";n.d(t,{u:function(){return getRoundingMethod}});var a={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function getRoundingMethod(e){return e?a[e]:a.trunc}},59910:function(e,t,n){"use strict";n.d(t,{Z:function(){return differenceInMilliseconds}});var a=n(19013),l=n(13882);function differenceInMilliseconds(e,t){return(0,l.Z)(2,arguments),(0,a.Z)(e).getTime()-(0,a.Z)(t).getTime()}},11699:function(e,t,n){"use strict";n.d(t,{Z:function(){return differenceInSeconds}});var a=n(59910),l=n(13882),r=n(93645);function differenceInSeconds(e,t,n){(0,l.Z)(2,arguments);var o=(0,a.Z)(e,t)/1e3;return(0,r.u)(null==n?void 0:n.roundingMethod)(o)}},54005:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return n(29083)}])},29083:function(e,t,n){"use strict";n.r(t);var a=n(85893),l=n(65400),r=n(31059),o=n(97538),u=n(51024),c=n(56697),d=n(64749),i=n(74048),s=n(2307),f=n(53740),p=n(95089),m=n(58909),h=n(82261),v=n(5152),x=n.n(v),y=n(67294),b=n(37383),g=n(25588),j=n(75554),w=n(18454),O=n(89105),C=n(15578);let{Title:_,Paragraph:E}=f.default,S=x()(()=>n.e(7949).then(n.t.bind(n,77949,23)),{loadableGenerated:{webpack:()=>[77949]},ssr:!1}),I=x()(()=>Promise.resolve().then(n.t.bind(n,10775,23)),{loadableGenerated:{webpack:()=>[10775]},ssr:!1}),ActionModal=e=>{let{onOk:t,onCancel:n,open:l,action:i}=e,[s,f]=(0,y.useState)("url"),[v,x]=(0,y.useState)(""),[b,g]=(0,y.useState)(""),[j,w]=(0,y.useState)(""),[C,_]=(0,y.useState)(""),[E,S]=(0,y.useState)(""),[I,k]=(0,y.useState)(""),[N,M]=(0,y.useState)(!1);(0,y.useEffect)(()=>{var e;f(((null==i?void 0:null===(e=i.html)||void 0===e?void 0:e.length)||0)>0?"html":"url"),x((null==i?void 0:i.url)||""),g((null==i?void 0:i.html)||""),w((null==i?void 0:i.title)||""),_((null==i?void 0:i.description)||""),S((null==i?void 0:i.icon)||""),k((null==i?void 0:i.color)||""),M((null==i?void 0:i.openExternally)||!1)},[i]);let P={disabled:!("html"===s?""!==b&&""!==j:(0,O.jv)(v,["https:"])&&""!==j)};return(0,a.jsx)(c.default,{destroyOnClose:!0,title:null==i?"Create New Action":"Edit Action",open:l,onOk:function(){t(i,e.index,"html"===s?"":v,"html"===s?b:"",j,C,E,I,N),x(""),g(""),w(""),_(""),S(""),k(""),M(!1)},onCancel:n,okButtonProps:P,children:(0,a.jsxs)(o.default,{initialValues:i,children:["Add the URL for the external action you want to present."," ",(0,a.jsx)("strong",{children:"Only HTTPS URLs and embeds are supported."}),(0,a.jsx)("p",{children:(0,a.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,a.jsx)(o.default.Item,{children:(0,a.jsx)(d.default,{value:s,onChange:f,placeholder:"Select an action type",options:[{label:"Link or embed an URL",value:"url"},{label:"Custom HTML",value:"html"}]})}),"html"===s?(0,a.jsx)(o.default.Item,{name:"html",children:(0,a.jsx)(p.ZP,{value:b,placeholder:"HTML embed code (required)",theme:m.FZ,height:"200px",extensions:[(0,h.html)()],onChange:e=>{g(e)}})}):(0,a.jsx)(o.default.Item,{name:"url",children:(0,a.jsx)(u.default,{required:!0,placeholder:"https://myserver.com/action (required)",onChange:e=>x(e.currentTarget.value.trim()),type:"url",pattern:O.ax})}),(0,a.jsx)(o.default.Item,{name:"title",children:(0,a.jsx)(u.default,{value:j,required:!0,placeholder:"Your action title (required)",onChange:e=>w(e.currentTarget.value)})}),(0,a.jsx)(o.default.Item,{name:"description",children:(0,a.jsx)(u.default,{value:C,placeholder:"Optional description",onChange:e=>_(e.currentTarget.value)})}),(0,a.jsx)(o.default.Item,{name:"icon",children:(0,a.jsx)(u.default,{value:E,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:e=>S(e.currentTarget.value)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.default.Item,{name:"color",style:{marginBottom:"0px"},children:(0,a.jsx)(u.default,{type:"color",value:I,onChange:e=>k(e.currentTarget.value)})}),"Optional background color of the action button."]}),"html"===s?null:(0,a.jsx)(o.default.Item,{name:"openExternally",children:(0,a.jsx)(r.default,{checked:N,defaultChecked:N,onChange:e=>{M(e.target.checked)},children:"Open in a new tab instead of within your page."})})]})})},Actions=()=>{let e=(0,y.useContext)(w.a),{serverConfig:t,setFieldInConfigState:n}=e||{},{externalActions:r}=t,[o,u]=(0,y.useState)(null),[c,d]=(0,y.useState)(!1),[f,p]=(0,y.useState)(null),[m,h]=(0,y.useState)(null),[v,x]=(0,y.useState)(-1),resetStates=()=>{p(null),clearTimeout(null)};async function save(e){await (0,g.Si)({apiPath:g.os,data:{value:e},onSuccess:()=>{n({fieldName:"externalActions",value:e,path:""}),p((0,j.kg)(j.zv,"Updated.")),setTimeout(resetStates,g.sI)},onError:e=>{console.log(e),p((0,j.kg)(j.Un,e)),setTimeout(resetStates,g.sI)}})}async function handleDelete(e){let t=[...o];t.splice(e,1);try{u(t),save(t)}catch(e){console.error(e)}}async function handleSave(e,t,n,a,l,r,c,d,i){try{let e=[...o],s={url:n,html:a,title:l,description:r,icon:c,color:d,openExternally:i};t>=0?e[t]=s:e.push(s),u(e),await save(e)}catch(e){console.error(e)}}async function handleEdit(e,t){x(t),h(e),d(!0)}(0,y.useEffect)(()=>{u(r||[])},[r]);let O=[{title:"",key:"delete-edit",render:(e,t,n)=>(0,a.jsxs)(i.default,{size:"middle",children:[(0,a.jsx)(l.default,{onClick:()=>handleDelete(n),icon:(0,a.jsx)(S,{})}),(0,a.jsx)(l.default,{onClick:()=>handleEdit(t,n),icon:(0,a.jsx)(I,{})})]})},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL / Embed",key:"url",dataIndex:"url",render:(e,t)=>t.html?"HTML embed":t.url},{title:"Icon",dataIndex:"icon",key:"icon",render:e=>e?(0,a.jsx)("img",{style:{width:"2vw"},src:e,alt:""}):null},{title:"Color",dataIndex:"color",key:"color",render:e=>e?(0,a.jsx)("div",{style:{backgroundColor:e,height:"30px"},children:e}):null},{title:"Opens",key:"openExternally",dataIndex:"openExternally",render:(e,t)=>!e||t.html?"In the same tab":"In a new tab"}];return(0,a.jsxs)("div",{children:[(0,a.jsx)(_,{children:"External Actions"}),(0,a.jsx)(E,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,a.jsxs)(E,{children:["Read more about how to use actions, with examples, at"," ",(0,a.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,a.jsx)(s.Z,{rowKey:e=>"".concat(e.title,"-").concat(e.url),columns:O,dataSource:o,pagination:!1}),(0,a.jsx)("br",{}),(0,a.jsx)(l.default,{type:"primary",onClick:()=>{h(null),x(-1),d(!0)},children:"Create New Action"}),(0,a.jsx)(b.E,{status:f}),(0,a.jsx)(ActionModal,{action:m,index:v,open:c,onOk:(e,t,n,a,l,r,o,u,c)=>{d(!1),handleSave(e,t,n,a,l,r,o,u,c),h(null),x(-1)},onCancel:()=>{d(!1)}})]})};Actions.getLayout=function(e){return(0,a.jsx)(C.l,{page:e})},t.default=Actions},11163:function(e,t,n){e.exports=n(59974)}},function(e){e.O(0,[5762,5596,1130,4104,9403,1024,3942,971,6697,1664,1749,1700,2122,7752,5891,2891,4749,6627,8966,5056,5578,9774,2888,179],function(){return e(e.s=54005)}),_N_E=e.O()}]);