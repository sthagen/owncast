(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6109],{92794:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/viewer-info",function(){return i(65874)}])},31112:function(e,t,i){"use strict";i.d(t,{k:function(){return d}});var n=i(85893),r=i(12642),a=i(67294),s=i(71218),o=i(23148),l=i(26495),u=i(56469);function c(e){let t={};return e.forEach(e=>{let i=new Date(e.time);t[(0,r.WU)(i,"H:mma")]=e.value}),t}o.kL.register(o.uw,o.WV,o.f$,o.od,o.jn,o.Dx,o.u,o.De);let d=e=>{let{data:t,title:i,color:r,unit:o,dataCollections:d,yFlipped:f,yLogarithmic:h,minYValue:p,yStepSize:m=0}=e,g=[],v=(0,a.useRef)(null);return t&&t.length>0&&g.push({id:i,label:i,backgroundColor:r,borderColor:r,borderWidth:3,data:c(t)}),d.forEach(e=>{g.push({id:e.name,label:e.name,data:c(e.data),backgroundColor:e.color,borderColor:e.color,borderWidth:3,pointStyle:e.pointStyle||"circle",radius:e.pointRadius||1})}),(0,n.jsxs)("div",{className:"line-chart-container",children:[(0,n.jsx)(l.x1,{ref:v,data:{datasets:g},options:{responsive:!0,clip:!1,scales:{y:{type:h?"logarithmic":"linear",reverse:f,min:p,ticks:{stepSize:m},title:{display:!0,text:o}}}},height:"70vh"}),(0,n.jsx)(u.Z,{size:"small",onClick:()=>{if(v.current){let e=document.createElement("a");e.download="chart.png",e.href=v.current.canvas.toDataURL(),e.click()}},type:"ghost",icon:(0,n.jsx)(s.Z,{}),className:"download-btn"})]})};d.defaultProps={dataCollections:[],data:[],title:"",yFlipped:!1,yLogarithmic:!1}},26826:function(e,t,i){"use strict";i.d(t,{m:function(){return h}});var n=i(85893),r=i(23657),a=i(92120),s=i(75543),o=i(3816);let{Text:l}=r.default,u={title:"",value:0,prefix:null,suffix:null,color:"",progress:!1,centered:!1,formatter:null},c=e=>{let{prefix:t,value:i,suffix:r,title:a}=e;return(0,n.jsxs)("div",{children:[t,(0,n.jsx)("div",{children:(0,n.jsx)(l,{type:"secondary",children:a})}),(0,n.jsx)("div",{children:(0,n.jsxs)(l,{type:"secondary",children:[i,r||"%"]})})]})},d=e=>{let{title:t,value:i,prefix:r,suffix:s,color:o}=e,l=i>90?"red":o,u=(0,n.jsx)(c,{prefix:r,value:i,suffix:s,title:t});return(0,n.jsx)(a.Z,{type:"dashboard",percent:i,width:120,strokeColor:{"0%":o,"90%":l},format:()=>u})};d.defaultProps=u;let f=e=>{let{title:t,value:i,prefix:r,formatter:a}=e;return(0,n.jsx)(s.Z,{title:t,value:i,prefix:r,formatter:a})};f.defaultProps=u;let h=e=>{let{progress:t,centered:i}=e,r=t?d:f;return(0,n.jsx)(o.default,{type:"inner",children:(0,n.jsx)("div",{style:i?{display:"flex",alignItems:"center",justifyContent:"center"}:{},children:(0,n.jsx)(r,{...e})})})};h.defaultProps=u},3064:function(e,t,i){"use strict";let n=i(46594),r=i(88627),a=i(85408),s=i(57457);e.exports={translations:{en:n,es:r,de:a,fr:s},defaultLang:"en",useBrowserDefault:!0,languageDataStore:"query"}},23061:function(e,t,i){"use strict";var n=i(67294),r=i(64773),a=i(98947);t.Z=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,n.useRef)({}),i=(0,r.Z)();return(0,n.useEffect)(function(){var n=a.ZP.subscribe(function(n){t.current=n,e&&i()});return function(){return a.ZP.unsubscribe(n)}},[]),t.current}},65874:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Z}});var n=i(85893),r=i(67294),a=i(23657),s=i(10227),o=i(78021),l=i(1461),u=i(93879),c=i(70449),d=i(16393),f=i(6916),h=i(32532);function p(e,t,i){var n,r,a;let{years:s=0,months:o=0,weeks:l=0,days:u=0,hours:c=0,minutes:p=0,seconds:m=0}=t,g=(n=o+12*s,r=(0,h.z)(e,-n,i),a=u+7*l,(0,f.E)(r,-a,i));return(0,d.L)((null==i?void 0:i.in)||e,+g-1e3*(m+60*(p+60*c)))}var m=i(46042),g=i(5152),v=i.n(g),x=i(37039),w=i(31112),S=i(26826),b=i(27043),y=i(61913),k=i(74040);let C=e=>{let{data:t}=e;return(0,n.jsx)(b.Z,{pagination:{hideOnSinglePage:!0},className:"table-container",columns:[{title:"User Agent",dataIndex:"userAgent",key:"userAgent",render:e=>(0,k.AB)(e)},{title:"Location",dataIndex:"geo",key:"geo",render:e=>e?"".concat(e.regionName,", ").concat(e.countryCode):"-"},{title:"Watch Time",dataIndex:"firstSeen",key:"firstSeen",defaultSortOrder:"ascend",render:e=>(0,y.Q)(new Date(e)),sorter:(e,t)=>new Date(e.firstSeen).getTime()-new Date(t.firstSeen).getTime(),sortDirections:["descend","ascend"]}],dataSource:t,size:"small",rowKey:"id"})};var j=i(4481),D=i(11992),N=i(25889);let L=v()(()=>Promise.all([i.e(3247),i.e(5746)]).then(i.t.bind(i,75746,23)),{loadableGenerated:{webpack:()=>[75746]},ssr:!1}),F=v()(()=>Promise.all([i.e(3247),i.e(6681)]).then(i.t.bind(i,96681,23)),{loadableGenerated:{webpack:()=>[96681]},ssr:!1});function Z(){let e;let t=(0,r.useContext)(j.a),{t:i}=(0,x.$G)(),{online:d,broadcaster:f,viewerCount:h,overallPeakViewerCount:g,sessionPeakViewerCount:v}=t||{};f&&f.time&&(e=new Date(f.time));let b=[{title:i("Current stream"),start:e},{title:i("Last 12 hours"),start:p(new Date,{hours:12})},{title:i("Last 24 hours"),start:p(new Date,{hours:24})},{title:i("Last 7 days"),start:p(new Date,{days:7})},{title:i("Last 30 days"),start:p(new Date,{days:30})},{title:i("Last 3 months"),start:p(new Date,{months:3})},{title:i("Last 6 months"),start:p(new Date,{months:6})}],[y,k]=(0,r.useState)(!0),[N,Z]=(0,r.useState)([]),[P,O]=(0,r.useState)([]),[T,E]=(0,r.useState)(b[1]),_=async()=>{try{var e;let t="".concat(D.iV,"?windowStart=").concat((e=T.start,Math.trunc(+(0,m.Q)(e)/1e3))),i=await (0,D.rQ)(t);Z(i),k(!1)}catch(e){console.log("==== error",e)}try{let e=await (0,D.rQ)(D.a_);O(e)}catch(e){console.log("==== error",e)}};(0,r.useEffect)(()=>{let e=null;return(_(),d)?(e=setInterval(_,6e4),()=>{clearInterval(e)}):()=>[]},[d,T]);let z=e=>{let{key:t}=e;E(b[t])},A=d&&e?0:1,I=b.slice(A).map((e,t)=>({key:t+A,label:e.title,onClick:z}));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default.Title,{children:i("Viewer Info")}),(0,n.jsx)("br",{}),(0,n.jsxs)(s.Z,{gutter:[16,16],justify:"space-around",children:[d&&(0,n.jsx)(o.Z,{span:8,md:8,children:(0,n.jsx)(S.m,{title:i("Current viewers"),value:h.toString(),prefix:(0,n.jsx)(F,{})})}),(0,n.jsx)(o.Z,{md:d?8:12,children:(0,n.jsx)(S.m,{title:i(d?"Max viewers this stream":"Max viewers last stream"),value:v.toString(),prefix:(0,n.jsx)(F,{})})}),(0,n.jsx)(o.Z,{md:d?8:12,children:(0,n.jsx)(S.m,{title:i("max viewers"),value:g.toString(),prefix:(0,n.jsx)(F,{})})})]}),!N.length&&(0,n.jsx)(l.Z,{style:{marginTop:"10px"},banner:!0,message:i("Please wait"),description:i("No viewer data has been collected yet."),type:"info"}),(0,n.jsxs)(u.Z,{spinning:!N.length||y,children:[N.length>0&&(0,n.jsx)(w.k,{title:i("Viewers"),data:N,color:"#2087E2",unit:"viewers",minYValue:0,yStepSize:1}),(0,n.jsx)(c.Z,{menu:{items:I},trigger:["click"],children:(0,n.jsxs)("button",{type:"button",style:{position:"absolute",top:"5px",right:"35px",background:"transparent",border:"unset"},children:[T.title," ",(0,n.jsx)(L,{})]})}),(0,n.jsx)(C,{data:P})]})]})}Z.getLayout=function(e){return(0,n.jsx)(N.l,{page:e})}},6916:function(e,t,i){"use strict";i.d(t,{E:function(){return a}});var n=i(16393),r=i(46042);function a(e,t,i){let a=(0,r.Q)(e,null==i?void 0:i.in);return isNaN(t)?(0,n.L)((null==i?void 0:i.in)||e,NaN):(t&&a.setDate(a.getDate()+t),a)}},32532:function(e,t,i){"use strict";i.d(t,{z:function(){return a}});var n=i(16393),r=i(46042);function a(e,t,i){let a=(0,r.Q)(e,null==i?void 0:i.in);if(isNaN(t))return(0,n.L)((null==i?void 0:i.in)||e,NaN);if(!t)return a;let s=a.getDate(),o=(0,n.L)((null==i?void 0:i.in)||e,a.getTime());return(o.setMonth(a.getMonth()+t+1,0),s>=o.getDate())?o:(a.setFullYear(o.getFullYear(),o.getMonth(),s),a)}},85408:function(e){"use strict";e.exports=JSON.parse('{"Notify":"Benachrichtigen","Powered by Owncast":"Betrieben von Owncast","Documentation":"Dokumentation","Contribute":"Beitragen","Source":"Quelle","Skip to player":"Zum Spieler springen","Skip to offline message":"Zur Offline-Nachricht springen","Skip to page content":"Direkt zum Hauptinhalt","Skip to footer":"Zum Footer springen","Chat will be available when the stream is live":"Chat ist verf\xfcgbar, wenn der Stream live ist.","Chat is offline":"Chat ist offline","Stay updated!":"Bleiben Sie auf dem Laufenden Ihrer T\xe4tigkeiten!","Click and never miss future streams!":"Klicke und verpasse niemals zuk\xfcnftige Streams!","This stream is offline":"Dieser Stream ist offline.","the next time goes live":"das n\xe4chste Mal geht live","Follow":"Folgen","on the Fediverse to see the next time goes live":"on the Fediverse to see the next time goes live","Last live ago":"Zuletzt live"}')},46594:function(e){"use strict";e.exports=JSON.parse('{"Notify":"Notify","Powered by Owncast":"Powered by Owncast","Documentation":"Documentation","Contribute":"Contribute","Source":"Source","Skip to player":"Skip to player","Skip to offline message":"Skip to offline message","Skip to page content":"Skip to page content","Skip to footer":"Skip to footer","Chat will be available when the stream is live":"Chat will be available when the stream is live.","Chat is offline":"Chat is offline","Stay updated!":"Stay updated!","Click and never miss future streams!":"Click and never miss future streams!","This stream is offline":"This stream is offline.","the next time goes live":"the next time {{streamer}} goes live","Follow":"Follow","on the Fediverse to see the next time goes live":"on the Fediverse to see the next time goes live","Last live ago":"Last live {{timeAgo}} ago"}')},88627:function(e){"use strict";e.exports=JSON.parse('{"Notify":"Notificar","Powered by Owncast":"Desarrollado por Owncast","Documentation":"Documentaci\xf3n","Contribute":"Contribuir","Source":"Fuente","Skip to player":"Skip to player","Skip to offline message":"Skip to offline message","Skip to page content":"Skip to page content","Skip to footer":"Skip to footer","Chat will be available when the stream is live":"Chat will be available when the stream is live.","Chat is offline":"Chat is offline","Stay updated!":"Stay updated!","Click and never miss future streams!":"Click and never miss future streams!","This stream is offline":"This stream is offline.","the next time goes live":"the next time {{streamer}} goes live","Follow":"Follow","on the Fediverse to see the next time goes live":"on the Fediverse to see the next time goes live","Last live ago":"Last live {{timeAgo}} ago"}')},57457:function(e){"use strict";e.exports=JSON.parse('{"Notify":"Avertir","Powered by Owncast":"Propuls\xe9 par Owncast","Documentation":"Documentation","Contribute":"Contribuer","Source":"Source","Skip to player":"Passer au joueur","Skip to offline message":"Aller au message d\'absence","Skip to page content":"Aller au contenu principal","Skip to footer":"Aller au pied de page","Chat will be available when the stream is live":"Le chat sera disponible quand le direct d\xe9butera.","Chat is offline":"Le chat est hors ligne","Stay updated!":"Restez \xe0 jour\xa0!","Click and never miss future streams!":"Cliquez et ne manquez jamais les futurs diffusions !","This stream is offline":"Ce serveur est hors-ligne.","the next time goes live":"la prochaine fois que diffuse en direct","Follow":"Suivre","on the Fediverse to see the next time goes live":"sur le F\xe9diverse pour voir la prochaine fois que lance un direct","Last live ago":"Derni\xe8re diffusion il y a"}')}},function(e){e.O(0,[2196,83,1287,3800,7786,443,9904,3657,6167,2502,7528,9532,449,7043,4065,9307,2642,7039,1913,6179,297,346,5889,2888,9774,179],function(){return e(e.s=92794)}),_N_E=e.O()}]);