(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1591],{83514:function(e,n,t){"use strict";var a=t(75263).default,s=t(64836).default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=s(t(10434)),r=s(t(38416)),i=s(t(94184)),o=a(t(67294)),d=t(31929),__rest=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>n.indexOf(a)&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>n.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(t[a[s]]=e[a[s]]);return t};n.default=function(e){var n=e.prefixCls,t=e.className,a=e.checked,s=e.onChange,c=e.onClick,u=__rest(e,["prefixCls","className","checked","onChange","onClick"]),g=(0,o.useContext(d.ConfigContext).getPrefixCls)("tag",n),h=(0,i.default)(g,(0,r.default)((0,r.default)({},"".concat(g,"-checkable"),!0),"".concat(g,"-checkable-checked"),a),t);return o.createElement("span",(0,l.default)({},u,{className:h,onClick:function(e){null==s||s(!a),null==c||c(e)}}))}},59361:function(e,n,t){"use strict";var a=t(75263).default,s=t(64836).default;n.Z=void 0;var l=s(t(38416)),r=s(t(10434)),i=s(t(27424)),o=s(t(40753)),d=s(t(94184)),c=s(t(18475)),u=a(t(67294)),g=t(31929),h=t(45471),f=s(t(61539));s(t(13594));var m=s(t(83514)),__rest=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>n.indexOf(a)&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>n.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(t[a[s]]=e[a[s]]);return t},b=new RegExp("^(".concat(h.PresetColorTypes.join("|"),")(-inverse)?$")),p=new RegExp("^(".concat(h.PresetStatusColorTypes.join("|"),")$")),C=u.forwardRef(function(e,n){var t=e.prefixCls,a=e.className,s=e.style,h=e.children,m=e.icon,C=e.color,v=e.onClose,x=e.closeIcon,S=e.closable,j=void 0!==S&&S,N=__rest(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),U=u.useContext(g.ConfigContext),k=U.getPrefixCls,y=U.direction,E=u.useState(!0),w=(0,i.default)(E,2),P=w[0],O=w[1];u.useEffect(function(){"visible"in N&&O(N.visible)},[N.visible]);var isPresetColor=function(){return!!C&&(b.test(C)||p.test(C))},_=(0,r.default)({backgroundColor:C&&!isPresetColor()?C:void 0},s),D=isPresetColor(),F=k("tag",t),I=(0,d.default)(F,(0,l.default)((0,l.default)((0,l.default)((0,l.default)({},"".concat(F,"-").concat(C),D),"".concat(F,"-has-color"),C&&!D),"".concat(F,"-hidden"),!P),"".concat(F,"-rtl"),"rtl"===y),a),handleCloseClick=function(e){e.stopPropagation(),null==v||v(e),!e.defaultPrevented&&("visible"in N||O(!1))},T="onClick"in N||h&&"a"===h.type,M=(0,c.default)(N,["visible"]),Z=m||null,A=Z?u.createElement(u.Fragment,null,Z,u.createElement("span",null,h)):h,J=u.createElement("span",(0,r.default)({},M,{ref:n,className:I,style:_}),A,j?x?u.createElement("span",{className:"".concat(F,"-close-icon"),onClick:handleCloseClick},x):u.createElement(o.default,{className:"".concat(F,"-close-icon"),onClick:handleCloseClick}):null);return T?u.createElement(f.default,null,J):J});C.CheckableTag=m.default,n.Z=C},13882:function(e,n,t){"use strict";function requiredArgs(e,n){if(n.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}t.d(n,{Z:function(){return requiredArgs}})},19013:function(e,n,t){"use strict";t.d(n,{Z:function(){return toDate}});var a=t(71002),s=t(13882);function toDate(e){(0,s.Z)(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,a.Z)(e)&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):(("string"==typeof e||"[object String]"===n)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},42011:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-chat",function(){return t(21771)}])},70093:function(e,n,t){"use strict";t.d(n,{Q:function(){return c},Y:function(){return EditValueArray}});var a=t(85893),s=t(67294),l=t(53740),r=t(59361),i=t(5751),o=t(37383);let{Title:d}=l.default,c="#5a67d8",EditValueArray=e=>{let{title:n,description:t,placeholder:l,maxLength:u,values:g,handleDeleteIndex:h,handleCreateString:f,submitStatus:m,continuousStatusMessage:b}=e,[p,C]=(0,s.useState)("");return(0,a.jsxs)("div",{className:"edit-string-array-container",children:[(0,a.jsx)(d,{level:3,className:"section-title",children:n}),(0,a.jsx)("p",{className:"description",children:t}),(0,a.jsx)("div",{className:"edit-current-strings",children:null==g?void 0:g.map((e,n)=>(0,a.jsx)(r.Z,{closable:!0,onClose:()=>{h(n)},color:c,children:e},"tag-".concat(e,"-").concat(n)))}),b&&(0,a.jsx)("div",{className:"continuous-status-section",children:(0,a.jsx)(o.E,{status:b})}),(0,a.jsx)("div",{className:"add-new-string-section",children:(0,a.jsx)(i.nv,{fieldName:"string-input",value:p,onChange:e=>{let{value:n}=e;C(n)},onPressEnter:()=>{let e=p.trim();f(e),C("")},maxLength:u,placeholder:l,status:m})})]})};EditValueArray.defaultProps={maxLength:50,description:null,submitStatus:null,continuousStatusMessage:null}},82654:function(e,n,t){"use strict";t.d(n,{Z:function(){return ToggleSwitch}});var a=t(85893),s=t(67294),l=t(40987),r=t(75554),i=t(37383),o=t(25588),d=t(18454);let ToggleSwitch=e=>{let{apiPath:n,checked:t,reversed:c=!1,configPath:u="",disabled:g=!1,fieldName:h,label:f,tip:m,useSubmit:b,onChange:p}=e,[C,v]=(0,s.useState)(null),x=null,S=(0,s.useContext)(d.a),{setFieldInConfigState:j}=S||{},resetStates=()=>{v(null),clearTimeout(x),x=null},handleChange=async e=>{if(b){v((0,r.kg)(r.Jk));let t=c?!e:e;await (0,o.Si)({apiPath:n,data:{value:t},onSuccess:()=>{j({fieldName:h,value:t,path:u}),v((0,r.kg)(r.zv))},onError:e=>{v((0,r.kg)(r.Un,"There was an error: ".concat(e)))}}),x=setTimeout(resetStates,o.sI)}p&&p(e)},N=null!==C&&C.type===r.Jk;return(0,a.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[f&&(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:f})}),(0,a.jsxs)("div",{className:"input-side",children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)(l.Z,{className:"switch field-".concat(h),loading:N,onChange:handleChange,defaultChecked:t,checked:t,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:g}),(0,a.jsx)(i.E,{status:C})]}),(0,a.jsx)("p",{className:"field-tip",children:m})]})]})};ToggleSwitch.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},21771:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ConfigChat}});var a=t(85893),s=t(53740),l=t(67294),r=t(5751),i=t(50650),o=t(82654),d=t(70093),c=t(75554),u=t(25588),g=t(18454),h=t(15578);function ConfigChat(){let{Title:e}=s.default,[n,t]=(0,l.useState)(null),[h,f]=(0,l.useState)(null),[m,b]=(0,l.useState)(null),p=(0,l.useContext)(g.a),{serverConfig:C,setFieldInConfigState:v}=p||{},{chatDisabled:x,chatJoinMessagesEnabled:S,forbiddenUsernames:j,instanceDetails:N,suggestedUsernames:U,chatEstablishedUserMode:k}=C,{welcomeMessage:y}=N,handleFieldChange=e=>{let{fieldName:a,value:s}=e;t({...n,[a]:s})};function handleChatDisableChange(e){handleFieldChange({fieldName:"chatDisabled",value:!e})}function handleChatJoinMessagesEnabledChange(e){handleFieldChange({fieldName:"chatJoinMessagesEnabled",value:e})}function handleEstablishedUserModeChange(e){handleFieldChange({fieldName:"chatEstablishedUserMode",value:e})}function resetForbiddenUsernameState(){f(null)}function saveForbiddenUsernames(){(0,u.Si)({apiPath:u.CJ,data:{value:n.forbiddenUsernames},onSuccess:()=>{v({fieldName:"forbiddenUsernames",value:n.forbiddenUsernames}),f((0,c.kg)(c.zv)),setTimeout(resetForbiddenUsernameState,u.sI)},onError:e=>{f((0,c.kg)(c.Un,e)),setTimeout(resetForbiddenUsernameState,u.sI)}})}function handleDeleteForbiddenUsernameIndex(e){n.forbiddenUsernames.splice(e,1),saveForbiddenUsernames()}function handleCreateForbiddenUsername(e){n.forbiddenUsernames.push(e),handleFieldChange({fieldName:"forbiddenUsernames",value:n.forbiddenUsernames}),saveForbiddenUsernames()}function resetSuggestedUsernameState(){b(null)}function saveSuggestedUsernames(){(0,u.Si)({apiPath:u.cf,data:{value:n.suggestedUsernames},onSuccess:()=>{v({fieldName:"suggestedUsernames",value:n.suggestedUsernames}),b((0,c.kg)(c.zv)),setTimeout(resetSuggestedUsernameState,u.sI)},onError:e=>{f((0,c.kg)(c.Un,e)),setTimeout(resetSuggestedUsernameState,u.sI)}})}function handleDeleteSuggestedUsernameIndex(e){n.suggestedUsernames.splice(e,1),saveSuggestedUsernames()}function handleCreateSuggestedUsername(e){n.suggestedUsernames.push(e),handleFieldChange({fieldName:"suggestedUsernames",value:n.suggestedUsernames}),saveSuggestedUsernames()}function getSuggestedUsernamesLimitWarning(e){return 0===e?(0,c.kg)("success",u.AN.no_entries):e>0&&e<10?(0,c.kg)("warning",u.AN.min_not_reached):null}return((0,l.useEffect)(()=>{t({chatDisabled:x,chatJoinMessagesEnabled:S,forbiddenUsernames:j,suggestedUsernames:U,welcomeMessage:y,chatEstablishedUserMode:k})},[C]),n)?(0,a.jsxs)("div",{className:"config-server-details-form",children:[(0,a.jsx)(e,{children:"Chat Settings"}),(0,a.jsxs)("div",{className:"form-module config-server-details-container",children:[(0,a.jsx)(o.Z,{fieldName:"chatDisabled",...u.yj,checked:!n.chatDisabled,reversed:!0,onChange:handleChatDisableChange}),(0,a.jsx)(o.Z,{fieldName:"chatJoinMessagesEnabled",...u.kB,checked:n.chatJoinMessagesEnabled,onChange:handleChatJoinMessagesEnabledChange}),(0,a.jsx)(o.Z,{fieldName:"chatEstablishedUserMode",...u.dj,checked:n.chatEstablishedUserMode,onChange:handleEstablishedUserModeChange}),(0,a.jsx)(i.$7,{fieldName:"welcomeMessage",...u.IX,type:r.Sk,value:n.welcomeMessage,initialValue:y,onChange:handleFieldChange}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(d.Y,{title:u.Dg.label,placeholder:u.Dg.placeholder,description:u.Dg.tip,values:n.forbiddenUsernames,handleDeleteIndex:handleDeleteForbiddenUsernameIndex,handleCreateString:handleCreateForbiddenUsername,submitStatus:h}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(d.Y,{title:u.AN.label,placeholder:u.AN.placeholder,description:u.AN.tip,values:n.suggestedUsernames,handleDeleteIndex:handleDeleteSuggestedUsernameIndex,handleCreateString:handleCreateSuggestedUsername,submitStatus:m,continuousStatusMessage:getSuggestedUsernamesLimitWarning(n.suggestedUsernames.length)})]})]}):null}ConfigChat.getLayout=function(e){return(0,a.jsx)(h.l,{page:e})}}},function(e){e.O(0,[5596,1130,4104,9403,1024,3942,971,6697,1664,1749,1700,2122,4938,5578,9774,2888,179],function(){return e(e.s=42011)}),_N_E=e.O()}]);