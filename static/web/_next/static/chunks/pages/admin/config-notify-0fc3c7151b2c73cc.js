(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4440],{5789:function(e,n,t){"use strict";n.Z=void 0;var a=t(38614);n.Z=a.Col},55673:function(e,n,t){"use strict";n.Z=void 0;var a=t(38614);n.Z=a.Row},13882:function(e,n,t){"use strict";function requiredArgs(e,n){if(n.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}t.d(n,{Z:function(){return requiredArgs}})},19013:function(e,n,t){"use strict";t.d(n,{Z:function(){return toDate}});var a=t(71002),s=t(13882);function toDate(e){(0,s.Z)(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,a.Z)(e)&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):(("string"==typeof e||"[object String]"===n)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},7148:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-notify",function(){return t(13322)}])},82654:function(e,n,t){"use strict";t.d(n,{Z:function(){return ToggleSwitch}});var a=t(85893),s=t(67294),i=t(40987),l=t(75554),r=t(37383),o=t(25588),c=t(18454);let ToggleSwitch=e=>{let{apiPath:n,checked:t,reversed:d=!1,configPath:u="",disabled:h=!1,fieldName:f,label:g,tip:p,useSubmit:m,onChange:x}=e,[b,v]=(0,s.useState)(null),y=null,j=(0,s.useContext)(c.a),{setFieldInConfigState:w}=j||{},resetStates=()=>{v(null),clearTimeout(y),y=null},handleChange=async e=>{if(m){v((0,l.kg)(l.Jk));let t=d?!e:e;await (0,o.Si)({apiPath:n,data:{value:t},onSuccess:()=>{w({fieldName:f,value:t,path:u}),v((0,l.kg)(l.zv))},onError:e=>{v((0,l.kg)(l.Un,"There was an error: ".concat(e)))}}),y=setTimeout(resetStates,o.sI)}x&&x(e)},N=null!==b&&b.type===l.Jk;return(0,a.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[g&&(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:g})}),(0,a.jsxs)("div",{className:"input-side",children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)(i.Z,{className:"switch field-".concat(f),loading:N,onChange:handleChange,defaultChecked:t,checked:t,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:h}),(0,a.jsx)(r.E,{status:b})]}),(0,a.jsx)("p",{className:"field-tip",children:p})]})]})};ToggleSwitch.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},13322:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ConfigNotify}});var a=t(85893),s=t(4863),i=t(65400),l=t(5789),r=t(55673),o=t(53740),c=t(67294),d=t(41664),u=t.n(d),h=t(18454),f=t(5751),g=t(37383),p=t(25588),m=t(82654),x=t(75554);let{Title:b}=o.default,DiscordNotify=()=>{let e=(0,c.useContext)(h.a),{serverConfig:n,setFieldInConfigState:t}=e||{},{notifications:s}=n||{},{discord:l}=s||{},{enabled:r,webhook:o,goLiveMessage:d}=l||{},[u,v]=(0,c.useState)({}),[y,j]=(0,c.useState)(null),[w,N]=(0,c.useState)(!1);(0,c.useEffect)(()=>{v({enabled:r,webhook:o,goLiveMessage:d})},[s,l]);let canSave=()=>""!==o&&""!==d,handleFieldChange=e=>{let{fieldName:n,value:t}=e;v({...u,[n]:t}),N(canSave())},resetStates=()=>{j(null),clearTimeout(null)},save=async()=>{await (0,p.Si)({apiPath:"/notifications/discord",data:{value:u},onSuccess:()=>{t({fieldName:"discord",value:u,path:"notifications"}),j((0,x.kg)(x.zv,"Updated.")),setTimeout(resetStates,p.sI)},onError:e=>{j((0,x.kg)(x.Un,e)),setTimeout(resetStates,p.sI)}})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{children:"Discord"}),(0,a.jsx)("p",{className:"description reduced-margins",children:"Let your Discord channel know each time you go live."}),(0,a.jsxs)("p",{className:"description reduced-margins",children:[(0,a.jsx)("a",{href:"https://support.discord.com/hc/en-us/articles/228383668",target:"_blank",rel:"noreferrer",children:"Create a webhook"})," ","under ",(0,a.jsx)("i",{children:"Edit Channel / Integrations"})," on your Discord channel and provide it below."]}),(0,a.jsx)(m.Z,{apiPath:"",fieldName:"discordEnabled",label:"Enable Discord",checked:u.enabled,onChange:e=>{handleFieldChange({fieldName:"enabled",value:e})}}),(0,a.jsx)("div",{style:{display:u.enabled?"block":"none"},children:(0,a.jsx)(f.nv,{...p.oy.webhookUrl,required:!0,value:u.webhook,onChange:handleFieldChange})}),(0,a.jsx)("div",{style:{display:u.enabled?"block":"none"},children:(0,a.jsx)(f.nv,{...p.oy.goLiveMessage,required:!0,value:u.goLiveMessage,onChange:handleFieldChange})}),(0,a.jsx)(i.default,{type:"primary",onClick:save,style:{display:w?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Save"}),(0,a.jsx)(g.E,{status:y})]})},{Title:v}=o.default,BrowserNotify=()=>{let e=(0,c.useContext)(h.a),{serverConfig:n,setFieldInConfigState:t}=e||{},{notifications:s}=n||{},{browser:l}=s||{},{enabled:r,goLiveMessage:o}=l||{},[d,u]=(0,c.useState)({}),[b,y]=(0,c.useState)(null),[j,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{u({enabled:r,goLiveMessage:o})},[s,l]);let canSave=()=>!0,handleFieldChange=e=>{let{fieldName:n,value:t}=e;console.log(n,t),u({...d,[n]:t}),w(canSave())},resetStates=()=>{y(null),clearTimeout(null)},save=async()=>{await (0,p.Si)({apiPath:"/notifications/browser",data:{value:d},onSuccess:()=>{t({fieldName:"browser",value:d,path:"notifications"}),y((0,x.kg)(x.zv,"Updated.")),setTimeout(resetStates,p.sI)},onError:e=>{y((0,x.kg)(x.Un,e)),setTimeout(resetStates,p.sI)}})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{children:"Browser Alerts"}),(0,a.jsx)("p",{className:"description reduced-margins",children:"Viewers can opt into being notified when you go live with their browser."}),(0,a.jsx)("p",{className:"description reduced-margins",children:"Not all browsers support this."}),(0,a.jsx)(m.Z,{apiPath:"",fieldName:"enabled",label:"Enable browser notifications",onChange:e=>{handleFieldChange({fieldName:"enabled",value:e})},checked:d.enabled}),(0,a.jsx)("div",{style:{display:d.enabled?"block":"none"},children:(0,a.jsx)(f.nv,{...p.mv.goLiveMessage,required:!0,type:f.Sk,value:d.goLiveMessage,onChange:handleFieldChange})}),(0,a.jsx)(i.default,{type:"primary",style:{display:j?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},onClick:save,children:"Save"}),(0,a.jsx)(g.E,{status:b})]})},{Title:y}=o.default,FediverseNotify=()=>{let e=(0,c.useContext)(h.a),{serverConfig:n}=e||{},{federation:t}=n||{},{enabled:s}=t||{},[l,r]=(0,c.useState)({});return(0,c.useEffect)(()=>{r({enabled:s})},[s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y,{children:"Fediverse Social"}),(0,a.jsx)("p",{className:"description",children:"Enabling the Fediverse social features will not just alert people to when you go live, but also enable other functionality."}),(0,a.jsxs)("p",{children:["Fediverse social features:"," ",(0,a.jsx)("span",{style:{color:t.enabled?"green":"red"},children:l.enabled?"Enabled":"Disabled"})]}),(0,a.jsx)(u(),{passHref:!0,href:"/admin/config-federation/",children:(0,a.jsx)(i.default,{type:"primary",style:{position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Configure"})})]})};var j=t(50650),w=t(89105),N=t(15578);let{Title:S}=o.default;function ConfigNotify(){let[e,n]=(0,c.useState)(null),t=(0,c.useContext)(h.a),{serverConfig:o}=t||{},{yp:d}=o,{instanceUrl:f}=d,[g,m]=(0,c.useState)(!1);(0,c.useEffect)(()=>{n({instanceUrl:f})},[d]);let x=""!==f,b=!x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.default,{message:"You must set your server URL before you can enable this feature.",type:"warning",showIcon:!0}),(0,a.jsx)("br",{}),(0,a.jsx)(j.$7,{fieldName:"instanceUrl",...p.yi,value:(null==e?void 0:e.instanceUrl)||"",initialValue:d.instanceUrl,type:j.xA,onChange:t=>{let{fieldName:a,value:s}=t;m((0,w.jv)(s)),n({...e,[a]:s})},onSubmit:()=>{g&&n({...e,enabled:!1})},required:!0})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{children:"Notifications"}),(0,a.jsxs)("p",{className:"description",children:["Let your viewers know when you go live by supporting any of the below notification channels."," ",(0,a.jsx)("a",{href:"https://owncast.online/docs/notifications/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Learn more about live notifications."})]}),b,(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(l.Z,{span:10,className:"form-module ".concat(x?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,a.jsx)(BrowserNotify,{})}),(0,a.jsx)(l.Z,{span:10,className:"form-module ".concat(x?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,a.jsx)(DiscordNotify,{})}),(0,a.jsx)(l.Z,{span:10,className:"form-module ".concat(x?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,a.jsx)(FediverseNotify,{})}),(0,a.jsxs)(l.Z,{span:10,className:"form-module ".concat(x?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:[(0,a.jsx)(S,{children:"Custom"}),(0,a.jsx)("p",{className:"description",children:"Build your own notifications by using custom webhooks."}),(0,a.jsx)(u(),{passHref:!0,href:"/admin/webhooks",children:(0,a.jsx)(i.default,{type:"primary",style:{position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Create"})})]})]})]})}ConfigNotify.getLayout=function(e){return(0,a.jsx)(N.l,{page:e})}}},function(e){e.O(0,[5596,1130,4104,9403,1024,3942,971,6697,1664,1749,1700,2122,4938,5578,9774,2888,179],function(){return e(e.s=7148)}),_N_E=e.O()}]);