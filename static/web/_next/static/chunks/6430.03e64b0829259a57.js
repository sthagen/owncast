(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6430,9614],{25330:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},72652:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"}},71961:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=(a=n(79686))&&a.__esModule?a:{default:a};t.default=r,e.exports=r},5085:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=(a=n(76720))&&a.__esModule?a:{default:a};t.default=r,e.exports=r},79686:function(e,t,n){"use strict";var a=n(64836),r=n(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(42122)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var c=o?Object.getOwnPropertyDescriptor(e,l):null;c&&(c.get||c.set)?Object.defineProperty(a,l,c):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(67294)),c=a(n(25330)),s=a(n(92074));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var u=function(e,t){return l.createElement(s.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:c.default}))};u.displayName="CheckOutlined";var d=l.forwardRef(u);t.default=d},76720:function(e,t,n){"use strict";var a=n(64836),r=n(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(42122)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var c=o?Object.getOwnPropertyDescriptor(e,l):null;c&&(c.get||c.set)?Object.defineProperty(a,l,c):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(67294)),c=a(n(72652)),s=a(n(92074));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var u=function(e,t){return l.createElement(s.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:c.default}))};u.displayName="DownOutlined";var d=l.forwardRef(u);t.default=d},83514:function(e,t,n){"use strict";var a=n(75263).default,r=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(10434)),l=r(n(38416)),c=r(n(94184)),s=a(n(67294)),i=n(31929),u=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};t.default=function(e){var t,n=e.prefixCls,a=e.className,r=e.checked,d=e.onChange,f=e.onClick,p=u(e,["prefixCls","className","checked","onChange","onClick"]),h=(0,s.useContext(i.ConfigContext).getPrefixCls)("tag",n),E=(0,c.default)(h,(t={},(0,l.default)(t,"".concat(h,"-checkable"),!0),(0,l.default)(t,"".concat(h,"-checkable-checked"),r),t),a);return s.createElement("span",(0,o.default)({},p,{className:E,onClick:function(e){null==d||d(!r),null==f||f(e)}}))}},59361:function(e,t,n){"use strict";var a=n(75263).default,r=n(64836).default;t.Z=void 0;var o=r(n(38416)),l=r(n(10434)),c=r(n(27424)),s=r(n(40753)),i=r(n(94184)),u=r(n(18475)),d=a(n(67294)),f=n(31929),p=n(45471),h=r(n(61539));r(n(13594));var E=r(n(83514)),y=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},_=new RegExp("^(".concat(p.PresetColorTypes.join("|"),")(-inverse)?$")),O=new RegExp("^(".concat(p.PresetStatusColorTypes.join("|"),")$")),v=d.forwardRef(function(e,t){var n,a=e.prefixCls,r=e.className,p=e.style,E=e.children,v=e.icon,M=e.color,m=e.onClose,C=e.closeIcon,b=e.closable,N=void 0!==b&&b,j=y(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),g=d.useContext(f.ConfigContext),S=g.getPrefixCls,x=g.direction,P=d.useState(!0),A=(0,c.default)(P,2),w=A[0],T=A[1];d.useEffect(function(){"visible"in j&&T(j.visible)},[j.visible]);var k=function(){return!!M&&(_.test(M)||O.test(M))},U=(0,l.default)({backgroundColor:M&&!k()?M:void 0},p),I=k(),R=S("tag",a),L=(0,i.default)(R,(n={},(0,o.default)(n,"".concat(R,"-").concat(M),I),(0,o.default)(n,"".concat(R,"-has-color"),M&&!I),(0,o.default)(n,"".concat(R,"-hidden"),!w),(0,o.default)(n,"".concat(R,"-rtl"),"rtl"===x),n),r),F=function(e){e.stopPropagation(),null==m||m(e),!e.defaultPrevented&&("visible"in j||T(!1))},D="onClick"in j||E&&"a"===E.type,H=(0,u.default)(j,["visible"]),K=v||null,W=K?d.createElement(d.Fragment,null,K,d.createElement("span",null,E)):E,Z=d.createElement("span",(0,l.default)({},H,{ref:t,className:L,style:U}),W,N?C?d.createElement("span",{className:"".concat(R,"-close-icon"),onClick:F},C):d.createElement(s.default,{className:"".concat(R,"-close-icon"),onClick:F}):null);return D?d.createElement(h.default,null,Z):Z});v.CheckableTag=E.default,t.Z=v},39991:function(e,t,n){"use strict";n.r(t),n.d(t,{ChatModerationActionMenu:function(){return F}});var a=n(85893),r=n(82891),o=n(74048),l=n(11187),c=n(56697),s=n(67294),i=n(5152),u=n.n(i),d=n(29614),f=n(65400),p=n(5789),h=n(68469),E=n(55673),y=n(89552),_=n(2307),O=n(59361),v=n(58091),M=n(4511),m=class{static async removeMessage(e,t){let n=new URL("/api/chat/messagevisibility",window.location.toString());n.searchParams.append("accessToken",t);let a=n.toString(),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idArray:[e]})};await fetch(a,r)}static async banUser(e,t){let n=new URL("/api/chat/users/setenabled",window.location.toString());n.searchParams.append("accessToken",t);let a=n.toString(),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})};await fetch(a,r)}},C=n(78948),b=n.n(C),N=n(37135),j=n(69183);let{Panel:g}=h.default,S=u()(()=>n.e(7949).then(n.t.bind(n,77949,23)),{loadableGenerated:{webpack:()=>[77949]},ssr:!1}),x=async(e,t)=>{try{m.removeMessage(e,t)}catch(e){console.error(e)}},P=e=>{let{label:t,value:n}=e;return(0,a.jsxs)(E.Z,{justify:"space-around",align:"middle",children:[(0,a.jsx)(p.Z,{span:12,children:t}),(0,a.jsx)(p.Z,{span:12,children:n})]})},A=e=>{let{client:t}=e,{messageCount:n,connectedAt:r,geo:o}=t,l=(0,v.Z)(new Date(r),"PP pp");return(0,a.jsxs)("div",{children:[(0,a.jsx)(P,{label:"Messages Sent",value:"".concat(n)}),"N/A"!==o&&(0,a.jsx)(P,{label:"Geo",value:o}),(0,a.jsx)(P,{label:"Connected At",value:l})]})},w=e=>{let{color:t}=e;return(0,a.jsxs)("div",{className:b().colorBlock,style:{backgroundColor:"var(--theme-color-users-".concat(t,")")},children:["Color ",t]})},T=e=>{let{userId:t,accessToken:n}=e,[r,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),i=async()=>{try{let e=await (await fetch("/api/moderation/chat/user/".concat(t,"?accessToken=").concat(n))).json();o(e),c(!1)}catch(e){console.error(e)}};if((0,s.useEffect)(()=>{i()},[]),!r)return null;let{user:u,connectedClients:d,messages:p}=r,{displayColor:E,createdAt:m,previousNames:C,scopes:b,isBot:T,authenticated:k}=u,U=d.reduce((e,t)=>e+t.messageCount,0),I=(0,v.Z)(new Date(m),"PP pp"),R=[{title:"Message",dataIndex:"body",key:"body"},{title:"Sent At",dataIndex:"timestamp",key:"timestamp",render:e=>(0,v.Z)(new Date(e),"PP pp")},{title:"Delete",key:"delete",render:(e,t)=>(0,a.jsx)(f.default,{type:"primary",ghost:!0,icon:(0,a.jsx)(S,{}),onClick:()=>x(t.id,n)})}];return(0,a.jsx)(M.SV,{fallbackRender:e=>{let{error:t,resetErrorBoundary:n}=e;return(0,a.jsx)(j.A,{componentName:"ChatModerationDetailsModal",message:t.message,retryFunction:n})},children:(0,a.jsxs)(y.default,{spinning:l,children:[(0,a.jsx)(w,{color:E}),null==b?void 0:b.map(e=>(0,a.jsx)(O.Z,{children:e},e)),k&&(0,a.jsx)(O.Z,{children:"Authenticated"}),T&&(0,a.jsx)(O.Z,{children:"Bot"}),(0,a.jsx)(P,{label:"Messages Sent Across Clients",value:U.toString()}),(0,a.jsx)(P,{label:"User Created",value:I}),(0,a.jsx)(P,{label:"Known As",value:C.join(",")}),(0,a.jsxs)(h.default,{accordion:!0,children:[(0,a.jsx)(g,{header:"Currently Connected Clients",children:(0,a.jsx)(h.default,{accordion:!0,children:d.map(e=>(0,a.jsx)(g,{header:(0,N.AB)(e.userAgent),children:(0,a.jsx)(A,{client:e})},e.id))})},"connected-clients"),(0,a.jsx)(h.default,{accordion:!0,children:(0,a.jsx)(g,{header:"Recent Chat Messages",children:(0,a.jsx)(_.Z,{size:"small",pagination:null,columns:R,dataSource:p,rowKey:"id"})},"chat-messages")})]})]})})},{confirm:k}=c.default,U=u()(()=>Promise.resolve().then(n.t.bind(n,74337,23)),{loadableGenerated:{webpack:()=>[74337]},ssr:!1}),I=u()(()=>Promise.resolve().then(n.t.bind(n,67039,23)),{loadableGenerated:{webpack:()=>[67039]},ssr:!1}),R=u()(()=>Promise.resolve().then(n.t.bind(n,84645,23)),{loadableGenerated:{webpack:()=>[84645]},ssr:!1}),L=u()(()=>n.e(500).then(n.t.bind(n,40500,23)),{loadableGenerated:{webpack:()=>[40500]},ssr:!1}),F=e=>{let{messageID:t,userID:n,userDisplayName:c,accessToken:i}=e,[u,f]=(0,s.useState)(!1),p=async()=>{try{await m.banUser(n,i)}catch(e){console.error(e),l.default.error(e)}},h=async()=>{try{await m.removeMessage(t,i)}catch(e){console.error(e),l.default.error(e)}},E=async()=>{k({icon:(0,a.jsx)(I,{}),content:"Are you sure you want to remove this message from ".concat(c,"?"),onOk(){h()}})},y=async()=>{k({icon:(0,a.jsx)(I,{}),content:"Are you sure you want to ban ".concat(c," from chat?"),onOk(){p()}})},_=[{icon:(0,a.jsx)(R,{}),label:"Hide Message",key:"hide-message",onClick:E},{icon:(0,a.jsx)(U,{}),label:"Ban User",key:"ban-user",onClick:y},{label:"More Info...",key:"more-info",onClick:()=>f(!0)}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{menu:{items:_},trigger:["click"],children:(0,a.jsx)("button",{type:"button",onClick:e=>e.preventDefault(),children:(0,a.jsx)(o.default,{children:(0,a.jsx)(L,{})})})}),(0,a.jsx)(d.Modal,{title:c,open:u,handleCancel:()=>{f(!1)},children:(0,a.jsx)(T,{userId:n,accessToken:i})})]})}},29614:function(e,t,n){"use strict";n.r(t),n.d(t,{Modal:function(){return d}});var a=n(85893),r=n(89552),o=n(56697),l=n(67294),c=n(4511),s=n(69183),i=n(70051),u=n.n(i);let d=e=>{let{title:t,url:n,open:i,handleOk:d,handleCancel:f,afterClose:p,height:h,width:E,children:y}=e,[_,O]=(0,l.useState)(!!n),v="100%",M="520px";n&&(v="70vh",M="900px");let m={padding:"0px",minHeight:h,height:null!=h?h:v},C=n&&(0,a.jsx)("iframe",{title:t,src:n,width:"100%",height:"100%",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",frameBorder:"0",allowFullScreen:!0,style:{display:"block"},onLoad:()=>O(!1)});return(0,a.jsx)(o.default,{title:t,open:i,onOk:d,onCancel:f,afterClose:p,bodyStyle:m,width:null!=E?E:M,zIndex:999,footer:null,centered:!0,destroyOnClose:!0,className:u().modal,children:(0,a.jsx)(c.SV,{fallbackRender:e=>{let{error:t,resetErrorBoundary:n}=e;return(0,a.jsx)(s.A,{componentName:"Modal",message:t.message,retryFunction:n})},children:(0,a.jsxs)("div",{id:"modal-container",style:{height:"100%"},children:[C&&(0,a.jsx)("div",{style:{display:_?"none":"inline"},children:C}),y&&(0,a.jsx)("div",{className:u().content,children:y}),_&&(0,a.jsx)(r.default,{className:u().spinner,spinning:_,size:"large",tip:t})]})})})};d.defaultProps={url:void 0,children:void 0,handleOk:void 0,handleCancel:void 0,afterClose:void 0}},37135:function(e,t,n){"use strict";n.d(t,{AB:function(){return i},Qr:function(){return l},t5:function(){return o},wS:function(){return s}});var a=n(42238),r=n.n(a);function o(e){let t=e.split(":");t[t.length-1]="";let n=t.join(":");return"[::1]"===(n=n.slice(0,n.length-1))||"127.0.0.1"===n?"Localhost":n}function l(e){return!e||0===Object.keys(e).length&&e.constructor===Object}function c(e,t,n){return String(t.repeat(n)+e).slice(-n)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Number.isFinite(+e)?Math.abs(e):0,n=Math.floor(t/86400),a=n>0?"".concat(n," day").concat(n>1?"s":""," "):"",r=Math.floor(t/3600%24),o=r||n?c("".concat(r,":"),"0",3):"",l=c("".concat(Math.floor(t/60%60),":"),"0",3),s=c("".concat(Math.floor(t%60)),"0",2);return a+o+l+s}function i(e){let t=r()(e),{device:n,os:a,browser:o}=t,{major:l,name:c}=o,{version:s,name:i}=a,{model:u,type:d}=n;if("libmpv"===e)return"mpv media player";if(!c||!l||!i)return e;let f=u||d?" (".concat(u||d,")"):"";return"".concat(c," ").concat(l," on ").concat(i," ").concat(s,"\n  ").concat(f)}},78948:function(e){e.exports={modalContainer:"ChatModerationDetailsModal_modalContainer__mtTcg",chatHistory:"ChatModerationDetailsModal_chatHistory__Iksxq",colorBlock:"ChatModerationDetailsModal_colorBlock__eRrFu",displayName:"ChatModerationDetailsModal_displayName__vcRZ5"}},70051:function(e){e.exports={spinner:"Modal_spinner__vORWo",content:"Modal_content__mZkaV",modal:"Modal_modal___vOcW"}},27712:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=n.F1&&t<=n.F12)return!1;switch(t){case n.ALT:case n.CAPS_LOCK:case n.CONTEXT_MENU:case n.CTRL:case n.DOWN:case n.END:case n.ESC:case n.HOME:case n.INSERT:case n.LEFT:case n.MAC_FF_META:case n.META:case n.NUMLOCK:case n.NUM_CENTER:case n.PAGE_DOWN:case n.PAGE_UP:case n.PAUSE:case n.PRINT_SCREEN:case n.RIGHT:case n.SHIFT:case n.UP:case n.WIN_KEY:case n.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=n.ZERO&&e<=n.NINE||e>=n.NUM_ZERO&&e<=n.NUM_MULTIPLY||e>=n.A&&e<=n.Z||-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case n.SPACE:case n.QUESTION_MARK:case n.NUM_PLUS:case n.NUM_MINUS:case n.NUM_PERIOD:case n.NUM_DIVISION:case n.SEMICOLON:case n.DASH:case n.EQUALS:case n.COMMA:case n.PERIOD:case n.SLASH:case n.APOSTROPHE:case n.SINGLE_QUOTE:case n.OPEN_SQUARE_BRACKET:case n.BACKSLASH:case n.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};t.default=n}}]);