(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7116],{25330:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},57096:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"}},71961:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(79686))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},20054:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(32615))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},79686:function(e,t,n){"use strict";var r=n(64836),a=n(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(42122)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),l=r(n(25330)),u=r(n(92074));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var s=function(e,t){return i.createElement(u.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:l.default}))};s.displayName="CheckOutlined";var c=i.forwardRef(s);t.default=c},32615:function(e,t,n){"use strict";var r=n(64836),a=n(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(42122)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),l=r(n(57096)),u=r(n(92074));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var s=function(e,t){return i.createElement(u.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:l.default}))};s.displayName="PlusOutlined";var c=i.forwardRef(s);t.default=c},42698:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(){return null}},1286:function(e,t,n){"use strict";var r=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{inkBar:!0,tabPane:!1};return(t=!1===n?{inkBar:!1,tabPane:!1}:!0===n?{inkBar:!0,tabPane:!0}:(0,o.default)({inkBar:!0},"object"===(0,a.default)(n)?n:{})).tabPane&&(t.tabPaneMotion=(0,o.default)((0,o.default)({},l),{motionName:(0,i.getTransitionName)(e,"switch")})),t};var a=r(n(18698)),o=r(n(10434)),i=n(53683),l={motionAppear:!1,motionEnter:!0,motionLeave:!0}},47397:function(e,t,n){"use strict";var r=n(75263).default,a=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e||(0,l.default)(t).map(function(e){if(i.isValidElement(e)){var t=e.key,n=e.props||{},r=n.tab,a=u(n,["tab"]);return(0,o.default)((0,o.default)({key:String(t)},a),{label:r})}return null}).filter(function(e){return e})};var o=a(n(10434)),i=r(n(67294)),l=a(n(45598));a(n(13594));var u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}},20838:function(e,t,n){"use strict";var r=n(75263).default,a=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(38416)),i=a(n(10434)),l=a(n(40753)),u=a(n(26937)),d=a(n(20054)),s=a(n(94184)),c=a(n(93068)),f=r(n(67294)),p=n(31929),h=a(n(3236));a(n(13594));var v=a(n(1286)),y=a(n(47397)),b=a(n(42698)),m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function j(e){var t,n=e.type,r=e.className,a=e.size,b=e.onEdit,j=e.hideAdd,g=e.centered,O=e.addIcon,x=e.children,w=e.items,_=e.animated,P=m(e,["type","className","size","onEdit","hideAdd","centered","addIcon","children","items","animated"]),k=P.prefixCls,M=P.moreIcon,I=void 0===M?f.createElement(u.default,null):M,S=f.useContext(p.ConfigContext),A=S.getPrefixCls,C=S.direction,E=S.getPopupContainer,N=A("tabs",k);"editable-card"===n&&(t={onEdit:function(e,t){var n=t.key,r=t.event;null==b||b("add"===e?r:n,e)},removeIcon:f.createElement(l.default,null),addIcon:O||f.createElement(d.default,null),showAdd:!0!==j});var T=A(),B=(0,y.default)(w,x),F=(0,v.default)(N,_);return f.createElement(h.default.Consumer,null,function(e){var l,u=void 0!==a?a:e;return f.createElement(c.default,(0,i.default)({direction:C,getPopupContainer:E,moreTransitionName:"".concat(T,"-slide-up")},P,{items:B,className:(0,s.default)((l={},(0,o.default)(l,"".concat(N,"-").concat(u),u),(0,o.default)(l,"".concat(N,"-card"),["card","editable-card"].includes(n)),(0,o.default)(l,"".concat(N,"-editable-card"),"editable-card"===n),(0,o.default)(l,"".concat(N,"-centered"),g),l),r),editable:t,moreIcon:I,prefixCls:N,animated:F}))})}j.TabPane=b.default,t.default=j},89277:function(e,t,n){"use strict";var r=n(75263).default,a=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(10434));a(n(18698));var i=r(n(67294));a(n(13594));var l=a(n(28460)),u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},d=i.forwardRef(function(e,t){var n=e.ellipsis,r=e.rel,a=u(e,["ellipsis","rel"]),d=(0,o.default)((0,o.default)({},a),{rel:void 0===r&&"_blank"===a.target?"noopener noreferrer":r});return delete d.navigate,i.createElement(l.default,(0,o.default)({},d,{ref:t,ellipsis:!!n,component:"a"}))});t.default=d},21987:function(e,t,n){"use strict";var r=n(75263).default,a=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(10434)),i=r(n(67294)),l=a(n(28460)),u=i.forwardRef(function(e,t){return i.createElement(l.default,(0,o.default)({ref:t},e,{component:"div"}))});t.default=u},15394:function(e,t,n){"use strict";var r=n(75263).default,a=n(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(10434)),i=a(n(18698)),l=a(n(18475)),u=r(n(67294));a(n(13594));var d=a(n(28460)),s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},c=u.forwardRef(function(e,t){var n=e.ellipsis,r=s(e,["ellipsis"]),a=u.useMemo(function(){return n&&"object"===(0,i.default)(n)?(0,l.default)(n,["expandable","rows"]):n},[n]);return u.createElement(d.default,(0,o.default)({ref:t},r,{ellipsis:a,component:"span"}))});t.default=c},53740:function(e,t,n){"use strict";var r=n(64836).default;t.default=void 0;var a=r(n(89277)),o=r(n(21987)),i=r(n(15394)),l=r(n(11700)),u=r(n(89652)).default;u.Text=i.default,u.Link=a.default,u.Title=l.default,u.Paragraph=o.default,t.default=u},78513:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthModal:function(){return C}});var r=n(85893),a=n(20838),o=n(4480),i=n(4511),l=n(4863),u=n(51024),d=n(74048),s=n(89552),c=n(68469),f=n(53740),p=n(65400),h=n(5152),v=n.n(h),y=n(67294),b=n(53899);let{Panel:m}=c.default,{Link:j}=f.default,g=v()(()=>Promise.resolve().then(n.t.bind(n,67996,23)),{loadableGenerated:{webpack:()=>[67996]},ssr:!1}),O=e=>{let{authenticated:t,displayName:n,accessToken:a}=e,[o,i]=(0,y.useState)(null),[f,h]=(0,y.useState)(!1),[v,O]=(0,y.useState)(!1),[x,w]=(0,y.useState)(""),_=t?(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:"You are already authenticated"}),". However, you can add other domains or log in as a different user."]}):(0,r.jsxs)("span",{children:["Use your own domain to authenticate ",(0,r.jsx)("span",{children:n})," or login as a previously"," ","authenticated chat user using IndieAuth."]}),P=o;P&&P.includes("url does not support indieauth")&&(P="The provided URL is either invalid or does not support IndieAuth.");let k=e=>{if(!(0,b.jv)(e)||!e.includes(".")){O(!1);return}O(!0)},M=async()=>{if(v){h(!0);try{let e=await fetch("/api/auth/indieauth?accessToken=".concat(a),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({authHost:"https://".concat(x)})}),t=await e.json();if(t.message){i(t.message),h(!1);return}if(!t.redirect){i("Auth provider did not return a redirect URL."),h(!1);return}if(t.redirect){let{redirect:e}=t;window.location=e}}catch(e){i(e.message)}h(!1)}};return(0,r.jsx)(s.default,{spinning:f,children:(0,r.jsxs)(d.default,{direction:"vertical",children:[_,P&&(0,r.jsx)(l.default,{message:"Error",description:P,type:"error",showIcon:!0}),(0,r.jsx)("div",{children:"Your domain"}),(0,r.jsx)(u.default.Search,{addonBefore:"https://",onInput:e=>{let t=e.nativeEvent.data;if(":"===t)return;w(e.target.value);let n="https://".concat(e.target.value);k(n)},type:"url",value:x,placeholder:"yoursite.com",status:!v&&x.length>0?"error":void 0,onSearch:M,enterButton:(0,r.jsx)(p.default,{type:v?"primary":"default",disabled:!v||0===x.length,children:(0,r.jsx)(g,{})})}),(0,r.jsx)(c.default,{ghost:!0,children:(0,r.jsxs)(m,{header:"Learn more about using IndieAuth to authenticate with chat.",children:[(0,r.jsx)("p",{children:"IndieAuth allows for a completely independent and decentralized way of identifying yourself using your own domain."}),(0,r.jsxs)("p",{children:["If you run an Owncast instance, you can use that domain here. Otherwise,"," ",(0,r.jsx)(j,{href:"https://indieauth.net/#providers",children:"learn more about how you can support IndieAuth"}),"."]})]},"header")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Note"}),": This is for authentication purposes only, and no personal information will be accessed or stored."]})]})})};var x=n(80453),w=n.n(x);let{Panel:_}=c.default,P=v()(()=>Promise.resolve().then(n.t.bind(n,67996,23)),{loadableGenerated:{webpack:()=>[67996]},ssr:!1}),k=e=>{let{authenticated:t,displayName:n,accessToken:a}=e,[o,i]=(0,y.useState)(null),[f,h]=(0,y.useState)(!1),[v,m]=(0,y.useState)(!1),[j,g]=(0,y.useState)(""),[O,x]=(0,y.useState)(""),[k,M]=(0,y.useState)(!1),I=t?(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:"You are already authenticated"}),". However, you can add other domains or log in as a different user."]}):(0,r.jsxs)("span",{children:["Receive a direct message on the Fediverse to link your account to"," ",(0,r.jsx)("strong",{children:n}),", or login as a previously linked chat user."]}),S=o;S&&S.includes("url does not support indieauth")&&(S="The provided URL is either invalid or does not support IndieAuth.");let A=e=>{m((0,b.ME)(e))},C=async(e,t)=>{let n=await fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}),r=await n.json();r.message&&(i(r.message),h(!1))},E=async()=>{h(!0);try{await C("/api/auth/fediverse/verify?accessToken=".concat(a),{code:O}),window.location.href="/"}catch(e){console.error(e),i(e)}h(!1)},N=async()=>{if(!v)return;h(!0),i(null);let e=j.replace(/^@+/,"");try{await C("/api/auth/fediverse?accessToken=".concat(a),{account:e}),M(!0)}catch(e){console.error(e),i(e)}h(!1)},T=(0,r.jsxs)("div",{children:["Paste in the code that was sent to your Fediverse account. If you did not receive a code, make sure you can accept direct messages.",(0,r.jsxs)("div",{className:w().codeInputContainer,children:[(0,r.jsx)(u.default,{value:O,onChange:e=>x(e.target.value),className:w().codeInput,placeholder:"123456",maxLength:6}),(0,r.jsx)(p.default,{type:"primary",onClick:E,disabled:O.length<6,className:w().submitButton,children:"Verify Code"})]})]}),B=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"Your Fediverse Account"}),(0,r.jsx)(u.default.Search,{addonBefore:"@",onInput:e=>{g(e.target.value),A(e.target.value)},value:j,placeholder:"youraccount@yourserver.com",status:!v&&j.length>0?"error":void 0,onSearch:N,enterButton:(0,r.jsx)(p.default,{type:v?"primary":"default",disabled:!v||0===j.length,children:(0,r.jsx)(P,{})})})]});return(0,r.jsx)(s.default,{spinning:f,children:(0,r.jsxs)(d.default,{direction:"vertical",children:[I,S&&(0,r.jsx)(l.default,{message:"Error",description:S,type:"error",showIcon:!0}),k?T:B,(0,r.jsx)(c.default,{ghost:!0,children:(0,r.jsx)(_,{header:"Learn more about using the Fediverse to authenticate with chat.",children:(0,r.jsx)("p",{children:"You can link your chat identity with your Fediverse identity. Next time you want to use this chat identity you can again go through the Fediverse authentication."})},"header")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Note"}),": This is for authentication purposes only, and no personal information will be accessed or stored."]})]})})};var M=n(444),I=n.n(M),S=n(44974),A=n(69183);let C=e=>{let{forceTabs:t}=e,n=(0,o.sJ)(S.L4),l=(0,o.sJ)(S.FI),u=(0,o.sJ)(S.db),d=(0,o.sJ)(S.g1);if(!u)return null;let{displayName:s}=u,{federation:c}=d,{enabled:f}=c,p=(0,r.jsxs)("span",{className:I().tabContent,children:[(0,r.jsx)("img",{className:I().icon,src:"/img/indieauth.png",alt:"IndieAuth"}),"IndieAuth"]}),h=(0,r.jsx)(O,{authenticated:n,displayName:s,accessToken:l}),v=(0,r.jsxs)("span",{className:I().tabContent,children:[(0,r.jsx)("img",{className:I().icon,src:"/img/fediverse-black.png",alt:"Fediverse auth"}),"FediAuth"]}),y=(0,r.jsx)(k,{authenticated:n,displayName:s,accessToken:l});return(0,r.jsx)(i.SV,{fallbackRender:e=>{let{error:t,resetErrorBoundary:n}=e;return(0,r.jsx)(A.A,{componentName:"AuthModal",message:t.message,retryFunction:n})},children:(0,r.jsx)("div",{children:(0,r.jsx)(a.default,{defaultActiveKey:"1",items:[{label:p,key:"1",children:h},{label:v,key:"2",children:y}],type:"card",size:"small",renderTabBar:f||t?null:()=>null})})})}},53899:function(e,t,n){"use strict";n.d(t,{Kf:function(){return o},ME:function(){return l},ax:function(){return r},bu:function(){return i},jv:function(){return a}});let r="https?://.*";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["http:","https:"];try{let n=new URL(e);if(""===n.protocol||""===n.hostname||!t.includes(n.protocol))return!1}catch(e){return!1}return!0}function o(e,t){e.startsWith("@")&&(e=e.slice(1));let n=e.split(/:|@/),[r,a,o]=n;return r===t&&3===n.length&&!!r&&!!a&&!!o}function i(e){e.startsWith("matrix:")&&(e=e.slice(7)),e.startsWith("@")&&(e=e.slice(1));let t=e.split(":"),[n,r]=t;return 2===t.length&&!!n&&!!r}function l(e){let t=e.replace(/^@+/,"");return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())}},444:function(e){e.exports={tabContent:"AuthModal_tabContent__sQX_a",icon:"AuthModal_icon__624lg"}},80453:function(e){e.exports={codeInputContainer:"FediAuthModal_codeInputContainer__LheQq",codeInput:"FediAuthModal_codeInput__TbAom",submitButton:"FediAuthModal_submitButton__n9SbC"}},96774:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var d=o[u];if(!l(d))return!1;var s=e[d],c=t[d];if(!1===(a=n?n.call(r,s,c,d):void 0)||void 0===a&&s!==c)return!1}return!0}}}]);