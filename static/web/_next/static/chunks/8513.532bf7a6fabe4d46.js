(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8513],{99611:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(1413),a=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},i=n(42135),s=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};s.displayName="EyeOutlined";var c=a.forwardRef(s)},68795:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(1413),a=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},i=n(42135),s=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};s.displayName="SearchOutlined";var c=a.forwardRef(s)},54907:function(e,t,n){"use strict";n.d(t,{default:function(){return S}});var r=n(87462),a=n(4942),o=n(18073),i=n(94184),s=n.n(i),c=n(74902),l=n(15671),u=n(43144),d=n(32531),p=n(73568),f=n(71002),h=n(50344),v=n(67294),m=n(96774),y=n.n(m),x=n(45987),g=n(82225),C=n(97685),b=v.forwardRef(function(e,t){var n,r=e.prefixCls,o=e.forceRender,i=e.className,c=e.style,l=e.children,u=e.isActive,d=e.role,p=v.useState(u||o),f=(0,C.Z)(p,2),h=f[0],m=f[1];return(v.useEffect(function(){(o||u)&&m(!0)},[o,u]),h)?v.createElement("div",{ref:t,className:s()("".concat(r,"-content"),(n={},(0,a.Z)(n,"".concat(r,"-content-active"),u),(0,a.Z)(n,"".concat(r,"-content-inactive"),!u),n),i),style:c,role:d},v.createElement("div",{className:"".concat(r,"-content-box")},l)):null});b.displayName="PanelContent";var Z=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],j=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,l.Z)(this,n);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onItemClick=function(){var t=e.props,n=t.onItemClick,r=t.panelKey;"function"==typeof n&&n(r)},e.handleKeyPress=function(t){("Enter"===t.key||13===t.keyCode||13===t.which)&&e.onItemClick()},e.renderIcon=function(){var t=e.props,n=t.showArrow,r=t.expandIcon,a=t.prefixCls,o=t.collapsible;if(!n)return null;var i="function"==typeof r?r(e.props):v.createElement("i",{className:"arrow"});return i&&v.createElement("div",{className:"".concat(a,"-expand-icon"),onClick:"header"===o||"icon"===o?e.onItemClick:null},i)},e.renderTitle=function(){var t=e.props,n=t.header,r=t.prefixCls,a=t.collapsible;return v.createElement("span",{className:"".concat(r,"-header-text"),onClick:"header"===a?e.onItemClick:null},n)},e}return(0,u.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return!y()(this.props,e)}},{key:"render",value:function(){var e,t,n=this.props,o=n.className,i=n.id,c=n.style,l=n.prefixCls,u=n.headerClass,d=n.children,p=n.isActive,f=n.destroyInactivePanel,h=n.accordion,m=n.forceRender,y=n.openMotion,C=n.extra,j=n.collapsible,w=(0,x.Z)(n,Z),k="disabled"===j,N="header"===j,E="icon"===j,I=s()((e={},(0,a.Z)(e,"".concat(l,"-item"),!0),(0,a.Z)(e,"".concat(l,"-item-active"),p),(0,a.Z)(e,"".concat(l,"-item-disabled"),k),e),o),A={className:s()("".concat(l,"-header"),(t={},(0,a.Z)(t,u,u),(0,a.Z)(t,"".concat(l,"-header-collapsible-only"),N),(0,a.Z)(t,"".concat(l,"-icon-collapsible-only"),E),t)),"aria-expanded":p,"aria-disabled":k,onKeyPress:this.handleKeyPress};N||E||(A.onClick=this.onItemClick,A.role=h?"tab":"button",A.tabIndex=k?-1:0);var P=null!=C&&"boolean"!=typeof C;return delete w.header,delete w.panelKey,delete w.onItemClick,delete w.showArrow,delete w.expandIcon,v.createElement("div",(0,r.Z)({},w,{className:I,style:c,id:i}),v.createElement("div",A,this.renderIcon(),this.renderTitle(),P&&v.createElement("div",{className:"".concat(l,"-extra")},C)),v.createElement(g.default,(0,r.Z)({visible:p,leavedClassName:"".concat(l,"-content-hidden")},y,{forceRender:m,removeOnLeave:f}),function(e,t){var n=e.className,r=e.style;return v.createElement(b,{ref:t,prefixCls:l,className:n,style:r,isActive:p,forceRender:m,role:h?"tabpanel":null},d)}))}}]),n}(v.Component);function w(e){var t=e;if(!Array.isArray(t)){var n=(0,f.Z)(t);t="number"===n||"string"===n?[t]:[]}return t.map(function(e){return String(e)})}j.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var k=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){(0,l.Z)(this,n),(r=t.call(this,e)).onClickItem=function(e){var t=r.state.activeKey;if(r.props.accordion)t=t[0]===e?[]:[e];else{var n=(t=(0,c.Z)(t)).indexOf(e);n>-1?t.splice(n,1):t.push(e)}r.setActiveKey(t)},r.getNewChild=function(e,t){if(!e)return null;var n=r.state.activeKey,a=r.props,o=a.prefixCls,i=a.openMotion,s=a.accordion,c=a.destroyInactivePanel,l=a.expandIcon,u=a.collapsible,d=e.key||String(t),p=e.props,f=p.header,h=p.headerClass,m=p.destroyInactivePanel,y=p.collapsible,x=!1;x=s?n[0]===d:n.indexOf(d)>-1;var g=null!=y?y:u,C={key:d,panelKey:d,header:f,headerClass:h,isActive:x,prefixCls:o,destroyInactivePanel:null!=m?m:c,openMotion:i,accordion:s,children:e.props.children,onItemClick:"disabled"===g?null:r.onClickItem,expandIcon:l,collapsible:g};return"string"==typeof e.type?e:(Object.keys(C).forEach(function(e){void 0===C[e]&&delete C[e]}),v.cloneElement(e,C))},r.getItems=function(){var e=r.props.children;return(0,h.Z)(e).map(r.getNewChild)},r.setActiveKey=function(e){"activeKey"in r.props||r.setState({activeKey:e}),r.props.onChange(r.props.accordion?e[0]:e)};var r,a=e.activeKey,o=e.defaultActiveKey;return"activeKey"in e&&(o=a),r.state={activeKey:w(o)},r}return(0,u.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!y()(this.props,e)||!y()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,r=t.className,o=t.style,i=t.accordion,c=s()((e={},(0,a.Z)(e,n,!0),(0,a.Z)(e,r,!!r),e));return v.createElement("div",{className:c,style:o,role:i?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=w(e.activeKey)),t}}]),n}(v.Component);k.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},k.Panel=j,k.Panel;var N=n(98423),E=n(53124),I=n(33603),A=n(96159),P=function(e){var t,n,i=v.useContext(E.E_),c=i.getPrefixCls,l=i.direction,u=e.prefixCls,d=e.className,p=e.bordered,f=e.ghost,m=e.expandIconPosition,y=void 0===m?"start":m,x=c("collapse",u),g=v.useMemo(function(){return"left"===y?"start":"right"===y?"end":y},[y]),C=s()("".concat(x,"-icon-position-").concat(g),(n={},(0,a.Z)(n,"".concat(x,"-borderless"),!(void 0===p||p)),(0,a.Z)(n,"".concat(x,"-rtl"),"rtl"===l),(0,a.Z)(n,"".concat(x,"-ghost"),!!f),n),void 0===d?"":d),b=(0,r.Z)((0,r.Z)({},I.ZP),{motionAppear:!1,leavedClassName:"".concat(x,"-content-hidden")});return v.createElement(k,(0,r.Z)({openMotion:b},e,{expandIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.expandIcon,r=n?n(t):v.createElement(o.Z,{rotate:t.isActive?90:void 0});return(0,A.Tm)(r,function(){return{className:s()(r.props.className,"".concat(x,"-arrow"))}})},prefixCls:x,className:C}),(t=e.children,(0,h.Z)(t).map(function(e,t){var n;if(null===(n=e.props)||void 0===n?void 0:n.disabled){var a=e.key||String(t),o=e.props,i=o.disabled,s=o.collapsible,c=(0,r.Z)((0,r.Z)({},(0,N.Z)(e.props,["disabled"])),{key:a,collapsible:null!=s?s:i?"disabled":void 0});return(0,A.Tm)(e,c)}return e})))};P.Panel=function(e){var t=v.useContext(E.E_).getPrefixCls,n=e.prefixCls,o=e.className,i=e.showArrow,c=t("collapse",n),l=s()((0,a.Z)({},"".concat(c,"-no-arrow"),!(void 0===i||i)),void 0===o?"":o);return v.createElement(k.Panel,(0,r.Z)({},e,{prefixCls:c,className:l}))};var S=P},79531:function(e,t,n){"use strict";n.d(t,{default:function(){return z}});var r=n(87462),a=n(4942),o=n(94184),i=n.n(o),s=n(67294),c=n(53124),l=n(65223),u=n(82586),d=n(97685),p=n(71002),f=n(1413),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},v=n(42135),m=function(e,t){return s.createElement(v.Z,(0,f.Z)((0,f.Z)({},e),{},{ref:t,icon:h}))};m.displayName="EyeInvisibleOutlined";var y=s.forwardRef(m),x=n(99611),g=n(98423),C=n(42550),b=n(72922),Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},j=function(e){return e?s.createElement(x.Z,null):s.createElement(y,null)},w={click:"onClick",hover:"onMouseOver"},k=s.forwardRef(function(e,t){var n=e.visibilityToggle,o=void 0===n||n,l="object"===(0,p.Z)(o)&&void 0!==o.visible,f=(0,s.useState)(function(){return!!l&&o.visible}),h=(0,d.Z)(f,2),v=h[0],m=h[1],y=(0,s.useRef)(null);s.useEffect(function(){l&&m(o.visible)},[l,o]);var x=(0,b.Z)(y),k=function(){e.disabled||(v&&x(),m(function(e){var t,n=!e;return"object"===(0,p.Z)(o)&&(null===(t=o.onVisibleChange)||void 0===t||t.call(o,n)),n}))},N=function(t){var n,r=e.action,o=e.iconRender,i=w[void 0===r?"click":r]||"",c=(void 0===o?j:o)(v),l=(n={},(0,a.Z)(n,i,k),(0,a.Z)(n,"className","".concat(t,"-icon")),(0,a.Z)(n,"key","passwordIcon"),(0,a.Z)(n,"onMouseDown",function(e){e.preventDefault()}),(0,a.Z)(n,"onMouseUp",function(e){e.preventDefault()}),n);return s.cloneElement(s.isValidElement(c)?c:s.createElement("span",null,c),l)};return s.createElement(c.C,null,function(n){var c=n.getPrefixCls,l=e.className,d=e.prefixCls,p=e.inputPrefixCls,f=e.size,h=Z(e,["className","prefixCls","inputPrefixCls","size"]),m=c("input",p),x=c("input-password",d),b=o&&N(x),j=i()(x,l,(0,a.Z)({},"".concat(x,"-").concat(f),!!f)),w=(0,r.Z)((0,r.Z)({},(0,g.Z)(h,["suffix","iconRender","visibilityToggle"])),{type:v?"text":"password",className:j,prefixCls:m,suffix:b});return f&&(w.size=f),s.createElement(u.ZP,(0,r.Z)({ref:(0,C.sQ)(t,y)},w))})}),N=n(68795),E=n(71577),I=n(97647),A=n(4173),P=n(96159),S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},O=s.forwardRef(function(e,t){var n,o,l=e.prefixCls,d=e.inputPrefixCls,p=e.className,f=e.size,h=e.suffix,v=e.enterButton,m=void 0!==v&&v,y=e.addonAfter,x=e.loading,g=e.disabled,b=e.onSearch,Z=e.onChange,j=e.onCompositionStart,w=e.onCompositionEnd,k=S(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),O=s.useContext(c.E_),M=O.getPrefixCls,_=O.direction,z=s.useContext(I.Z),T=s.useRef(!1),R=M("input-search",l),K=M("input",d),F=(0,A.ri)(R,_).compactSize||f||z,L=s.useRef(null),B=function(e){var t;document.activeElement===(null===(t=L.current)||void 0===t?void 0:t.input)&&e.preventDefault()},U=function(e){var t,n;b&&b(null===(n=null===(t=L.current)||void 0===t?void 0:t.input)||void 0===n?void 0:n.value,e)},D="boolean"==typeof m?s.createElement(N.Z,null):null,J="".concat(R,"-button"),Q=m||{},V=Q.type&&!0===Q.type.__ANT_BUTTON;o=V||"button"===Q.type?(0,P.Tm)(Q,(0,r.Z)({onMouseDown:B,onClick:function(e){var t,n;null===(n=null===(t=null==Q?void 0:Q.props)||void 0===t?void 0:t.onClick)||void 0===n||n.call(t,e),U(e)},key:"enterButton"},V?{className:J,size:F}:{})):s.createElement(E.Z,{className:J,type:m?"primary":void 0,size:F,disabled:g,key:"enterButton",onMouseDown:B,onClick:U,loading:x,icon:D},m),y&&(o=[o,(0,P.Tm)(y,{key:"addonAfter"})]);var Y=i()(R,(n={},(0,a.Z)(n,"".concat(R,"-rtl"),"rtl"===_),(0,a.Z)(n,"".concat(R,"-").concat(F),!!F),(0,a.Z)(n,"".concat(R,"-with-button"),!!m),n),p);return s.createElement(u.ZP,(0,r.Z)({ref:(0,C.sQ)(L,t),onPressEnter:function(e){T.current||x||U(e)}},k,{size:F,onCompositionStart:function(e){T.current=!0,null==j||j(e)},onCompositionEnd:function(e){T.current=!1,null==w||w(e)},prefixCls:K,addonAfter:o,suffix:h,onChange:function(e){e&&e.target&&"click"===e.type&&b&&b(e.target.value,e),Z&&Z(e)},className:Y,disabled:g}))}),M=n(80173),_=u.ZP;_.Group=function(e){var t,n=(0,s.useContext)(c.E_),o=n.getPrefixCls,u=n.direction,d=e.prefixCls,p=e.className,f=o("input-group",d),h=i()(f,(t={},(0,a.Z)(t,"".concat(f,"-lg"),"large"===e.size),(0,a.Z)(t,"".concat(f,"-sm"),"small"===e.size),(0,a.Z)(t,"".concat(f,"-compact"),e.compact),(0,a.Z)(t,"".concat(f,"-rtl"),"rtl"===u),t),void 0===p?"":p),v=(0,s.useContext)(l.aM),m=(0,s.useMemo)(function(){return(0,r.Z)((0,r.Z)({},v),{isFormItemInput:!1})},[v]);return s.createElement("span",{className:h,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},s.createElement(l.aM.Provider,{value:m},e.children))},_.Search=O,_.TextArea=M.Z,_.Password=k;var z=_},78513:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthModal:function(){return S}});var r=n(85893),a=n(44526),o=n(4480),i=n(4511),s=n(54907),c=n(85818),l=n(11382),u=n(26713),d=n(14670),p=n(79531),f=n(71577),h=n(5152),v=n.n(h),m=n(67294),y=n(53899);let{Panel:x}=s.default,{Link:g}=c.default,C=v()(()=>Promise.all([n.e(2074),n.e(7996)]).then(n.t.bind(n,67996,23)),{loadableGenerated:{webpack:()=>[67996]},ssr:!1}),b=e=>{let{authenticated:t,displayName:n,accessToken:a}=e,[o,i]=(0,m.useState)(null),[c,h]=(0,m.useState)(!1),[v,b]=(0,m.useState)(!1),[Z,j]=(0,m.useState)(""),w=t?(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:"You are already authenticated"}),". However, you can add other domains or log in as a different user."]}):(0,r.jsxs)("span",{children:["Use your own domain to authenticate ",(0,r.jsx)("span",{children:n})," or login as a previously"," ","authenticated chat user using IndieAuth."]}),k=o;k&&k.includes("url does not support indieauth")&&(k="The provided URL is either invalid or does not support IndieAuth.");let N=e=>{if(!(0,y.jv)(e)||!e.includes(".")){b(!1);return}b(!0)},E=async()=>{if(v){h(!0);try{let e=await fetch("/api/auth/indieauth?accessToken=".concat(a),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({authHost:"https://".concat(Z)})}),t=await e.json();if(t.message){i(t.message),h(!1);return}if(!t.redirect){i("Auth provider did not return a redirect URL."),h(!1);return}if(t.redirect){let{redirect:e}=t;window.location=e}}catch(e){i(e.message)}h(!1)}};return(0,r.jsx)(l.Z,{spinning:c,children:(0,r.jsxs)(u.Z,{direction:"vertical",children:[w,k&&(0,r.jsx)(d.Z,{message:"Error",description:k,type:"error",showIcon:!0}),(0,r.jsx)("div",{children:"Your domain"}),(0,r.jsx)(p.default.Search,{addonBefore:"https://",onInput:e=>{let t=e.nativeEvent.data;if(":"===t)return;j(e.target.value);let n="https://".concat(e.target.value);N(n)},type:"url",value:Z,placeholder:"yoursite.com",status:!v&&Z.length>0?"error":void 0,onSearch:E,enterButton:(0,r.jsx)(f.Z,{type:v?"primary":"default",disabled:!v||0===Z.length,children:(0,r.jsx)(C,{})})}),(0,r.jsx)(s.default,{ghost:!0,children:(0,r.jsxs)(x,{header:"Learn more about using IndieAuth to authenticate with chat.",children:[(0,r.jsx)("p",{children:"IndieAuth allows for a completely independent and decentralized way of identifying yourself using your own domain."}),(0,r.jsxs)("p",{children:["If you run an Owncast instance, you can use that domain here. Otherwise,"," ",(0,r.jsx)(g,{href:"https://indieauth.net/#providers",children:"learn more about how you can support IndieAuth"}),"."]})]},"header")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Note"}),": This is for authentication purposes only, and no personal information will be accessed or stored."]})]})})};var Z=n(80453),j=n.n(Z);let{Panel:w}=s.default,k=v()(()=>Promise.all([n.e(2074),n.e(7996)]).then(n.t.bind(n,67996,23)),{loadableGenerated:{webpack:()=>[67996]},ssr:!1}),N=e=>{let{authenticated:t,displayName:n,accessToken:a}=e,[o,i]=(0,m.useState)(null),[c,h]=(0,m.useState)(!1),[v,x]=(0,m.useState)(!1),[g,C]=(0,m.useState)(""),[b,Z]=(0,m.useState)(""),[N,E]=(0,m.useState)(!1),I=t?(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:"You are already authenticated"}),". However, you can add other domains or log in as a different user."]}):(0,r.jsxs)("span",{children:["Receive a direct message on the Fediverse to link your account to"," ",(0,r.jsx)("strong",{children:n}),", or login as a previously linked chat user."]}),A=o;A&&A.includes("url does not support indieauth")&&(A="The provided URL is either invalid or does not support IndieAuth.");let P=e=>{x((0,y.ME)(e))},S=async(e,t)=>{let n=await fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}),r=await n.json();r.message&&(i(r.message),h(!1))},O=async()=>{h(!0);try{await S("/api/auth/fediverse/verify?accessToken=".concat(a),{code:b}),window.location.href="/"}catch(e){console.error(e),i(e)}h(!1)},M=async()=>{if(!v)return;h(!0),i(null);let e=g.replace(/^@+/,"");try{await S("/api/auth/fediverse?accessToken=".concat(a),{account:e}),E(!0)}catch(e){console.error(e),i(e)}h(!1)},_=(0,r.jsxs)("div",{children:["Paste in the code that was sent to your Fediverse account. If you did not receive a code, make sure you can accept direct messages.",(0,r.jsxs)("div",{className:j().codeInputContainer,children:[(0,r.jsx)(p.default,{value:b,onChange:e=>Z(e.target.value),className:j().codeInput,placeholder:"123456",maxLength:6}),(0,r.jsx)(f.Z,{type:"primary",onClick:O,disabled:b.length<6,className:j().submitButton,children:"Verify Code"})]})]}),z=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"Your Fediverse Account"}),(0,r.jsx)(p.default.Search,{addonBefore:"@",onInput:e=>{C(e.target.value),P(e.target.value)},value:g,placeholder:"youraccount@yourserver.com",status:!v&&g.length>0?"error":void 0,onSearch:M,enterButton:(0,r.jsx)(f.Z,{type:v?"primary":"default",disabled:!v||0===g.length,children:(0,r.jsx)(k,{})})})]});return(0,r.jsx)(l.Z,{spinning:c,children:(0,r.jsxs)(u.Z,{direction:"vertical",children:[I,A&&(0,r.jsx)(d.Z,{message:"Error",description:A,type:"error",showIcon:!0}),N?_:z,(0,r.jsx)(s.default,{ghost:!0,children:(0,r.jsx)(w,{header:"Learn more about using the Fediverse to authenticate with chat.",children:(0,r.jsx)("p",{children:"You can link your chat identity with your Fediverse identity. Next time you want to use this chat identity you can again go through the Fediverse authentication."})},"header")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Note"}),": This is for authentication purposes only, and no personal information will be accessed or stored."]})]})})};var E=n(444),I=n.n(E),A=n(44974),P=n(69183);let S=e=>{let{forceTabs:t}=e,n=(0,o.sJ)(A.L4),s=(0,o.sJ)(A.FI),c=(0,o.sJ)(A.db),l=(0,o.sJ)(A.g1);if(!c)return null;let{displayName:u}=c,{federation:d}=l,{enabled:p}=d,f=(0,r.jsxs)("span",{className:I().tabContent,children:[(0,r.jsx)("img",{className:I().icon,src:"/img/indieauth.png",alt:"IndieAuth"}),"IndieAuth"]}),h=(0,r.jsx)(b,{authenticated:n,displayName:u,accessToken:s}),v=(0,r.jsxs)("span",{className:I().tabContent,children:[(0,r.jsx)("img",{className:I().icon,src:"/img/fediverse-black.png",alt:"Fediverse auth"}),"FediAuth"]}),m=(0,r.jsx)(N,{authenticated:n,displayName:u,accessToken:s});return(0,r.jsx)(i.SV,{fallbackRender:e=>{let{error:t,resetErrorBoundary:n}=e;return(0,r.jsx)(P.A,{componentName:"AuthModal",message:t.message,retryFunction:n})},children:(0,r.jsx)("div",{children:(0,r.jsx)(a.Z,{defaultActiveKey:"1",items:[{label:f,key:"1",children:h},{label:v,key:"2",children:m}],type:"card",size:"small",renderTabBar:p||t?null:()=>null})})})}},53899:function(e,t,n){"use strict";n.d(t,{Kf:function(){return o},ME:function(){return s},ax:function(){return r},bu:function(){return i},jv:function(){return a}});let r="https?://.*";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["http:","https:"];try{let n=new URL(e);if(""===n.protocol||""===n.hostname||!t.includes(n.protocol))return!1}catch(e){return!1}return!0}function o(e,t){e.startsWith("@")&&(e=e.slice(1));let n=e.split(/:|@/),[r,a,o]=n;return r===t&&3===n.length&&!!r&&!!a&&!!o}function i(e){e.startsWith("matrix:")&&(e=e.slice(7)),e.startsWith("@")&&(e=e.slice(1));let t=e.split(":"),[n,r]=t;return 2===t.length&&!!n&&!!r}function s(e){let t=e.replace(/^@+/,"");return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())}},444:function(e){e.exports={tabContent:"AuthModal_tabContent__KgMU3",icon:"AuthModal_icon__kpEuV"}},80453:function(e){e.exports={codeInputContainer:"FediAuthModal_codeInputContainer__M_dAD",codeInput:"FediAuthModal_codeInput__dIE6u",submitButton:"FediAuthModal_submitButton__iuF9R"}},96774:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var l=o[c];if(!s(l))return!1;var u=e[l],d=t[l];if(!1===(a=n?n.call(r,u,d,l):void 0)||void 0===a&&u!==d)return!1}return!0}}}]);